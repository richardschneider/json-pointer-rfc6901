!function(t,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n():t.JSON.pointer=n()}(this,function(){var t,n,e=function(t,n){function e(){this.constructor=t}for(var u in n)r.call(n,u)&&(t[u]=n[u]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t},r={}.hasOwnProperty;return n=function(t){function n(t){var e;e=n.__super__.constructor.call(this,t),this.message=e.message,this.stack=e.stack,this.name=this.constructor.name}return e(n,t),n}(Error),t=function(){function t(n,e,r){switch(arguments.length){case 3:return t.set(n,e,r);case 2:return t.get(n,e);case 1:return t.smartBind({object:n});default:return null}}return t.JsonPointerError=n,t.smartBind=function(n){var e,u,o,s,a,i,l,c,f,p,g;if(c=n.object,p=n.pointer,u=n.fragment,f=n.options,p=null!=u?u:p,o=void 0!==c,a=null!=p,s=null!=f,"string"==typeof p&&(p=this.parse(p)),l=function(t){var n,e,r,u,o,s,a;return null==t&&(t={}),n={},n.hasOwnProp=null!=(e=t.hasOwnProp)?e:f.hasOwnProp,n.getProp=null!=(r=t.getProp)?r:f.getProp,n.setProp=null!=(u=t.setProp)?u:f.setProp,n.getNotFound=null!=(o=t.getNotFound)?o:f.getNotFound,n.setNotFound=null!=(s=t.setNotFound)?s:f.setNotFound,n.delNotFound=null!=(a=t.delNotFound)?a:f.delNotFound,n},e=void 0,o&&a&&s)e=function(n){switch(arguments.length){case 1:return t.set(c,p,n,f);case 0:return t.get(c,p,f);default:return null}},e.set=function(n,e){return c=t.set(c,p,n,l(e))},e.get=function(n){return t.get(c,p,l(n))},e.has=function(n){return t.has(c,p,l(n))},e.del=function(n){return c=t.del(c,p,l(n))};else if(o&&a)e=function(n){switch(arguments.length){case 1:return t.set(c,p,n);case 0:return t.get(c,p);default:return null}},e.set=function(n,e){return c=t.set(c,p,n,e)},e.get=function(n){return t.get(c,p,n)},e.has=function(n){return t.has(c,p,n)},e.del=function(n){return c=t.del(c,p,n)};else if(o&&s)e=function(n,e){switch(arguments.length){case 2:return t.set(c,n,e,f);case 1:return t.get(c,n,f);default:return null}},e.set=function(n,e,r){return c=t.set(c,n,e,l(r))},e.get=function(n,e){return t.get(c,n,l(e))},e.has=function(n,e){return t.has(c,n,l(e))},e.del=function(n,e){return c=t.del(c,n,l(e))};else if(a&&s)e=function(n,e){switch(arguments.length){case 2:return t.set(n,p,e,f);case 1:return t.get(n,p,f);default:return null}},e.set=function(n,e,r){return t.set(n,p,e,l(r))},e.get=function(n,e){return t.get(n,p,l(e))},e.has=function(n,e){return t.has(n,p,l(e))},e.del=function(n,e){return t.del(n,p,l(e))};else if(s)e=function(n,r,u){switch(arguments.length){case 3:return t.set(n,r,u,f);case 2:return t.get(n,r,f);case 1:return e.smartBind({object:n});default:return null}},e.set=function(n,e,r,u){return t.set(n,e,r,l(u))},e.get=function(n,e,r){return t.get(n,e,l(r))},e.has=function(n,e,r){return t.has(n,e,l(r))},e.del=function(n,e,r){return t.del(n,e,l(r))};else if(o)e=function(n,e){switch(arguments.length){case 2:return t.set(c,n,e);case 1:return t.get(c,n);default:return null}},e.set=function(n,e,r){return c=t.set(c,n,e,r)},e.get=function(n,e){return t.get(c,n,e)},e.has=function(n,e){return t.has(c,n,e)},e.del=function(n,e){return c=t.del(c,n,e)};else{if(!a)return this;e=function(n,e){switch(arguments.length){case 2:return t.set(n,p,e);case 1:return t.get(n,p);default:return null}},e.set=function(n,e,r){return t.set(n,p,e,r)},e.get=function(n,e){return t.get(n,p,e)},e.has=function(n,e){return t.has(n,p,e)},e.del=function(n,e){return t.del(n,p,e)}}e.smartBind=function(n){var e;return e={},{}.hasOwnProperty.call(n,"object")?e.object=n.object:o&&(e.object=c),{}.hasOwnProperty.call(n,"pointer")?e.pointer=n.pointer:a&&(e.pointer=p),{}.hasOwnProperty.call(n,"options")?e.options=l(n.options):o&&(e.options=f),t.smartBind(e)},a&&(e.pointer=function(n){return 0===arguments.length?t.compilePointer(p):p=t.parsePointer(n)},e.fragment=function(n){return 0===arguments.length?t.compileFragment(p):p=t.parseFragment(n)}),o&&(e.object=function(t){return 0===arguments.length?c:c=t}),s&&(e.options=function(t){return 0===arguments.length?f:f=t});for(i in t)r.call(t,i)&&(g=t[i],{}.hasOwnProperty.call(e,i)||(e[i]=g));return e},t.escape=function(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")},t.escapeFragment=function(n){return encodeURIComponent(t.escape(n))},t.unescape=function(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")},t.unescapeFragment=function(n){return t.unescape(decodeURIComponent(n))},t.isPointer=function(t){switch(t.charAt(0)){case"":return!0;case"/":return!0;default:return!1}},t.isFragment=function(t){switch(t.substring(0,2)){case"#":return!0;case"#/":return!0;default:return!1}},t.parse=function(e){switch(e.charAt(0)){case"":return[];case"/":return e.substring(1).split("/").map(t.unescape);case"#":switch(e.charAt(1)){case"":return[];case"/":return e.substring(2).split("/").map(t.unescapeFragment);default:throw new n("Invalid JSON fragment pointer: "+e)}break;default:throw new n("Invalid JSON pointer: "+e)}},t.parsePointer=function(e){switch(e.charAt(0)){case"":return[];case"/":return e.substring(1).split("/").map(t.unescape);default:throw new n("Invalid JSON pointer: "+e)}},t.parseFragment=function(e){switch(e.substring(0,2)){case"#":return[];case"#/":return e.substring(2).split("/").map(t.unescapeFragment);default:throw new n("Invalid JSON fragment pointer: "+e)}},t.compile=function(n){return n.map(function(n){return"/"+t.escape(n)}).join("")},t.compilePointer=function(n){return n.map(function(n){return"/"+t.escape(n)}).join("")},t.compileFragment=function(n){return"#"+n.map(function(n){return"/"+t.escapeFragment(n)}).join("")},t.hasJsonProp=function(t,n){return Array.isArray(t)?"number"==typeof n&&n<t.length:"object"==typeof t?{}.hasOwnProperty.call(t,n):!1},t.hasOwnProp=function(t,n){return{}.hasOwnProperty.call(t,n)},t.hasProp=function(t,n){return n in t},t.getProp=function(t,n){return t[n]},t.setProp=function(t,n,e){return t[n]=e},t.getNotFound=function(t,n,e,r,u){},t.setNotFound=function(t,n,e,r,u){return r[u+1].match(/^(?:0|[1-9]\d*|-)$/)?t[n]=[]:t[n]={}},t.delNotFound=function(t,n,e,r,u){},t.errorNotFound=function(e,r,u,o,s){throw new n("Unable to find json path: "+t.compile(o.slice(0,s+1)))},t.set=function(n,e,r,u){var o,s,a,i,l,c,f,p,g,h,d,m;if("string"==typeof e&&(e=t.parse(e)),0===e.length)return r;for(s=null!=(l=null!=u?u.hasProp:void 0)?l:t.hasJsonProp,o=null!=(c=null!=u?u.getProp:void 0)?c:t.getProp,m=null!=(f=null!=u?u.setProp:void 0)?f:t.setProp,d=null!=(p=null!=u?u.setNotFound:void 0)?p:t.setNotFound,g=n,a=0,i=e.length;a!==i;){if(h=e[a],++a,"-"===h&&Array.isArray(n)?h=n.length:h.match(/^(?:0|[1-9]\d*)$/)&&Array.isArray(n)&&(h=parseInt(h,10)),a===i){m(n,h,r);break}n=s(n,h)?o(n,h):d(n,h,g,e,a-1)}return g},t.get=function(n,e,r){var u,o,s,a,i,l,c,f,p,g;for("string"==typeof e&&(e=t.parse(e)),s=null!=(l=null!=r?r.hasProp:void 0)?l:t.hasJsonProp,o=null!=(c=null!=r?r.getProp:void 0)?c:t.getProp,u=null!=(f=null!=r?r.getNotFound:void 0)?f:t.getNotFound,p=n,a=0,i=e.length;a!==i;){if(g=e[a],++a,"-"===g&&Array.isArray(n)?g=n.length:g.match(/^(?:0|[1-9]\d*)$/)&&Array.isArray(n)&&(g=parseInt(g,10)),!s(n,g))return u(n,g,p,e,a-1);n=o(n,g)}return n},t.del=function(n,e,r){var u,o,s,a,i,l,c,f,p,g;if("string"==typeof e&&(e=t.parse(e)),0!==e.length){for(s=null!=(l=null!=r?r.hasProp:void 0)?l:t.hasJsonProp,o=null!=(c=null!=r?r.getProp:void 0)?c:t.getProp,u=null!=(f=null!=r?r.delNotFound:void 0)?f:t.delNotFound,p=n,a=0,i=e.length;a!==i;){if(g=e[a],++a,"-"===g&&Array.isArray(n)?g=n.length:g.match(/^(?:0|[1-9]\d*)$/)&&Array.isArray(n)&&(g=parseInt(g,10)),!s(n,g)){u(n,g,p,e,a-1);break}if(a===i){delete n[g];break}n=o(n,g)}return p}},t.has=function(n,e,r){var u,o,s,a,i,l,c;for("string"==typeof e&&(e=t.parse(e)),o=null!=(i=null!=r?r.hasProp:void 0)?i:t.hasJsonProp,u=null!=(l=null!=r?r.getProp:void 0)?l:t.getProp,s=0,a=e.length;s!==a;){if(c=e[s],++s,"-"===c&&Array.isArray(n)?c=n.length:c.match(/^(?:0|[1-9]\d*)$/)&&Array.isArray(n)&&(c=parseInt(c,10)),!o(n,c))return!1;n=u(n,c)}return!0},t}()});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzb24tcG9pbnRlci51bWQuanMiLCJqc29uLXBvaW50ZXIuY29mZmVlIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZGVmaW5lIiwiYW1kIiwiZXhwb3J0cyIsIm1vZHVsZSIsIkpTT04iLCJwb2ludGVyIiwidGhpcyIsIkpzb25Qb2ludGVyIiwiSnNvblBvaW50ZXJFcnJvciIsImV4dGVuZCIsImNoaWxkIiwicGFyZW50IiwiY3RvciIsImNvbnN0cnVjdG9yIiwia2V5IiwiaGFzUHJvcDEiLCJjYWxsIiwicHJvdG90eXBlIiwiX19zdXBlcl9fIiwiaGFzT3duUHJvcGVydHkiLCJzdXBlckNsYXNzIiwibWVzc2FnZSIsImJhc2UiLCJzdGFjayIsIm5hbWUiLCJFcnJvciIsIm9iamVjdCIsInZhbHVlIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwic2V0IiwiZ2V0Iiwic21hcnRCaW5kIiwiYXJnIiwiYXBpIiwiZnJhZyIsImhhc09iaiIsImhhc09wdCIsImhhc1B0ciIsIm1lcmdlT3B0aW9ucyIsIm9iaiIsIm9wdCIsInB0ciIsInZhbCIsImZyYWdtZW50Iiwib3B0aW9ucyIsInBhcnNlIiwib3ZlcnJpZGUiLCJvIiwicmVmIiwicmVmMSIsInJlZjIiLCJyZWYzIiwicmVmNCIsInJlZjUiLCJoYXNPd25Qcm9wIiwiZ2V0UHJvcCIsInNldFByb3AiLCJnZXROb3RGb3VuZCIsInNldE5vdEZvdW5kIiwiZGVsTm90Rm91bmQiLCJoYXMiLCJkZWwiLCJjb21waWxlUG9pbnRlciIsInBhcnNlUG9pbnRlciIsImNvbXBpbGVGcmFnbWVudCIsInBhcnNlRnJhZ21lbnQiLCJlc2NhcGUiLCJzZWdtZW50IiwicmVwbGFjZSIsImVzY2FwZUZyYWdtZW50IiwiZW5jb2RlVVJJQ29tcG9uZW50IiwidW5lc2NhcGUiLCJ1bmVzY2FwZUZyYWdtZW50IiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiaXNQb2ludGVyIiwic3RyIiwiY2hhckF0IiwiaXNGcmFnbWVudCIsInN1YnN0cmluZyIsInNwbGl0IiwibWFwIiwiY29tcGlsZSIsInNlZ21lbnRzIiwiam9pbiIsImhhc0pzb25Qcm9wIiwiQXJyYXkiLCJpc0FycmF5IiwiaGFzUHJvcCIsImlTZWdtZW50IiwibWF0Y2giLCJlcnJvck5vdEZvdW5kIiwic2xpY2UiLCJsZW4iLCJwYXJzZUludCJdLCJtYXBwaW5ncyI6IkNBQUUsU0FBU0EsRUFBTUMsR0FDTyxrQkFBWEMsU0FBeUJBLE9BQU9DLElBQ3pDRCxVQUFXRCxHQUNpQixnQkFBWkcsU0FDaEJDLE9BQU9ELFFBQVVILElBRWpCRCxFQUFLTSxLQUFLQyxRQUFVTixLQUV0Qk8sS0FBTSxXQUNSLEdBQUlDLEdDVEpDLEVBQUFDLEVBQUEsU0FBQUMsRUFBQUMsR0FBQSxRQUFBQyxLQUFBTixLQUFBTyxZQUFBSCxFQUFBLElBQUEsR0FBQUksS0FBQUgsR0FBQUksRUFBQUMsS0FBQUwsRUFBQUcsS0FBQUosRUFBQUksR0FBQUgsRUFBQUcsR0FBQSxPQUFBRixHQUFBSyxVQUFBTixFQUFBTSxVQUFBUCxFQUFBTyxVQUFBLEdBQUFMLEdBQUFGLEVBQUFRLFVBQUFQLEVBQUFNLFVBQUFQLEdEV0VLLEtBQWNJLGNBaTdCaEIsT0M1N0JNWCxHQUFBLFNBQUFZLEdBQ1MsUUFBQVosR0FBQ2EsR0FDWixHQUFBQyxFQUFBQSxHQUFPZCxFQUFBVSxVQUFBTCxZQUFBRyxLQUFBVixLQUFNZSxHQUViZixLQUFDZSxRQUFVQyxFQUFLRCxRQUNoQmYsS0FBQ2lCLE1BQVFELEVBQUtDLE1BQ2RqQixLQUFDa0IsS0FBT2xCLEtBQUNPLFlBQVlXLEtEa0J2QixNQVZBZixHQUFPRCxFQUFrQlksR0FVbEJaLEdDeEJzQmlCLE9BUXpCbEIsRUFBQSxXQVdTLFFBQUFBLEdBQUNtQixFQUFRckIsRUFBU3NCLEdBQ3RCLE9BQU9DLFVBQVVDLFFBQWpCLElBQ0EsR0R1QkgsTUN2QlV0QixHQUFZdUIsSUFBSUosRUFBUXJCLEVBQVNzQixFQUR4QyxLQUVBLEdEd0JILE1DeEJVcEIsR0FBWXdCLElBQUlMLEVBQVFy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aUQsUUFFekNpQyxFQUFXLEVBQ1hJLEVBQU14RixFQUFRd0IsT0FDUjRELElBQVlJLEdBQWxCLENBU0UsR0FSQXpCLEVBQVUvRCxFQUFRb0YsS0FDaEJBLEVBRVksTUFBWHJCLEdBQW1Ca0IsTUFBTUMsUUFBUS9DLEdBQ2xDNEIsRUFBVTVCLEVBQUlYLE9BQ1J1QyxFQUFRc0IsTUFBTSxxQkFBd0JKLE1BQU1DLFFBQVEvQyxLQUMxRDRCLEVBQVUwQixTQUFTMUIsRUFBUyxNQUV2Qm9CLEVBQVFoRCxFQUFLNEIsR0FDbEIsT0FBTyxDQUVUNUIsR0FBTWdCLEVBQVFoQixFQUFLNEIsR0FFckIsT0FBTyxHRDBPRjdEIiwiZmlsZSI6Impzb24tcG9pbnRlci51bWQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiOyhmdW5jdGlvbihyb290LCBmYWN0b3J5KSB7XG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoW10sIGZhY3RvcnkpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuICB9IGVsc2Uge1xuICAgIHJvb3QuSlNPTi5wb2ludGVyID0gZmFjdG9yeSgpO1xuICB9XG59KHRoaXMsIGZ1bmN0aW9uKCkge1xudmFyIEpzb25Qb2ludGVyLCBKc29uUG9pbnRlckVycm9yLFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AxLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wMSA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5Kc29uUG9pbnRlckVycm9yID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKEpzb25Qb2ludGVyRXJyb3IsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIEpzb25Qb2ludGVyRXJyb3IobWVzc2FnZSkge1xuICAgIHZhciBiYXNlO1xuICAgIGJhc2UgPSBKc29uUG9pbnRlckVycm9yLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIG1lc3NhZ2UpO1xuICAgIHRoaXMubWVzc2FnZSA9IGJhc2UubWVzc2FnZTtcbiAgICB0aGlzLnN0YWNrID0gYmFzZS5zdGFjaztcbiAgICB0aGlzLm5hbWUgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7XG4gIH1cblxuICByZXR1cm4gSnNvblBvaW50ZXJFcnJvcjtcblxufSkoRXJyb3IpO1xuXG5Kc29uUG9pbnRlciA9IChmdW5jdGlvbigpIHtcbiAgSnNvblBvaW50ZXIuSnNvblBvaW50ZXJFcnJvciA9IEpzb25Qb2ludGVyRXJyb3I7XG5cblxuICAvKlxuICAgKiBDb252ZW5pZW5jZSBmdW5jdGlvbiBmb3IgY2hvb3NpbmcgYmV0d2VlbiBgLnNtYXJ0QmluZGAsIGAuZ2V0YCwgYW5kIGAuc2V0YCwgZGVwZW5kaW5nIG9uIHRoZSBudW1iZXIgb2YgYXJndW1lbnRzLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IG9iamVjdFxuICAgKiBAcGFyYW0ge3N0cmluZ30gcG9pbnRlclxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEByZXR1cm5zIHsqfSBldmFsdWF0aW9uIG9mIHRoZSBwcm94aWVkIG1ldGhvZFxuICAgKi9cblxuICBmdW5jdGlvbiBKc29uUG9pbnRlcihvYmplY3QsIHBvaW50ZXIsIHZhbHVlKSB7XG4gICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICBjYXNlIDM6XG4gICAgICAgIHJldHVybiBKc29uUG9pbnRlci5zZXQob2JqZWN0LCBwb2ludGVyLCB2YWx1ZSk7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIHJldHVybiBKc29uUG9pbnRlci5nZXQob2JqZWN0LCBwb2ludGVyKTtcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgcmV0dXJuIEpzb25Qb2ludGVyLnNtYXJ0QmluZCh7XG4gICAgICAgICAgb2JqZWN0OiBvYmplY3RcbiAgICAgICAgfSk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuXG4gIC8qXG4gICAqIENyZWF0ZXMgYSBjbG9uZSBvZiB0aGUgYXBpLCB3aXRoIGAuLy5nZXQvLmhhcy8uc2V0Ly5kZWwvLnNtYXJ0QmluZGAgbWV0aG9kIHNpZ25hdHVyZXMgYWRqdXN0ZWQuXG4gICAqIFRoZSBzbWFydEJpbmQgbWV0aG9kIGlzIGN1bXVsYXRpdmUsIG1lYW5pbmcgdGhhdCBgLnNtYXJ0QmluZCh7IG9iamVjdDogeH0pLnNtYXJ0QmluZCh7IHBvaW50ZXI6IHkgfSlgIHdpbGwgYmVoYXZlIGFzIGV4cGVjdGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gYmluZGluZ3NcbiAgICogQHBhcmFtIHsqfSBiaW5kaW5ncy5vYmplY3RcbiAgICogQHBhcmFtIHtzdHJpbmd8c3RyaW5nW119IGJpbmRpbmdzLnBvaW50ZXJcbiAgICogQHBhcmFtIHtPYmplY3R9IGJpbmRpbmdzLm9wdGlvbnNcbiAgICogQHJldHVybnMge0pzb25Qb2ludGVyfVxuICAgKi9cblxuICBKc29uUG9pbnRlci5zbWFydEJpbmQgPSBmdW5jdGlvbihhcmcpIHtcbiAgICB2YXIgYXBpLCBmcmFnLCBoYXNPYmosIGhhc09wdCwgaGFzUHRyLCBrZXksIG1lcmdlT3B0aW9ucywgb2JqLCBvcHQsIHB0ciwgdmFsO1xuICAgIG9iaiA9IGFyZy5vYmplY3QsIHB0ciA9IGFyZy5wb2ludGVyLCBmcmFnID0gYXJnLmZyYWdtZW50LCBvcHQgPSBhcmcub3B0aW9ucztcbiAgICBwdHIgPSBmcmFnICE9IG51bGwgPyBmcmFnIDogcHRyO1xuICAgIGhhc09iaiA9IG9iaiAhPT0gdm9pZCAwO1xuICAgIGhhc1B0ciA9IHB0ciAhPSBudWxsO1xuICAgIGhhc09wdCA9IG9wdCAhPSBudWxsO1xuICAgIGlmICh0eXBlb2YgcHRyID09PSAnc3RyaW5nJykge1xuICAgICAgcHRyID0gdGhpcy5wYXJzZShwdHIpO1xuICAgIH1cbiAgICBtZXJnZU9wdGlvbnMgPSBmdW5jdGlvbihvdmVycmlkZSkge1xuICAgICAgdmFyIG8sIHJlZiwgcmVmMSwgcmVmMiwgcmVmMywgcmVmNCwgcmVmNTtcbiAgICAgIGlmIChvdmVycmlkZSA9PSBudWxsKSB7XG4gICAgICAgIG92ZXJyaWRlID0ge307XG4gICAgICB9XG4gICAgICBvID0ge307XG4gICAgICBvLmhhc093blByb3AgPSAocmVmID0gb3ZlcnJpZGUuaGFzT3duUHJvcCkgIT0gbnVsbCA/IHJlZiA6IG9wdC5oYXNPd25Qcm9wO1xuICAgICAgby5nZXRQcm9wID0gKHJlZjEgPSBvdmVycmlkZS5nZXRQcm9wKSAhPSBudWxsID8gcmVmMSA6IG9wdC5nZXRQcm9wO1xuICAgICAgby5zZXRQcm9wID0gKHJlZjIgPSBvdmVycmlkZS5zZXRQcm9wKSAhPSBudWxsID8gcmVmMiA6IG9wdC5zZXRQcm9wO1xuICAgICAgby5nZXROb3RGb3VuZCA9IChyZWYzID0gb3ZlcnJpZGUuZ2V0Tm90Rm91bmQpICE9IG51bGwgPyByZWYzIDogb3B0LmdldE5vdEZvdW5kO1xuICAgICAgby5zZXROb3RGb3VuZCA9IChyZWY0ID0gb3ZlcnJpZGUuc2V0Tm90Rm91bmQpICE9IG51bGwgPyByZWY0IDogb3B0LnNldE5vdEZvdW5kO1xuICAgICAgby5kZWxOb3RGb3VuZCA9IChyZWY1ID0gb3ZlcnJpZGUuZGVsTm90Rm91bmQpICE9IG51bGwgPyByZWY1IDogb3B0LmRlbE5vdEZvdW5kO1xuICAgICAgcmV0dXJuIG87XG4gICAgfTtcbiAgICBhcGkgPSB2b2lkIDA7XG4gICAgaWYgKGhhc09iaiAmJiBoYXNQdHIgJiYgaGFzT3B0KSB7XG4gICAgICBhcGkgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gSnNvblBvaW50ZXIuc2V0KG9iaiwgcHRyLCB2YWx1ZSwgb3B0KTtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gSnNvblBvaW50ZXIuZ2V0KG9iaiwgcHRyLCBvcHQpO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGFwaS5zZXQgPSBmdW5jdGlvbih2YWx1ZSwgb3ZlcnJpZGUpIHtcbiAgICAgICAgcmV0dXJuIG9iaiA9IEpzb25Qb2ludGVyLnNldChvYmosIHB0ciwgdmFsdWUsIG1lcmdlT3B0aW9ucyhvdmVycmlkZSkpO1xuICAgICAgfTtcbiAgICAgIGFwaS5nZXQgPSBmdW5jdGlvbihvdmVycmlkZSkge1xuICAgICAgICByZXR1cm4gSnNvblBvaW50ZXIuZ2V0KG9iaiwgcHRyLCBtZXJnZU9wdGlvbnMob3ZlcnJpZGUpKTtcbiAgICAgIH07XG4gICAgICBhcGkuaGFzID0gZnVuY3Rpb24ob3ZlcnJpZGUpIHtcbiAgICAgICAgcmV0dXJuIEpzb25Qb2ludGVyLmhhcyhvYmosIHB0ciwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSk7XG4gICAgICB9O1xuICAgICAgYXBpLmRlbCA9IGZ1bmN0aW9uKG92ZXJyaWRlKSB7XG4gICAgICAgIHJldHVybiBvYmogPSBKc29uUG9pbnRlci5kZWwob2JqLCBwdHIsIG1lcmdlT3B0aW9ucyhvdmVycmlkZSkpO1xuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKGhhc09iaiAmJiBoYXNQdHIpIHtcbiAgICAgIGFwaSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJldHVybiBKc29uUG9pbnRlci5zZXQob2JqLCBwdHIsIHZhbHVlKTtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gSnNvblBvaW50ZXIuZ2V0KG9iaiwgcHRyKTtcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBhcGkuc2V0ID0gZnVuY3Rpb24odmFsdWUsIG92ZXJyaWRlKSB7XG4gICAgICAgIHJldHVybiBvYmogPSBKc29uUG9pbnRlci5zZXQob2JqLCBwdHIsIHZhbHVlLCBvdmVycmlkZSk7XG4gICAgICB9O1xuICAgICAgYXBpLmdldCA9IGZ1bmN0aW9uKG92ZXJyaWRlKSB7XG4gICAgICAgIHJldHVybiBKc29uUG9pbnRlci5nZXQob2JqLCBwdHIsIG92ZXJyaWRlKTtcbiAgICAgIH07XG4gICAgICBhcGkuaGFzID0gZnVuY3Rpb24ob3ZlcnJpZGUpIHtcbiAgICAgICAgcmV0dXJuIEpzb25Qb2ludGVyLmhhcyhvYmosIHB0ciwgb3ZlcnJpZGUpO1xuICAgICAgfTtcbiAgICAgIGFwaS5kZWwgPSBmdW5jdGlvbihvdmVycmlkZSkge1xuICAgICAgICByZXR1cm4gb2JqID0gSnNvblBvaW50ZXIuZGVsKG9iaiwgcHRyLCBvdmVycmlkZSk7XG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAoaGFzT2JqICYmIGhhc09wdCkge1xuICAgICAgYXBpID0gZnVuY3Rpb24ocHRyLCB2YWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZXR1cm4gSnNvblBvaW50ZXIuc2V0KG9iaiwgcHRyLCB2YWx1ZSwgb3B0KTtcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gSnNvblBvaW50ZXIuZ2V0KG9iaiwgcHRyLCBvcHQpO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGFwaS5zZXQgPSBmdW5jdGlvbihwdHIsIHZhbHVlLCBvdmVycmlkZSkge1xuICAgICAgICByZXR1cm4gb2JqID0gSnNvblBvaW50ZXIuc2V0KG9iaiwgcHRyLCB2YWx1ZSwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSk7XG4gICAgICB9O1xuICAgICAgYXBpLmdldCA9IGZ1bmN0aW9uKHB0ciwgb3ZlcnJpZGUpIHtcbiAgICAgICAgcmV0dXJuIEpzb25Qb2ludGVyLmdldChvYmosIHB0ciwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSk7XG4gICAgICB9O1xuICAgICAgYXBpLmhhcyA9IGZ1bmN0aW9uKHB0ciwgb3ZlcnJpZGUpIHtcbiAgICAgICAgcmV0dXJuIEpzb25Qb2ludGVyLmhhcyhvYmosIHB0ciwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSk7XG4gICAgICB9O1xuICAgICAgYXBpLmRlbCA9IGZ1bmN0aW9uKHB0ciwgb3ZlcnJpZGUpIHtcbiAgICAgICAgcmV0dXJuIG9iaiA9IEpzb25Qb2ludGVyLmRlbChvYmosIHB0ciwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSk7XG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAoaGFzUHRyICYmIGhhc09wdCkge1xuICAgICAgYXBpID0gZnVuY3Rpb24ob2JqLCB2YWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZXR1cm4gSnNvblBvaW50ZXIuc2V0KG9iaiwgcHRyLCB2YWx1ZSwgb3B0KTtcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gSnNvblBvaW50ZXIuZ2V0KG9iaiwgcHRyLCBvcHQpO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGFwaS5zZXQgPSBmdW5jdGlvbihvYmosIHZhbHVlLCBvdmVycmlkZSkge1xuICAgICAgICByZXR1cm4gSnNvblBvaW50ZXIuc2V0KG9iaiwgcHRyLCB2YWx1ZSwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSk7XG4gICAgICB9O1xuICAgICAgYXBpLmdldCA9IGZ1bmN0aW9uKG9iaiwgb3ZlcnJpZGUpIHtcbiAgICAgICAgcmV0dXJuIEpzb25Qb2ludGVyLmdldChvYmosIHB0ciwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSk7XG4gICAgICB9O1xuICAgICAgYXBpLmhhcyA9IGZ1bmN0aW9uKG9iaiwgb3ZlcnJpZGUpIHtcbiAgICAgICAgcmV0dXJuIEpzb25Qb2ludGVyLmhhcyhvYmosIHB0ciwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSk7XG4gICAgICB9O1xuICAgICAgYXBpLmRlbCA9IGZ1bmN0aW9uKG9iaiwgb3ZlcnJpZGUpIHtcbiAgICAgICAgcmV0dXJuIEpzb25Qb2ludGVyLmRlbChvYmosIHB0ciwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSk7XG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAoaGFzT3B0KSB7XG4gICAgICBhcGkgPSBmdW5jdGlvbihvYmosIHB0ciwgdmFsdWUpIHtcbiAgICAgICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmV0dXJuIEpzb25Qb2ludGVyLnNldChvYmosIHB0ciwgdmFsdWUsIG9wdCk7XG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIEpzb25Qb2ludGVyLmdldChvYmosIHB0ciwgb3B0KTtcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gYXBpLnNtYXJ0QmluZCh7XG4gICAgICAgICAgICAgIG9iamVjdDogb2JqXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBhcGkuc2V0ID0gZnVuY3Rpb24ob2JqLCBwdHIsIHZhbHVlLCBvdmVycmlkZSkge1xuICAgICAgICByZXR1cm4gSnNvblBvaW50ZXIuc2V0KG9iaiwgcHRyLCB2YWx1ZSwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSk7XG4gICAgICB9O1xuICAgICAgYXBpLmdldCA9IGZ1bmN0aW9uKG9iaiwgcHRyLCBvdmVycmlkZSkge1xuICAgICAgICByZXR1cm4gSnNvblBvaW50ZXIuZ2V0KG9iaiwgcHRyLCBtZXJnZU9wdGlvbnMob3ZlcnJpZGUpKTtcbiAgICAgIH07XG4gICAgICBhcGkuaGFzID0gZnVuY3Rpb24ob2JqLCBwdHIsIG92ZXJyaWRlKSB7XG4gICAgICAgIHJldHVybiBKc29uUG9pbnRlci5oYXMob2JqLCBwdHIsIG1lcmdlT3B0aW9ucyhvdmVycmlkZSkpO1xuICAgICAgfTtcbiAgICAgIGFwaS5kZWwgPSBmdW5jdGlvbihvYmosIHB0ciwgb3ZlcnJpZGUpIHtcbiAgICAgICAgcmV0dXJuIEpzb25Qb2ludGVyLmRlbChvYmosIHB0ciwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSk7XG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAoaGFzT2JqKSB7XG4gICAgICBhcGkgPSBmdW5jdGlvbihwdHIsIHZhbHVlKSB7XG4gICAgICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiBKc29uUG9pbnRlci5zZXQob2JqLCBwdHIsIHZhbHVlKTtcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gSnNvblBvaW50ZXIuZ2V0KG9iaiwgcHRyKTtcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBhcGkuc2V0ID0gZnVuY3Rpb24ocHRyLCB2YWx1ZSwgb3ZlcnJpZGUpIHtcbiAgICAgICAgcmV0dXJuIG9iaiA9IEpzb25Qb2ludGVyLnNldChvYmosIHB0ciwgdmFsdWUsIG92ZXJyaWRlKTtcbiAgICAgIH07XG4gICAgICBhcGkuZ2V0ID0gZnVuY3Rpb24ocHRyLCBvdmVycmlkZSkge1xuICAgICAgICByZXR1cm4gSnNvblBvaW50ZXIuZ2V0KG9iaiwgcHRyLCBvdmVycmlkZSk7XG4gICAgICB9O1xuICAgICAgYXBpLmhhcyA9IGZ1bmN0aW9uKHB0ciwgb3ZlcnJpZGUpIHtcbiAgICAgICAgcmV0dXJuIEpzb25Qb2ludGVyLmhhcyhvYmosIHB0ciwgb3ZlcnJpZGUpO1xuICAgICAgfTtcbiAgICAgIGFwaS5kZWwgPSBmdW5jdGlvbihwdHIsIG92ZXJyaWRlKSB7XG4gICAgICAgIHJldHVybiBvYmogPSBKc29uUG9pbnRlci5kZWwob2JqLCBwdHIsIG92ZXJyaWRlKTtcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmIChoYXNQdHIpIHtcbiAgICAgIGFwaSA9IGZ1bmN0aW9uKG9iaiwgdmFsdWUpIHtcbiAgICAgICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIEpzb25Qb2ludGVyLnNldChvYmosIHB0ciwgdmFsdWUpO1xuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJldHVybiBKc29uUG9pbnRlci5nZXQob2JqLCBwdHIpO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGFwaS5zZXQgPSBmdW5jdGlvbihvYmosIHZhbHVlLCBvdmVycmlkZSkge1xuICAgICAgICByZXR1cm4gSnNvblBvaW50ZXIuc2V0KG9iaiwgcHRyLCB2YWx1ZSwgb3ZlcnJpZGUpO1xuICAgICAgfTtcbiAgICAgIGFwaS5nZXQgPSBmdW5jdGlvbihvYmosIG92ZXJyaWRlKSB7XG4gICAgICAgIHJldHVybiBKc29uUG9pbnRlci5nZXQob2JqLCBwdHIsIG92ZXJyaWRlKTtcbiAgICAgIH07XG4gICAgICBhcGkuaGFzID0gZnVuY3Rpb24ob2JqLCBvdmVycmlkZSkge1xuICAgICAgICByZXR1cm4gSnNvblBvaW50ZXIuaGFzKG9iaiwgcHRyLCBvdmVycmlkZSk7XG4gICAgICB9O1xuICAgICAgYXBpLmRlbCA9IGZ1bmN0aW9uKG9iaiwgb3ZlcnJpZGUpIHtcbiAgICAgICAgcmV0dXJuIEpzb25Qb2ludGVyLmRlbChvYmosIHB0ciwgb3ZlcnJpZGUpO1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGFwaS5zbWFydEJpbmQgPSBmdW5jdGlvbihvdmVycmlkZSkge1xuICAgICAgdmFyIG87XG4gICAgICBvID0ge307XG4gICAgICBpZiAoe30uaGFzT3duUHJvcGVydHkuY2FsbChvdmVycmlkZSwgJ29iamVjdCcpKSB7XG4gICAgICAgIG8ub2JqZWN0ID0gb3ZlcnJpZGUub2JqZWN0O1xuICAgICAgfSBlbHNlIGlmIChoYXNPYmopIHtcbiAgICAgICAgby5vYmplY3QgPSBvYmo7XG4gICAgICB9XG4gICAgICBpZiAoe30uaGFzT3duUHJvcGVydHkuY2FsbChvdmVycmlkZSwgJ3BvaW50ZXInKSkge1xuICAgICAgICBvLnBvaW50ZXIgPSBvdmVycmlkZS5wb2ludGVyO1xuICAgICAgfSBlbHNlIGlmIChoYXNQdHIpIHtcbiAgICAgICAgby5wb2ludGVyID0gcHRyO1xuICAgICAgfVxuICAgICAgaWYgKHt9Lmhhc093blByb3BlcnR5LmNhbGwob3ZlcnJpZGUsICdvcHRpb25zJykpIHtcbiAgICAgICAgby5vcHRpb25zID0gbWVyZ2VPcHRpb25zKG92ZXJyaWRlLm9wdGlvbnMpO1xuICAgICAgfSBlbHNlIGlmIChoYXNPYmopIHtcbiAgICAgICAgby5vcHRpb25zID0gb3B0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIEpzb25Qb2ludGVyLnNtYXJ0QmluZChvKTtcbiAgICB9O1xuICAgIGlmIChoYXNQdHIpIHtcblxuICAgICAgLypcbiAgICAgICAqIGdldC9zZXQgYm91bmQgcG9pbnRlciB2YWx1ZVxuICAgICAgICpcbiAgICAgICAqIE9ubHkgYXZhaWxhYmxlIHdoZW4gcG9pbnRlciBoYXMgYmVlbiBib3VuZFxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAgICogQHJldHVybnMgc3RyaW5nW10gc2VnbWVudHNcbiAgICAgICAqL1xuICAgICAgYXBpLnBvaW50ZXIgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiBKc29uUG9pbnRlci5jb21waWxlUG9pbnRlcihwdHIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBwdHIgPSBKc29uUG9pbnRlci5wYXJzZVBvaW50ZXIodmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvKlxuICAgICAgICogZ2V0L3NldCBib3VuZCBwb2ludGVyIHZhbHVlIGFzIGZyYWdtZW50XG4gICAgICAgKlxuICAgICAgICogT25seSBhdmFpbGFibGUgd2hlbiBwb2ludGVyIGhhcyBiZWVuIGJvdW5kXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICAgKiBAcmV0dXJucyBzdHJpbmdbXSBzZWdtZW50c1xuICAgICAgICovXG4gICAgICBhcGkuZnJhZ21lbnQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiBKc29uUG9pbnRlci5jb21waWxlRnJhZ21lbnQocHRyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gcHRyID0gSnNvblBvaW50ZXIucGFyc2VGcmFnbWVudCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICAgIGlmIChoYXNPYmopIHtcblxuICAgICAgLypcbiAgICAgICAqIGdldC9zZXQgYm91bmQgb2JqZWN0XG4gICAgICAgKlxuICAgICAgICogT25seSBhdmFpbGFibGUgd2hlbiBvYmplY3QgaGFzIGJlZW4gYm91bmRcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAgICAgKiBAcmV0dXJucyB7Kn0gYm91bmQgb2JqZWN0XG4gICAgICAgKi9cbiAgICAgIGFwaS5vYmplY3QgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIG9iaiA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoaGFzT3B0KSB7XG5cbiAgICAgIC8qXG4gICAgICAgKiBnZXQvc2V0IGJvdW5kIG9wdGlvbnNcbiAgICAgICAqXG4gICAgICAgKiBPbmx5IGF2YWlsYWJsZSB3aGVuIG9wdGlvbnMgaGFzIGJlZW4gYm91bmRcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAgICAgKiBAcmV0dXJucyB7Kn0gYm91bmQgb3B0aW9uc1xuICAgICAgICovXG4gICAgICBhcGkub3B0aW9ucyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIG9wdDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gb3B0ID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICAgIGZvciAoa2V5IGluIEpzb25Qb2ludGVyKSB7XG4gICAgICBpZiAoIWhhc1Byb3AxLmNhbGwoSnNvblBvaW50ZXIsIGtleSkpIGNvbnRpbnVlO1xuICAgICAgdmFsID0gSnNvblBvaW50ZXJba2V5XTtcbiAgICAgIGlmICghe30uaGFzT3duUHJvcGVydHkuY2FsbChhcGksIGtleSkpIHtcbiAgICAgICAgYXBpW2tleV0gPSB2YWw7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhcGk7XG4gIH07XG5cblxuICAvKlxuICAgKiBFc2NhcGVzIHRoZSBnaXZlbiBwYXRoIHNlZ21lbnQgYXMgZGVzY3JpYmVkIGJ5IFJGQzY5MDEuXG4gICAqXG4gICAqIE5vdGFibHksIGAnfidgJ3MgYXJlIHJlcGxhY2VkIHdpdGggYCd+MCdgIGFuZCBgJy8nYCdzIGFyZSByZXBsYWNlZCB3aXRoIGAnfjEnYC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNlZ21lbnRcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG5cbiAgSnNvblBvaW50ZXIuZXNjYXBlID0gZnVuY3Rpb24oc2VnbWVudCkge1xuICAgIHJldHVybiBzZWdtZW50LnJlcGxhY2UoL34vZywgJ34wJykucmVwbGFjZSgvXFwvL2csICd+MScpO1xuICB9O1xuXG5cbiAgLypcbiAgICogRXNjYXBlcyB0aGUgZ2l2ZW4gcGF0aCBmcmFnbWVudCBzZWdtZW50IGFzIGRlc2NyaWJlZCBieSBSRkM2OTAxLlxuICAgKlxuICAgKiBOb3RhYmx5LCBgJ34nYCdzIGFyZSByZXBsYWNlZCB3aXRoIGAnfjAnYCBhbmQgYCcvJ2AncyBhcmUgcmVwbGFjZWQgd2l0aCBgJ34xJ2AgYW5kIGZpbmFsbHkgdGhlIHN0cmluZyBpcyBVUkkgZW5jb2RlZC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNlZ21lbnRcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG5cbiAgSnNvblBvaW50ZXIuZXNjYXBlRnJhZ21lbnQgPSBmdW5jdGlvbihzZWdtZW50KSB7XG4gICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChKc29uUG9pbnRlci5lc2NhcGUoc2VnbWVudCkpO1xuICB9O1xuXG5cbiAgLypcbiAgICogVW4tRXNjYXBlcyB0aGUgZ2l2ZW4gcGF0aCBzZWdtZW50LCByZXZlcnNpbmcgdGhlIGFjdGlvbnMgb2YgYC5lc2NhcGVgLlxuICAgKlxuICAgKiBOb3RhYmx5LCBgJ34xJ2AncyBhcmUgcmVwbGFjZWQgd2l0aCBgJy8nYCBhbmQgYCd+MCdgJ3MgYXJlIHJlcGxhY2VkIHdpdGggYCd+J2AuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzZWdtZW50XG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuXG4gIEpzb25Qb2ludGVyLnVuZXNjYXBlID0gZnVuY3Rpb24oc2VnbWVudCkge1xuICAgIHJldHVybiBzZWdtZW50LnJlcGxhY2UoL34xL2csICcvJykucmVwbGFjZSgvfjAvZywgJ34nKTtcbiAgfTtcblxuXG4gIC8qXG4gICAqIFVuLUVzY2FwZXMgdGhlIGdpdmVuIHBhdGggZnJhZ21lbnQgc2VnbWVudCwgcmV2ZXJzaW5nIHRoZSBhY3Rpb25zIG9mIGAuZXNjYXBlRnJhZ21lbnRgLlxuICAgKlxuICAgKiBOb3RhYmx5LCB0aGUgc3RyaW5nIGlzIFVSSSBkZWNvZGVkIGFuZCB0aGVuIGAnfjEnYCdzIGFyZSByZXBsYWNlZCB3aXRoIGAnLydgIGFuZCBgJ34wJ2AncyBhcmUgcmVwbGFjZWQgd2l0aCBgJ34nYC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNlZ21lbnRcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG5cbiAgSnNvblBvaW50ZXIudW5lc2NhcGVGcmFnbWVudCA9IGZ1bmN0aW9uKHNlZ21lbnQpIHtcbiAgICByZXR1cm4gSnNvblBvaW50ZXIudW5lc2NhcGUoZGVjb2RlVVJJQ29tcG9uZW50KHNlZ21lbnQpKTtcbiAgfTtcblxuXG4gIC8qXG4gICAqIFJldHVybnMgdHJ1ZSBpZmYgYHN0cmAgaXMgYSB2YWxpZCBqc29uIHBvaW50ZXIgdmFsdWVcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0clxuICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAgICovXG5cbiAgSnNvblBvaW50ZXIuaXNQb2ludGVyID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgc3dpdGNoIChzdHIuY2hhckF0KDApKSB7XG4gICAgICBjYXNlICcnOlxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIGNhc2UgJy8nOlxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG5cblxuICAvKlxuICAgKiBSZXR1cm5zIHRydWUgaWZmIGBzdHJgIGlzIGEgdmFsaWQganNvbiBmcmFnbWVudCBwb2ludGVyIHZhbHVlXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcbiAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAqL1xuXG4gIEpzb25Qb2ludGVyLmlzRnJhZ21lbnQgPSBmdW5jdGlvbihzdHIpIHtcbiAgICBzd2l0Y2ggKHN0ci5zdWJzdHJpbmcoMCwgMikpIHtcbiAgICAgIGNhc2UgJyMnOlxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIGNhc2UgJyMvJzpcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuXG5cbiAgLypcbiAgICogUGFyc2VzIGEganNvbi1wb2ludGVyIG9yIGpzb24gZnJhZ21lbnQgcG9pbnRlciwgYXMgZGVzY3JpYmVkIGJ5IFJGQzkwMSwgaW50byBhbiBhcnJheSBvZiBwYXRoIHNlZ21lbnRzLlxuICAgKlxuICAgKiBAdGhyb3dzIHtKc29uUG9pbnRlckVycm9yfSBmb3IgaW52YWxpZCBqc29uLXBvaW50ZXJzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RyXG4gICAqIEByZXR1cm5zIHtzdHJpbmdbXX1cbiAgICovXG5cbiAgSnNvblBvaW50ZXIucGFyc2UgPSBmdW5jdGlvbihzdHIpIHtcbiAgICBzd2l0Y2ggKHN0ci5jaGFyQXQoMCkpIHtcbiAgICAgIGNhc2UgJyc6XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIGNhc2UgJy8nOlxuICAgICAgICByZXR1cm4gc3RyLnN1YnN0cmluZygxKS5zcGxpdCgnLycpLm1hcChKc29uUG9pbnRlci51bmVzY2FwZSk7XG4gICAgICBjYXNlICcjJzpcbiAgICAgICAgc3dpdGNoIChzdHIuY2hhckF0KDEpKSB7XG4gICAgICAgICAgY2FzZSAnJzpcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICBjYXNlICcvJzpcbiAgICAgICAgICAgIHJldHVybiBzdHIuc3Vic3RyaW5nKDIpLnNwbGl0KCcvJykubWFwKEpzb25Qb2ludGVyLnVuZXNjYXBlRnJhZ21lbnQpO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgSnNvblBvaW50ZXJFcnJvcihcIkludmFsaWQgSlNPTiBmcmFnbWVudCBwb2ludGVyOiBcIiArIHN0cik7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgSnNvblBvaW50ZXJFcnJvcihcIkludmFsaWQgSlNPTiBwb2ludGVyOiBcIiArIHN0cik7XG4gICAgfVxuICB9O1xuXG5cbiAgLypcbiAgICogUGFyc2VzIGEganNvbi1wb2ludGVyLCBhcyBkZXNjcmliZWQgYnkgUkZDOTAxLCBpbnRvIGFuIGFycmF5IG9mIHBhdGggc2VnbWVudHMuXG4gICAqXG4gICAqIEB0aHJvd3Mge0pzb25Qb2ludGVyRXJyb3J9IGZvciBpbnZhbGlkIGpzb24tcG9pbnRlcnMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcbiAgICogQHJldHVybnMge3N0cmluZ1tdfVxuICAgKi9cblxuICBKc29uUG9pbnRlci5wYXJzZVBvaW50ZXIgPSBmdW5jdGlvbihzdHIpIHtcbiAgICBzd2l0Y2ggKHN0ci5jaGFyQXQoMCkpIHtcbiAgICAgIGNhc2UgJyc6XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIGNhc2UgJy8nOlxuICAgICAgICByZXR1cm4gc3RyLnN1YnN0cmluZygxKS5zcGxpdCgnLycpLm1hcChKc29uUG9pbnRlci51bmVzY2FwZSk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgSnNvblBvaW50ZXJFcnJvcihcIkludmFsaWQgSlNPTiBwb2ludGVyOiBcIiArIHN0cik7XG4gICAgfVxuICB9O1xuXG5cbiAgLypcbiAgICogUGFyc2VzIGEganNvbiBmcmFnbWVudCBwb2ludGVyLCBhcyBkZXNjcmliZWQgYnkgUkZDOTAxLCBpbnRvIGFuIGFycmF5IG9mIHBhdGggc2VnbWVudHMuXG4gICAqXG4gICAqIEB0aHJvd3Mge0pzb25Qb2ludGVyRXJyb3J9IGZvciBpbnZhbGlkIGpzb24tcG9pbnRlcnMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcbiAgICogQHJldHVybnMge3N0cmluZ1tdfVxuICAgKi9cblxuICBKc29uUG9pbnRlci5wYXJzZUZyYWdtZW50ID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgc3dpdGNoIChzdHIuc3Vic3RyaW5nKDAsIDIpKSB7XG4gICAgICBjYXNlICcjJzpcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgY2FzZSAnIy8nOlxuICAgICAgICByZXR1cm4gc3RyLnN1YnN0cmluZygyKS5zcGxpdCgnLycpLm1hcChKc29uUG9pbnRlci51bmVzY2FwZUZyYWdtZW50KTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBKc29uUG9pbnRlckVycm9yKFwiSW52YWxpZCBKU09OIGZyYWdtZW50IHBvaW50ZXI6IFwiICsgc3RyKTtcbiAgICB9XG4gIH07XG5cblxuICAvKlxuICAgKiBDb252ZXJ0cyBhbiBhcnJheSBvZiBwYXRoIHNlZ21lbnRzIGludG8gYSBqc29uIHBvaW50ZXIuXG4gICAqIFRoaXMgbWV0aG9kIGlzIHRoZSByZXZlcnNlIG9mIGAucGFyc2VQb2ludGVyYC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gc2VnbWVudHNcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG5cbiAgSnNvblBvaW50ZXIuY29tcGlsZSA9IGZ1bmN0aW9uKHNlZ21lbnRzKSB7XG4gICAgcmV0dXJuIHNlZ21lbnRzLm1hcChmdW5jdGlvbihzZWdtZW50KSB7XG4gICAgICByZXR1cm4gJy8nICsgSnNvblBvaW50ZXIuZXNjYXBlKHNlZ21lbnQpO1xuICAgIH0pLmpvaW4oJycpO1xuICB9O1xuXG5cbiAgLypcbiAgICogQ29udmVydHMgYW4gYXJyYXkgb2YgcGF0aCBzZWdtZW50cyBpbnRvIGEganNvbiBwb2ludGVyLlxuICAgKiBUaGlzIG1ldGhvZCBpcyB0aGUgcmV2ZXJzZSBvZiBgLnBhcnNlUG9pbnRlcmAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHNlZ21lbnRzXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuXG4gIEpzb25Qb2ludGVyLmNvbXBpbGVQb2ludGVyID0gZnVuY3Rpb24oc2VnbWVudHMpIHtcbiAgICByZXR1cm4gc2VnbWVudHMubWFwKGZ1bmN0aW9uKHNlZ21lbnQpIHtcbiAgICAgIHJldHVybiAnLycgKyBKc29uUG9pbnRlci5lc2NhcGUoc2VnbWVudCk7XG4gICAgfSkuam9pbignJyk7XG4gIH07XG5cblxuICAvKlxuICAgKiBDb252ZXJ0cyBhbiBhcnJheSBvZiBwYXRoIHNlZ21lbnRzIGludG8gYSBqc29uIGZyYWdtZW50IHBvaW50ZXIuXG4gICAqIFRoaXMgbWV0aG9kIGlzIHRoZSByZXZlcnNlIG9mIGAucGFyc2VGcmFnbWVudGAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHNlZ21lbnRzXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuXG4gIEpzb25Qb2ludGVyLmNvbXBpbGVGcmFnbWVudCA9IGZ1bmN0aW9uKHNlZ21lbnRzKSB7XG4gICAgcmV0dXJuICcjJyArIHNlZ21lbnRzLm1hcChmdW5jdGlvbihzZWdtZW50KSB7XG4gICAgICByZXR1cm4gJy8nICsgSnNvblBvaW50ZXIuZXNjYXBlRnJhZ21lbnQoc2VnbWVudCk7XG4gICAgfSkuam9pbignJyk7XG4gIH07XG5cblxuICAvKlxuICAgKiBDYWxsYmFjayB1c2VkIHRvIGRldGVybWluZSBpZiBhbiBvYmplY3QgY29udGFpbnMgYSBnaXZlbiBwcm9wZXJ0eS5cbiAgICpcbiAgICogQGNhbGxiYWNrIGhhc1Byb3BcbiAgICogQHBhcmFtIHsqfSBvYmpcbiAgICogQHBhcmFtIHtzdHJpbmd8aW50ZWdlcn0ga2V5XG4gICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgKi9cblxuXG4gIC8qXG4gICAqIFJldHVybnMgdHJ1ZSBpZmYgYG9iamAgY29udGFpbnMgYGtleWAgYW5kIGBvYmpgIGlzIGVpdGhlciBhbiBBcnJheSBvciBhbiBPYmplY3QuXG4gICAqIElnbm9yZXMgdGhlIHByb3RvdHlwZSBjaGFpbi5cbiAgICpcbiAgICogRGVmYXVsdCB2YWx1ZSBmb3IgYG9wdGlvbnMuaGFzUHJvcGAuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gb2JqXG4gICAqIEBwYXJhbSB7c3RyaW5nfGludGVnZXJ9IGtleVxuICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAgICovXG5cbiAgSnNvblBvaW50ZXIuaGFzSnNvblByb3AgPSBmdW5jdGlvbihvYmosIGtleSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICAgIHJldHVybiAodHlwZW9mIGtleSA9PT0gJ251bWJlcicpICYmIChrZXkgPCBvYmoubGVuZ3RoKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBvYmogPT09ICdvYmplY3QnKSB7XG4gICAgICByZXR1cm4ge30uaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG5cblxuICAvKlxuICAgKiBSZXR1cm5zIHRydWUgaWZmIGBvYmpgIGNvbnRhaW5zIGBrZXlgLCBkaXNyZWdhcmRpbmcgdGhlIHByb3RvdHlwZSBjaGFpbi5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBvYmpcbiAgICogQHBhcmFtIHtzdHJpbmd8aW50ZWdlcn0ga2V5XG4gICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgKi9cblxuICBKc29uUG9pbnRlci5oYXNPd25Qcm9wID0gZnVuY3Rpb24ob2JqLCBrZXkpIHtcbiAgICByZXR1cm4ge30uaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG4gIH07XG5cblxuICAvKlxuICAgKiBSZXR1cm5zIHRydWUgaWZmIGBvYmpgIGNvbnRhaW5zIGBrZXlgLCBpbmNsdWRpbmcgdmlhIHRoZSBwcm90b3R5cGUgY2hhaW4uXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gb2JqXG4gICAqIEBwYXJhbSB7c3RyaW5nfGludGVnZXJ9IGtleVxuICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAgICovXG5cbiAgSnNvblBvaW50ZXIuaGFzUHJvcCA9IGZ1bmN0aW9uKG9iaiwga2V5KSB7XG4gICAgcmV0dXJuIGtleSBpbiBvYmo7XG4gIH07XG5cblxuICAvKlxuICAgKiBDYWxsYmFjayB1c2VkIHRvIHJldHJpZXZlIGEgcHJvcGVydHkgZnJvbSBhbiBvYmplY3RcbiAgICpcbiAgICogQGNhbGxiYWNrIGdldFByb3BcbiAgICogQHBhcmFtIHsqfSBvYmpcbiAgICogQHBhcmFtIHtzdHJpbmd8aW50ZWdlcn0ga2V5XG4gICAqIEByZXR1cm5zIHsqfVxuICAgKi9cblxuXG4gIC8qXG4gICAqIEZpbmRzIHRoZSBnaXZlbiBga2V5YCBpbiBgb2JqYC5cbiAgICpcbiAgICogRGVmYXVsdCB2YWx1ZSBmb3IgYG9wdGlvbnMuZ2V0UHJvcGAuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gb2JqXG4gICAqIEBwYXJhbSB7c3RyaW5nfGludGVnZXJ9IGtleVxuICAgKiBAcmV0dXJucyB7Kn1cbiAgICovXG5cbiAgSnNvblBvaW50ZXIuZ2V0UHJvcCA9IGZ1bmN0aW9uKG9iaiwga2V5KSB7XG4gICAgcmV0dXJuIG9ialtrZXldO1xuICB9O1xuXG5cbiAgLypcbiAgICogQ2FsbGJhY2sgdXNlZCB0byBzZXQgYSBwcm9wZXJ0eSBvbiBhbiBvYmplY3QuXG4gICAqXG4gICAqIEBjYWxsYmFjayBzZXRQcm9wXG4gICAqIEBwYXJhbSB7Kn0gb2JqXG4gICAqIEBwYXJhbSB7c3RyaW5nfGludGVnZXJ9IGtleVxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEByZXR1cm5zIHsqfVxuICAgKi9cblxuXG4gIC8qXG4gICAqIFNldHMgdGhlIGdpdmVuIGBrZXlgIGluIGBvYmpgIHRvIGB2YWx1ZWAuXG4gICAqXG4gICAqIERlZmF1bHQgdmFsdWUgZm9yIGBvcHRpb25zLnNldFByb3BgLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IG9ialxuICAgKiBAcGFyYW0ge3N0cmluZ3xpbnRlZ2VyfSBrZXlcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcmV0dXJucyB7Kn0gYHZhbHVlYFxuICAgKi9cblxuICBKc29uUG9pbnRlci5zZXRQcm9wID0gZnVuY3Rpb24ob2JqLCBrZXksIHZhbHVlKSB7XG4gICAgcmV0dXJuIG9ialtrZXldID0gdmFsdWU7XG4gIH07XG5cblxuICAvKlxuICAgKiBDYWxsYmFjayB1c2VkIHRvIG1vZGlmeSBiZWhhdmlvdXIgd2hlbiBhIGdpdmVuIHBhdGggc2VnbWVudCBjYW5ub3QgYmUgZm91bmQuXG4gICAqXG4gICAqIEBjYWxsYmFjayBub3RGb3VuZFxuICAgKiBAcGFyYW0geyp9IG9ialxuICAgKiBAcGFyYW0ge3N0cmluZ3xpbnRlZ2VyfSBrZXlcbiAgICogQHJldHVybnMgeyp9XG4gICAqL1xuXG5cbiAgLypcbiAgICogUmV0dXJucyB0aGUgdmFsdWUgdG8gdXNlIHdoZW4gYC5nZXRgIGZhaWxzIHRvIGxvY2F0ZSBhIHBvaW50ZXIgc2VnbWVudC5cbiAgICpcbiAgICogRGVmYXVsdCB2YWx1ZSBmb3IgYG9wdGlvbnMuZ2V0Tm90Rm91bmRgLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IG9ialxuICAgKiBAcGFyYW0ge3N0cmluZ3xpbnRlZ2VyfSBzZWdtZW50XG4gICAqIEBwYXJhbSB7Kn0gcm9vdFxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBzZWdtZW50c1xuICAgKiBAcGFyYW0ge2ludGVnZXJ9IGlTZWdtZW50XG4gICAqIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gICAqL1xuXG4gIEpzb25Qb2ludGVyLmdldE5vdEZvdW5kID0gZnVuY3Rpb24ob2JqLCBzZWdtZW50LCByb290LCBzZWdtZW50cywgaVNlZ21lbnQpIHtcbiAgICByZXR1cm4gdm9pZCAwO1xuICB9O1xuXG5cbiAgLypcbiAgICogUmV0dXJucyB0aGUgdmFsdWUgdG8gdXNlIHdoZW4gYC5zZXRgIGZhaWxzIHRvIGxvY2F0ZSBhIHBvaW50ZXIgc2VnbWVudC5cbiAgICpcbiAgICogRGVmYXVsdCB2YWx1ZSBmb3IgYG9wdGlvbnMuc2V0Tm90Rm91bmRgLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IG9ialxuICAgKiBAcGFyYW0ge3N0cmluZ3xpbnRlZ2VyfSBzZWdtZW50XG4gICAqIEBwYXJhbSB7Kn0gcm9vdFxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBzZWdtZW50c1xuICAgKiBAcGFyYW0ge2ludGVnZXJ9IGlTZWdtZW50XG4gICAqIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gICAqL1xuXG4gIEpzb25Qb2ludGVyLnNldE5vdEZvdW5kID0gZnVuY3Rpb24ob2JqLCBzZWdtZW50LCByb290LCBzZWdtZW50cywgaVNlZ21lbnQpIHtcbiAgICBpZiAoc2VnbWVudHNbaVNlZ21lbnQgKyAxXS5tYXRjaCgvXig/OjB8WzEtOV1cXGQqfC0pJC8pKSB7XG4gICAgICByZXR1cm4gb2JqW3NlZ21lbnRdID0gW107XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBvYmpbc2VnbWVudF0gPSB7fTtcbiAgICB9XG4gIH07XG5cblxuICAvKlxuICAgKiBQZXJmb3JtcyBhbiBhY3Rpb24gd2hlbiBgLmRlbGAgZmFpbHMgdG8gbG9jYXRlIGEgcG9pbnRlciBzZWdtZW50LlxuICAgKlxuICAgKiBEZWZhdWx0IHZhbHVlIGZvciBgb3B0aW9ucy5kZWxOb3RGb3VuZGAuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gb2JqXG4gICAqIEBwYXJhbSB7c3RyaW5nfGludGVnZXJ9IHNlZ21lbnRcbiAgICogQHBhcmFtIHsqfSByb290XG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHNlZ21lbnRzXG4gICAqIEBwYXJhbSB7aW50ZWdlcn0gaVNlZ21lbnRcbiAgICogQHJldHVybnMge3VuZGVmaW5lZH1cbiAgICovXG5cbiAgSnNvblBvaW50ZXIuZGVsTm90Rm91bmQgPSBmdW5jdGlvbihvYmosIHNlZ21lbnQsIHJvb3QsIHNlZ21lbnRzLCBpU2VnbWVudCkge1xuICAgIHJldHVybiB2b2lkIDA7XG4gIH07XG5cblxuICAvKlxuICAgKiBSYWlzZXMgYSBKc29uUG9pbnRlckVycm9yIHdoZW4gdGhlIGdpdmVuIHBvaW50ZXIgc2VnbWVudCBpcyBub3QgZm91bmQuXG4gICAqXG4gICAqIE1heSBiZSB1c2VkIGluIHBsYWNlIG9mIHRoZSBhYm92ZSBtZXRob2RzIHZpYSB0aGUgYG9wdGlvbnNgIGFyZ3VtZW50IG9mIGAuLy5nZXQvLnNldC8uaGFzLy5kZWwvLnNpbXBsZUJpbmRgLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IG9ialxuICAgKiBAcGFyYW0ge3N0cmluZ3xpbnRlZ2VyfSBzZWdtZW50XG4gICAqIEBwYXJhbSB7Kn0gcm9vdFxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBzZWdtZW50c1xuICAgKiBAcGFyYW0ge2ludGVnZXJ9IGlTZWdtZW50XG4gICAqIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gICAqL1xuXG4gIEpzb25Qb2ludGVyLmVycm9yTm90Rm91bmQgPSBmdW5jdGlvbihvYmosIHNlZ21lbnQsIHJvb3QsIHNlZ21lbnRzLCBpU2VnbWVudCkge1xuICAgIHRocm93IG5ldyBKc29uUG9pbnRlckVycm9yKFwiVW5hYmxlIHRvIGZpbmQganNvbiBwYXRoOiBcIiArIChKc29uUG9pbnRlci5jb21waWxlKHNlZ21lbnRzLnNsaWNlKDAsIGlTZWdtZW50ICsgMSkpKSk7XG4gIH07XG5cblxuICAvKlxuICAgKiBTZXRzIHRoZSBsb2NhdGlvbiBpbiBgb2JqZWN0YCwgc3BlY2lmaWVkIGJ5IGBwb2ludGVyYCwgdG8gYHZhbHVlYC5cbiAgICogSWYgYHBvaW50ZXJgIHJlZmVycyB0byB0aGUgd2hvbGUgZG9jdW1lbnQsIGB2YWx1ZWAgaXMgcmV0dXJuZWQgd2l0aG91dCBtb2RpZnlpbmcgYG9iamVjdGAsXG4gICAqIG90aGVyd2lzZSwgYG9iamVjdGAgbW9kaWZpZWQgYW5kIHJldHVybmVkLlxuICAgKlxuICAgKiBCeSBkZWZhdWx0LCBpZiBhbnkgbG9jYXRpb24gc3BlY2lmaWVkIGJ5IGBwb2ludGVyYCBkb2VzIG5vdCBleGlzdCwgdGhlIGxvY2F0aW9uIGlzIGNyZWF0ZWQgdXNpbmcgb2JqZWN0cyBhbmQgYXJyYXlzLlxuICAgKiBBcnJheXMgYXJlIHVzZWQgb25seSB3aGVuIHRoZSBpbW1lZGlhdGVseSBmb2xsb3dpbmcgcGF0aCBzZWdtZW50IGlzIGFuIGFycmF5IGVsZW1lbnQgYXMgZGVmaW5lZCBieSB0aGUgc3RhbmRhcmQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gb2JqXG4gICAqIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBwb2ludGVyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAqIEBwYXJhbSB7aGFzUHJvcH0gb3B0aW9ucy5oYXNQcm9wXG4gICAqIEBwYXJhbSB7Z2V0UHJvcH0gb3B0aW9ucy5nZXRQcm9wXG4gICAqIEBwYXJhbSB7c2V0UHJvcH0gb3B0aW9ucy5zZXRQcm9wXG4gICAqIEBwYXJhbSB7bm90Rm91bmR9IG9wdGlvbnMuZ2V0Tm90Rm91bmRcbiAgICogQHJldHVybnMgeyp9XG4gICAqL1xuXG4gIEpzb25Qb2ludGVyLnNldCA9IGZ1bmN0aW9uKG9iaiwgcG9pbnRlciwgdmFsdWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgZ2V0UHJvcCwgaGFzUHJvcCwgaVNlZ21lbnQsIGxlbiwgcmVmLCByZWYxLCByZWYyLCByZWYzLCByb290LCBzZWdtZW50LCBzZXROb3RGb3VuZCwgc2V0UHJvcDtcbiAgICBpZiAodHlwZW9mIHBvaW50ZXIgPT09ICdzdHJpbmcnKSB7XG4gICAgICBwb2ludGVyID0gSnNvblBvaW50ZXIucGFyc2UocG9pbnRlcik7XG4gICAgfVxuICAgIGlmIChwb2ludGVyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBoYXNQcm9wID0gKHJlZiA9IG9wdGlvbnMgIT0gbnVsbCA/IG9wdGlvbnMuaGFzUHJvcCA6IHZvaWQgMCkgIT0gbnVsbCA/IHJlZiA6IEpzb25Qb2ludGVyLmhhc0pzb25Qcm9wO1xuICAgIGdldFByb3AgPSAocmVmMSA9IG9wdGlvbnMgIT0gbnVsbCA/IG9wdGlvbnMuZ2V0UHJvcCA6IHZvaWQgMCkgIT0gbnVsbCA/IHJlZjEgOiBKc29uUG9pbnRlci5nZXRQcm9wO1xuICAgIHNldFByb3AgPSAocmVmMiA9IG9wdGlvbnMgIT0gbnVsbCA/IG9wdGlvbnMuc2V0UHJvcCA6IHZvaWQgMCkgIT0gbnVsbCA/IHJlZjIgOiBKc29uUG9pbnRlci5zZXRQcm9wO1xuICAgIHNldE5vdEZvdW5kID0gKHJlZjMgPSBvcHRpb25zICE9IG51bGwgPyBvcHRpb25zLnNldE5vdEZvdW5kIDogdm9pZCAwKSAhPSBudWxsID8gcmVmMyA6IEpzb25Qb2ludGVyLnNldE5vdEZvdW5kO1xuICAgIHJvb3QgPSBvYmo7XG4gICAgaVNlZ21lbnQgPSAwO1xuICAgIGxlbiA9IHBvaW50ZXIubGVuZ3RoO1xuICAgIHdoaWxlIChpU2VnbWVudCAhPT0gbGVuKSB7XG4gICAgICBzZWdtZW50ID0gcG9pbnRlcltpU2VnbWVudF07XG4gICAgICArK2lTZWdtZW50O1xuICAgICAgaWYgKHNlZ21lbnQgPT09ICctJyAmJiBBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICAgICAgc2VnbWVudCA9IG9iai5sZW5ndGg7XG4gICAgICB9IGVsc2UgaWYgKHNlZ21lbnQubWF0Y2goL14oPzowfFsxLTldXFxkKikkLykgJiYgQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgICAgIHNlZ21lbnQgPSBwYXJzZUludChzZWdtZW50LCAxMCk7XG4gICAgICB9XG4gICAgICBpZiAoaVNlZ21lbnQgPT09IGxlbikge1xuICAgICAgICBzZXRQcm9wKG9iaiwgc2VnbWVudCwgdmFsdWUpO1xuICAgICAgICBicmVhaztcbiAgICAgIH0gZWxzZSBpZiAoIWhhc1Byb3Aob2JqLCBzZWdtZW50KSkge1xuICAgICAgICBvYmogPSBzZXROb3RGb3VuZChvYmosIHNlZ21lbnQsIHJvb3QsIHBvaW50ZXIsIGlTZWdtZW50IC0gMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvYmogPSBnZXRQcm9wKG9iaiwgc2VnbWVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByb290O1xuICB9O1xuXG5cbiAgLypcbiAgICogRmluZHMgdGhlIHZhbHVlIGluIGBvYmpgIGFzIHNwZWNpZmllZCBieSBgcG9pbnRlcmBcbiAgICpcbiAgICogQnkgZGVmYXVsdCwgcmV0dXJucyB1bmRlZmluZWQgZm9yIHZhbHVlcyB3aGljaCBjYW5ub3QgYmUgZm91bmRcbiAgICpcbiAgICogQHBhcmFtIHsqfSBvYmpcbiAgICogQHBhcmFtIHtzdHJpbmd8c3RyaW5nW119IHBvaW50ZXJcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICogQHBhcmFtIHtoYXNQcm9wfSBvcHRpb25zLmhhc1Byb3BcbiAgICogQHBhcmFtIHtnZXRQcm9wfSBvcHRpb25zLmdldFByb3BcbiAgICogQHBhcmFtIHtub3RGb3VuZH0gb3B0aW9ucy5nZXROb3RGb3VuZFxuICAgKiBAcmV0dXJucyB7Kn1cbiAgICovXG5cbiAgSnNvblBvaW50ZXIuZ2V0ID0gZnVuY3Rpb24ob2JqLCBwb2ludGVyLCBvcHRpb25zKSB7XG4gICAgdmFyIGdldE5vdEZvdW5kLCBnZXRQcm9wLCBoYXNQcm9wLCBpU2VnbWVudCwgbGVuLCByZWYsIHJlZjEsIHJlZjIsIHJvb3QsIHNlZ21lbnQ7XG4gICAgaWYgKHR5cGVvZiBwb2ludGVyID09PSAnc3RyaW5nJykge1xuICAgICAgcG9pbnRlciA9IEpzb25Qb2ludGVyLnBhcnNlKHBvaW50ZXIpO1xuICAgIH1cbiAgICBoYXNQcm9wID0gKHJlZiA9IG9wdGlvbnMgIT0gbnVsbCA/IG9wdGlvbnMuaGFzUHJvcCA6IHZvaWQgMCkgIT0gbnVsbCA/IHJlZiA6IEpzb25Qb2ludGVyLmhhc0pzb25Qcm9wO1xuICAgIGdldFByb3AgPSAocmVmMSA9IG9wdGlvbnMgIT0gbnVsbCA/IG9wdGlvbnMuZ2V0UHJvcCA6IHZvaWQgMCkgIT0gbnVsbCA/IHJlZjEgOiBKc29uUG9pbnRlci5nZXRQcm9wO1xuICAgIGdldE5vdEZvdW5kID0gKHJlZjIgPSBvcHRpb25zICE9IG51bGwgPyBvcHRpb25zLmdldE5vdEZvdW5kIDogdm9pZCAwKSAhPSBudWxsID8gcmVmMiA6IEpzb25Qb2ludGVyLmdldE5vdEZvdW5kO1xuICAgIHJvb3QgPSBvYmo7XG4gICAgaVNlZ21lbnQgPSAwO1xuICAgIGxlbiA9IHBvaW50ZXIubGVuZ3RoO1xuICAgIHdoaWxlIChpU2VnbWVudCAhPT0gbGVuKSB7XG4gICAgICBzZWdtZW50ID0gcG9pbnRlcltpU2VnbWVudF07XG4gICAgICArK2lTZWdtZW50O1xuICAgICAgaWYgKHNlZ21lbnQgPT09ICctJyAmJiBBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICAgICAgc2VnbWVudCA9IG9iai5sZW5ndGg7XG4gICAgICB9IGVsc2UgaWYgKHNlZ21lbnQubWF0Y2goL14oPzowfFsxLTldXFxkKikkLykgJiYgQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgICAgIHNlZ21lbnQgPSBwYXJzZUludChzZWdtZW50LCAxMCk7XG4gICAgICB9XG4gICAgICBpZiAoIWhhc1Byb3Aob2JqLCBzZWdtZW50KSkge1xuICAgICAgICByZXR1cm4gZ2V0Tm90Rm91bmQob2JqLCBzZWdtZW50LCByb290LCBwb2ludGVyLCBpU2VnbWVudCAtIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb2JqID0gZ2V0UHJvcChvYmosIHNlZ21lbnQpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2JqO1xuICB9O1xuXG5cbiAgLypcbiAgICogUmVtb3ZlcyB0aGUgbG9jYXRpb24sIHNwZWNpZmllZCBieSBgcG9pbnRlcmAsIGZyb20gYG9iamVjdGAuXG4gICAqIFJldHVybnMgdGhlIG1vZGlmaWVkIGBvYmplY3RgLCBvciB1bmRlZmluZWQgaWYgdGhlIGBwb2ludGVyYCBpcyBlbXB0eS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBvYmpcbiAgICogQHBhcmFtIHtzdHJpbmd8c3RyaW5nW119IHBvaW50ZXJcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICogQHBhcmFtIHtoYXNQcm9wfSBvcHRpb25zLmhhc1Byb3BcbiAgICogQHBhcmFtIHtnZXRQcm9wfSBvcHRpb25zLmdldFByb3BcbiAgICogQHBhcmFtIHtub3RGb3VuZH0gb3B0aW9ucy5kZWxOb3RGb3VuZFxuICAgKiBAcmV0dXJucyB7Kn1cbiAgICovXG5cbiAgSnNvblBvaW50ZXIuZGVsID0gZnVuY3Rpb24ob2JqLCBwb2ludGVyLCBvcHRpb25zKSB7XG4gICAgdmFyIGRlbE5vdEZvdW5kLCBnZXRQcm9wLCBoYXNQcm9wLCBpU2VnbWVudCwgbGVuLCByZWYsIHJlZjEsIHJlZjIsIHJvb3QsIHNlZ21lbnQ7XG4gICAgaWYgKHR5cGVvZiBwb2ludGVyID09PSAnc3RyaW5nJykge1xuICAgICAgcG9pbnRlciA9IEpzb25Qb2ludGVyLnBhcnNlKHBvaW50ZXIpO1xuICAgIH1cbiAgICBpZiAocG9pbnRlci5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgfVxuICAgIGhhc1Byb3AgPSAocmVmID0gb3B0aW9ucyAhPSBudWxsID8gb3B0aW9ucy5oYXNQcm9wIDogdm9pZCAwKSAhPSBudWxsID8gcmVmIDogSnNvblBvaW50ZXIuaGFzSnNvblByb3A7XG4gICAgZ2V0UHJvcCA9IChyZWYxID0gb3B0aW9ucyAhPSBudWxsID8gb3B0aW9ucy5nZXRQcm9wIDogdm9pZCAwKSAhPSBudWxsID8gcmVmMSA6IEpzb25Qb2ludGVyLmdldFByb3A7XG4gICAgZGVsTm90Rm91bmQgPSAocmVmMiA9IG9wdGlvbnMgIT0gbnVsbCA/IG9wdGlvbnMuZGVsTm90Rm91bmQgOiB2b2lkIDApICE9IG51bGwgPyByZWYyIDogSnNvblBvaW50ZXIuZGVsTm90Rm91bmQ7XG4gICAgcm9vdCA9IG9iajtcbiAgICBpU2VnbWVudCA9IDA7XG4gICAgbGVuID0gcG9pbnRlci5sZW5ndGg7XG4gICAgd2hpbGUgKGlTZWdtZW50ICE9PSBsZW4pIHtcbiAgICAgIHNlZ21lbnQgPSBwb2ludGVyW2lTZWdtZW50XTtcbiAgICAgICsraVNlZ21lbnQ7XG4gICAgICBpZiAoc2VnbWVudCA9PT0gJy0nICYmIEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgICAgICBzZWdtZW50ID0gb2JqLmxlbmd0aDtcbiAgICAgIH0gZWxzZSBpZiAoc2VnbWVudC5tYXRjaCgvXig/OjB8WzEtOV1cXGQqKSQvKSAmJiBBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICAgICAgc2VnbWVudCA9IHBhcnNlSW50KHNlZ21lbnQsIDEwKTtcbiAgICAgIH1cbiAgICAgIGlmICghaGFzUHJvcChvYmosIHNlZ21lbnQpKSB7XG4gICAgICAgIGRlbE5vdEZvdW5kKG9iaiwgc2VnbWVudCwgcm9vdCwgcG9pbnRlciwgaVNlZ21lbnQgLSAxKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9IGVsc2UgaWYgKGlTZWdtZW50ID09PSBsZW4pIHtcbiAgICAgICAgZGVsZXRlIG9ialtzZWdtZW50XTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvYmogPSBnZXRQcm9wKG9iaiwgc2VnbWVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByb290O1xuICB9O1xuXG5cbiAgLypcbiAgICogUmV0dXJucyB0cnVlIGlmZiB0aGUgbG9jYXRpb24sIHNwZWNpZmllZCBieSBgcG9pbnRlcmAsIGV4aXN0cyBpbiBgb2JqZWN0YFxuICAgKlxuICAgKiBAcGFyYW0geyp9IG9ialxuICAgKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gcG9pbnRlclxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge2hhc1Byb3B9IG9wdGlvbnMuaGFzUHJvcFxuICAgKiBAcGFyYW0ge2dldFByb3B9IG9wdGlvbnMuZ2V0UHJvcFxuICAgKiBAcmV0dXJucyB7Kn1cbiAgICovXG5cbiAgSnNvblBvaW50ZXIuaGFzID0gZnVuY3Rpb24ob2JqLCBwb2ludGVyLCBvcHRpb25zKSB7XG4gICAgdmFyIGdldFByb3AsIGhhc1Byb3AsIGlTZWdtZW50LCBsZW4sIHJlZiwgcmVmMSwgc2VnbWVudDtcbiAgICBpZiAodHlwZW9mIHBvaW50ZXIgPT09ICdzdHJpbmcnKSB7XG4gICAgICBwb2ludGVyID0gSnNvblBvaW50ZXIucGFyc2UocG9pbnRlcik7XG4gICAgfVxuICAgIGhhc1Byb3AgPSAocmVmID0gb3B0aW9ucyAhPSBudWxsID8gb3B0aW9ucy5oYXNQcm9wIDogdm9pZCAwKSAhPSBudWxsID8gcmVmIDogSnNvblBvaW50ZXIuaGFzSnNvblByb3A7XG4gICAgZ2V0UHJvcCA9IChyZWYxID0gb3B0aW9ucyAhPSBudWxsID8gb3B0aW9ucy5nZXRQcm9wIDogdm9pZCAwKSAhPSBudWxsID8gcmVmMSA6IEpzb25Qb2ludGVyLmdldFByb3A7XG4gICAgaVNlZ21lbnQgPSAwO1xuICAgIGxlbiA9IHBvaW50ZXIubGVuZ3RoO1xuICAgIHdoaWxlIChpU2VnbWVudCAhPT0gbGVuKSB7XG4gICAgICBzZWdtZW50ID0gcG9pbnRlcltpU2VnbWVudF07XG4gICAgICArK2lTZWdtZW50O1xuICAgICAgaWYgKHNlZ21lbnQgPT09ICctJyAmJiBBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICAgICAgc2VnbWVudCA9IG9iai5sZW5ndGg7XG4gICAgICB9IGVsc2UgaWYgKHNlZ21lbnQubWF0Y2goL14oPzowfFsxLTldXFxkKikkLykgJiYgQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgICAgIHNlZ21lbnQgPSBwYXJzZUludChzZWdtZW50LCAxMCk7XG4gICAgICB9XG4gICAgICBpZiAoIWhhc1Byb3Aob2JqLCBzZWdtZW50KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBvYmogPSBnZXRQcm9wKG9iaiwgc2VnbWVudCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIHJldHVybiBKc29uUG9pbnRlcjtcblxufSkoKTtcblxucmV0dXJuIEpzb25Qb2ludGVyO1xufSkpO1xuIiwiY2xhc3MgSnNvblBvaW50ZXJFcnJvciBleHRlbmRzIEVycm9yXG4gIGNvbnN0cnVjdG9yOiAobWVzc2FnZSkgLT5cbiAgICBiYXNlID0gc3VwZXIobWVzc2FnZSlcblxuICAgIEBtZXNzYWdlID0gYmFzZS5tZXNzYWdlXG4gICAgQHN0YWNrID0gYmFzZS5zdGFja1xuICAgIEBuYW1lID0gQGNvbnN0cnVjdG9yLm5hbWVcblxuY2xhc3MgSnNvblBvaW50ZXJcbiAgQEpzb25Qb2ludGVyRXJyb3I6IEpzb25Qb2ludGVyRXJyb3JcblxuICAjIyNcbiAgIyBDb252ZW5pZW5jZSBmdW5jdGlvbiBmb3IgY2hvb3NpbmcgYmV0d2VlbiBgLnNtYXJ0QmluZGAsIGAuZ2V0YCwgYW5kIGAuc2V0YCwgZGVwZW5kaW5nIG9uIHRoZSBudW1iZXIgb2YgYXJndW1lbnRzLlxuICAjXG4gICMgQHBhcmFtIHsqfSBvYmplY3RcbiAgIyBAcGFyYW0ge3N0cmluZ30gcG9pbnRlclxuICAjIEBwYXJhbSB7Kn0gdmFsdWVcbiAgIyBAcmV0dXJucyB7Kn0gZXZhbHVhdGlvbiBvZiB0aGUgcHJveGllZCBtZXRob2RcbiAgIyMjXG4gIGNvbnN0cnVjdG9yOiAob2JqZWN0LCBwb2ludGVyLCB2YWx1ZSkgLT5cbiAgICByZXR1cm4gc3dpdGNoIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgIHdoZW4gMyB0aGVuIEpzb25Qb2ludGVyLnNldChvYmplY3QsIHBvaW50ZXIsIHZhbHVlKVxuICAgICAgd2hlbiAyIHRoZW4gSnNvblBvaW50ZXIuZ2V0KG9iamVjdCwgcG9pbnRlcilcbiAgICAgIHdoZW4gMSB0aGVuIEpzb25Qb2ludGVyLnNtYXJ0QmluZCh7IG9iamVjdDogb2JqZWN0IH0pXG4gICAgICBlbHNlIG51bGxcblxuICAjIyNcbiAgIyBDcmVhdGVzIGEgY2xvbmUgb2YgdGhlIGFwaSwgd2l0aCBgLi8uZ2V0Ly5oYXMvLnNldC8uZGVsLy5zbWFydEJpbmRgIG1ldGhvZCBzaWduYXR1cmVzIGFkanVzdGVkLlxuICAjIFRoZSBzbWFydEJpbmQgbWV0aG9kIGlzIGN1bXVsYXRpdmUsIG1lYW5pbmcgdGhhdCBgLnNtYXJ0QmluZCh7IG9iamVjdDogeH0pLnNtYXJ0QmluZCh7IHBvaW50ZXI6IHkgfSlgIHdpbGwgYmVoYXZlIGFzIGV4cGVjdGVkLlxuICAjXG4gICMgQHBhcmFtIHtPYmplY3R9IGJpbmRpbmdzXG4gICMgQHBhcmFtIHsqfSBiaW5kaW5ncy5vYmplY3RcbiAgIyBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gYmluZGluZ3MucG9pbnRlclxuICAjIEBwYXJhbSB7T2JqZWN0fSBiaW5kaW5ncy5vcHRpb25zXG4gICMgQHJldHVybnMge0pzb25Qb2ludGVyfVxuICAjIyNcbiAgQHNtYXJ0QmluZDogKHsgb2JqZWN0OiBvYmosIHBvaW50ZXI6IHB0ciwgZnJhZ21lbnQ6IGZyYWcsIG9wdGlvbnM6IG9wdCB9KSAtPlxuICAgICMgZnJhZ21lbnQgb3ZlcnJpZGVzIHBvaW50ZXJcbiAgICBwdHIgPSBmcmFnID8gcHRyXG5cbiAgICAjIFdoYXQgYXJlIGJpbmRpbmc/XG4gICAgaGFzT2JqID0gb2JqICE9IHVuZGVmaW5lZFxuICAgIGhhc1B0ciA9IHB0cj9cbiAgICBoYXNPcHQgPSBvcHQ/XG5cbiAgICAjIExldHMgbm90IHBhcnNlIHRoaXMgZXZlcnkgdGltZSFcbiAgICBpZiB0eXBlb2YgcHRyID09ICdzdHJpbmcnXG4gICAgICBwdHIgPSBAcGFyc2UocHRyKVxuXG4gICAgIyBkZWZhdWx0IG9wdGlvbnMgaGF2ZSBjaGFuZ2VkXG4gICAgbWVyZ2VPcHRpb25zID0gKG92ZXJyaWRlID0ge30pIC0+XG4gICAgICBvID0ge31cblxuICAgICAgby5oYXNPd25Qcm9wID0gb3ZlcnJpZGUuaGFzT3duUHJvcCA/IG9wdC5oYXNPd25Qcm9wXG4gICAgICBvLmdldFByb3AgPSBvdmVycmlkZS5nZXRQcm9wID8gb3B0LmdldFByb3BcbiAgICAgIG8uc2V0UHJvcCA9IG92ZXJyaWRlLnNldFByb3AgPyBvcHQuc2V0UHJvcFxuICAgICAgby5nZXROb3RGb3VuZCA9IG92ZXJyaWRlLmdldE5vdEZvdW5kID8gb3B0LmdldE5vdEZvdW5kXG4gICAgICBvLnNldE5vdEZvdW5kID0gb3ZlcnJpZGUuc2V0Tm90Rm91bmQgPyBvcHQuc2V0Tm90Rm91bmRcbiAgICAgIG8uZGVsTm90Rm91bmQgPSBvdmVycmlkZS5kZWxOb3RGb3VuZCA/IG9wdC5kZWxOb3RGb3VuZFxuXG4gICAgICByZXR1cm4gb1xuXG4gICAgYXBpID0gdW5kZWZpbmVkXG5cbiAgICAjIEV2ZXJ5IGNvbWJpbmF0aW9uIG9mIGJpbmRpbmdzXG4gICAgaWYgaGFzT2JqIGFuZCBoYXNQdHIgYW5kIGhhc09wdFxuICAgICAgYXBpID0gKHZhbHVlKSAtPlxuICAgICAgICByZXR1cm4gc3dpdGNoIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgICAgICB3aGVuIDEgdGhlbiBKc29uUG9pbnRlci5zZXQob2JqLCBwdHIsIHZhbHVlLCBvcHQpXG4gICAgICAgICAgd2hlbiAwIHRoZW4gSnNvblBvaW50ZXIuZ2V0KG9iaiwgcHRyLCBvcHQpXG4gICAgICAgICAgZWxzZSBudWxsXG5cbiAgICAgIGFwaS5zZXQgPSAodmFsdWUsIG92ZXJyaWRlKSAtPiBvYmogPSBKc29uUG9pbnRlci5zZXQob2JqLCBwdHIsIHZhbHVlLCBtZXJnZU9wdGlvbnMob3ZlcnJpZGUpKVxuICAgICAgYXBpLmdldCA9IChvdmVycmlkZSkgLT4gSnNvblBvaW50ZXIuZ2V0KG9iaiwgcHRyLCBtZXJnZU9wdGlvbnMob3ZlcnJpZGUpKVxuICAgICAgYXBpLmhhcyA9IChvdmVycmlkZSkgLT4gSnNvblBvaW50ZXIuaGFzKG9iaiwgcHRyLCBtZXJnZU9wdGlvbnMob3ZlcnJpZGUpKVxuICAgICAgYXBpLmRlbCA9IChvdmVycmlkZSkgLT4gb2JqID0gSnNvblBvaW50ZXIuZGVsKG9iaiwgcHRyLCBtZXJnZU9wdGlvbnMob3ZlcnJpZGUpKVxuICAgIGVsc2UgaWYgaGFzT2JqIGFuZCBoYXNQdHJcbiAgICAgIGFwaSA9ICh2YWx1ZSkgLT5cbiAgICAgICAgcmV0dXJuIHN3aXRjaCBhcmd1bWVudHMubGVuZ3RoXG4gICAgICAgICAgd2hlbiAxIHRoZW4gSnNvblBvaW50ZXIuc2V0KG9iaiwgcHRyLCB2YWx1ZSlcbiAgICAgICAgICB3aGVuIDAgdGhlbiBKc29uUG9pbnRlci5nZXQob2JqLCBwdHIpXG4gICAgICAgICAgZWxzZSBudWxsXG5cbiAgICAgIGFwaS5zZXQgPSAodmFsdWUsIG92ZXJyaWRlKSAtPiBvYmogPSBKc29uUG9pbnRlci5zZXQob2JqLCBwdHIsIHZhbHVlLCBvdmVycmlkZSlcbiAgICAgIGFwaS5nZXQgPSAob3ZlcnJpZGUpIC0+IEpzb25Qb2ludGVyLmdldChvYmosIHB0ciwgb3ZlcnJpZGUpXG4gICAgICBhcGkuaGFzID0gKG92ZXJyaWRlKSAtPiBKc29uUG9pbnRlci5oYXMob2JqLCBwdHIsIG92ZXJyaWRlKVxuICAgICAgYXBpLmRlbCA9IChvdmVycmlkZSkgLT4gb2JqID0gSnNvblBvaW50ZXIuZGVsKG9iaiwgcHRyLCBvdmVycmlkZSlcbiAgICBlbHNlIGlmIGhhc09iaiBhbmQgaGFzT3B0XG4gICAgICBhcGkgPSAocHRyLCB2YWx1ZSkgLT5cbiAgICAgICAgcmV0dXJuIHN3aXRjaCBhcmd1bWVudHMubGVuZ3RoXG4gICAgICAgICAgd2hlbiAyIHRoZW4gSnNvblBvaW50ZXIuc2V0KG9iaiwgcHRyLCB2YWx1ZSwgb3B0KVxuICAgICAgICAgIHdoZW4gMSB0aGVuIEpzb25Qb2ludGVyLmdldChvYmosIHB0ciwgb3B0KVxuICAgICAgICAgIGVsc2UgbnVsbFxuXG4gICAgICBhcGkuc2V0ID0gKHB0ciwgdmFsdWUsIG92ZXJyaWRlKSAtPiBvYmogPSBKc29uUG9pbnRlci5zZXQob2JqLCBwdHIsIHZhbHVlLCBtZXJnZU9wdGlvbnMob3ZlcnJpZGUpKVxuICAgICAgYXBpLmdldCA9IChwdHIsIG92ZXJyaWRlKSAtPiBKc29uUG9pbnRlci5nZXQob2JqLCBwdHIsIG1lcmdlT3B0aW9ucyhvdmVycmlkZSkpXG4gICAgICBhcGkuaGFzID0gKHB0ciwgb3ZlcnJpZGUpIC0+IEpzb25Qb2ludGVyLmhhcyhvYmosIHB0ciwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSlcbiAgICAgIGFwaS5kZWwgPSAocHRyLCBvdmVycmlkZSkgLT4gb2JqID0gSnNvblBvaW50ZXIuZGVsKG9iaiwgcHRyLCBtZXJnZU9wdGlvbnMob3ZlcnJpZGUpKVxuICAgIGVsc2UgaWYgaGFzUHRyIGFuZCBoYXNPcHRcbiAgICAgIGFwaSA9IChvYmosIHZhbHVlKSAtPlxuICAgICAgICByZXR1cm4gc3dpdGNoIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgICAgICB3aGVuIDIgdGhlbiBKc29uUG9pbnRlci5zZXQob2JqLCBwdHIsIHZhbHVlLCBvcHQpXG4gICAgICAgICAgd2hlbiAxIHRoZW4gSnNvblBvaW50ZXIuZ2V0KG9iaiwgcHRyLCBvcHQpXG4gICAgICAgICAgZWxzZSBudWxsXG5cbiAgICAgIGFwaS5zZXQgPSAob2JqLCB2YWx1ZSwgb3ZlcnJpZGUpIC0+IEpzb25Qb2ludGVyLnNldChvYmosIHB0ciwgdmFsdWUsIG1lcmdlT3B0aW9ucyhvdmVycmlkZSkpXG4gICAgICBhcGkuZ2V0ID0gKG9iaiwgb3ZlcnJpZGUpIC0+IEpzb25Qb2ludGVyLmdldChvYmosIHB0ciwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSlcbiAgICAgIGFwaS5oYXMgPSAob2JqLCBvdmVycmlkZSkgLT4gSnNvblBvaW50ZXIuaGFzKG9iaiwgcHRyLCBtZXJnZU9wdGlvbnMob3ZlcnJpZGUpKVxuICAgICAgYXBpLmRlbCA9IChvYmosIG92ZXJyaWRlKSAtPiBKc29uUG9pbnRlci5kZWwob2JqLCBwdHIsIG1lcmdlT3B0aW9ucyhvdmVycmlkZSkpXG4gICAgZWxzZSBpZiBoYXNPcHRcbiAgICAgIGFwaSA9IChvYmosIHB0ciwgdmFsdWUpIC0+XG4gICAgICAgIHJldHVybiBzd2l0Y2ggYXJndW1lbnRzLmxlbmd0aFxuICAgICAgICAgIHdoZW4gMyB0aGVuIEpzb25Qb2ludGVyLnNldChvYmosIHB0ciwgdmFsdWUsIG9wdClcbiAgICAgICAgICB3aGVuIDIgdGhlbiBKc29uUG9pbnRlci5nZXQob2JqLCBwdHIsIG9wdClcbiAgICAgICAgICB3aGVuIDEgdGhlbiBhcGkuc21hcnRCaW5kKHsgb2JqZWN0OiBvYmogfSlcbiAgICAgICAgICBlbHNlIG51bGxcblxuICAgICAgYXBpLnNldCA9IChvYmosIHB0ciwgdmFsdWUsIG92ZXJyaWRlKSAtPiBKc29uUG9pbnRlci5zZXQob2JqLCBwdHIsIHZhbHVlLCBtZXJnZU9wdGlvbnMob3ZlcnJpZGUpKVxuICAgICAgYXBpLmdldCA9IChvYmosIHB0ciwgb3ZlcnJpZGUpIC0+IEpzb25Qb2ludGVyLmdldChvYmosIHB0ciwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSlcbiAgICAgIGFwaS5oYXMgPSAob2JqLCBwdHIsIG92ZXJyaWRlKSAtPiBKc29uUG9pbnRlci5oYXMob2JqLCBwdHIsIG1lcmdlT3B0aW9ucyhvdmVycmlkZSkpXG4gICAgICBhcGkuZGVsID0gKG9iaiwgcHRyLCBvdmVycmlkZSkgLT4gSnNvblBvaW50ZXIuZGVsKG9iaiwgcHRyLCBtZXJnZU9wdGlvbnMob3ZlcnJpZGUpKVxuICAgIGVsc2UgaWYgaGFzT2JqXG4gICAgICBhcGkgPSAocHRyLCB2YWx1ZSkgLT5cbiAgICAgICAgcmV0dXJuIHN3aXRjaCBhcmd1bWVudHMubGVuZ3RoXG4gICAgICAgICAgd2hlbiAyIHRoZW4gSnNvblBvaW50ZXIuc2V0KG9iaiwgcHRyLCB2YWx1ZSlcbiAgICAgICAgICB3aGVuIDEgdGhlbiBKc29uUG9pbnRlci5nZXQob2JqLCBwdHIpXG4gICAgICAgICAgZWxzZSBudWxsXG5cbiAgICAgIGFwaS5zZXQgPSAocHRyLCB2YWx1ZSwgb3ZlcnJpZGUpIC0+IG9iaiA9IEpzb25Qb2ludGVyLnNldChvYmosIHB0ciwgdmFsdWUsIG92ZXJyaWRlKVxuICAgICAgYXBpLmdldCA9IChwdHIsIG92ZXJyaWRlKSAtPiBKc29uUG9pbnRlci5nZXQob2JqLCBwdHIsIG92ZXJyaWRlKVxuICAgICAgYXBpLmhhcyA9IChwdHIsIG92ZXJyaWRlKSAtPiBKc29uUG9pbnRlci5oYXMob2JqLCBwdHIsIG92ZXJyaWRlKVxuICAgICAgYXBpLmRlbCA9IChwdHIsIG92ZXJyaWRlKSAtPiBvYmogPSBKc29uUG9pbnRlci5kZWwob2JqLCBwdHIsIG92ZXJyaWRlKVxuICAgIGVsc2UgaWYgaGFzUHRyXG4gICAgICBhcGkgPSAob2JqLCB2YWx1ZSkgLT5cbiAgICAgICAgcmV0dXJuIHN3aXRjaCBhcmd1bWVudHMubGVuZ3RoXG4gICAgICAgICAgd2hlbiAyIHRoZW4gSnNvblBvaW50ZXIuc2V0KG9iaiwgcHRyLCB2YWx1ZSlcbiAgICAgICAgICB3aGVuIDEgdGhlbiBKc29uUG9pbnRlci5nZXQob2JqLCBwdHIpXG4gICAgICAgICAgZWxzZSBudWxsXG5cbiAgICAgIGFwaS5zZXQgPSAob2JqLCB2YWx1ZSwgb3ZlcnJpZGUpIC0+IEpzb25Qb2ludGVyLnNldChvYmosIHB0ciwgdmFsdWUsIG92ZXJyaWRlKVxuICAgICAgYXBpLmdldCA9IChvYmosIG92ZXJyaWRlKSAtPiBKc29uUG9pbnRlci5nZXQob2JqLCBwdHIsIG92ZXJyaWRlKVxuICAgICAgYXBpLmhhcyA9IChvYmosIG92ZXJyaWRlKSAtPiBKc29uUG9pbnRlci5oYXMob2JqLCBwdHIsIG92ZXJyaWRlKVxuICAgICAgYXBpLmRlbCA9IChvYmosIG92ZXJyaWRlKSAtPiBKc29uUG9pbnRlci5kZWwob2JqLCBwdHIsIG92ZXJyaWRlKVxuICAgIGVsc2VcbiAgICAgIHJldHVybiBAXG5cbiAgICAjIHNtYXJ0QmluZCBoYXMgbmV3IGRlZmF1bHRzXG4gICAgYXBpLnNtYXJ0QmluZCA9IChvdmVycmlkZSkgLT5cbiAgICAgIG8gPSB7fVxuXG4gICAgICBpZiB7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG92ZXJyaWRlLCAnb2JqZWN0JylcbiAgICAgICAgby5vYmplY3QgPSBvdmVycmlkZS5vYmplY3RcbiAgICAgIGVsc2UgaWYgaGFzT2JqXG4gICAgICAgIG8ub2JqZWN0ID0gb2JqXG5cbiAgICAgIGlmIHt9Lmhhc093blByb3BlcnR5LmNhbGwob3ZlcnJpZGUsICdwb2ludGVyJylcbiAgICAgICAgby5wb2ludGVyID0gb3ZlcnJpZGUucG9pbnRlclxuICAgICAgZWxzZSBpZiBoYXNQdHJcbiAgICAgICAgby5wb2ludGVyID0gcHRyXG5cbiAgICAgIGlmIHt9Lmhhc093blByb3BlcnR5LmNhbGwob3ZlcnJpZGUsICdvcHRpb25zJylcbiAgICAgICAgby5vcHRpb25zID0gbWVyZ2VPcHRpb25zKG92ZXJyaWRlLm9wdGlvbnMpXG4gICAgICBlbHNlIGlmIGhhc09ialxuICAgICAgICBvLm9wdGlvbnMgPSBvcHRcblxuICAgICAgcmV0dXJuIEpzb25Qb2ludGVyLnNtYXJ0QmluZChvKVxuXG4gICAgaWYgaGFzUHRyXG4gICAgICAjIyNcbiAgICAgICMgZ2V0L3NldCBib3VuZCBwb2ludGVyIHZhbHVlXG4gICAgICAjXG4gICAgICAjIE9ubHkgYXZhaWxhYmxlIHdoZW4gcG9pbnRlciBoYXMgYmVlbiBib3VuZFxuICAgICAgI1xuICAgICAgIyBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgICMgQHJldHVybnMgc3RyaW5nW10gc2VnbWVudHNcbiAgICAgICMjI1xuICAgICAgYXBpLnBvaW50ZXIgPSAodmFsdWUpIC0+XG4gICAgICAgIGlmIGFyZ3VtZW50cy5sZW5ndGggPT0gMFxuICAgICAgICAgIHJldHVybiBKc29uUG9pbnRlci5jb21waWxlUG9pbnRlcihwdHIpXG4gICAgICAgIGVsc2VcbiAgICAgICAgICByZXR1cm4gcHRyID0gSnNvblBvaW50ZXIucGFyc2VQb2ludGVyKHZhbHVlKVxuXG4gICAgICAjIyNcbiAgICAgICMgZ2V0L3NldCBib3VuZCBwb2ludGVyIHZhbHVlIGFzIGZyYWdtZW50XG4gICAgICAjXG4gICAgICAjIE9ubHkgYXZhaWxhYmxlIHdoZW4gcG9pbnRlciBoYXMgYmVlbiBib3VuZFxuICAgICAgI1xuICAgICAgIyBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgICMgQHJldHVybnMgc3RyaW5nW10gc2VnbWVudHNcbiAgICAgICMjI1xuICAgICAgYXBpLmZyYWdtZW50ID0gKHZhbHVlKSAtPlxuICAgICAgICBpZiBhcmd1bWVudHMubGVuZ3RoID09IDBcbiAgICAgICAgICByZXR1cm4gSnNvblBvaW50ZXIuY29tcGlsZUZyYWdtZW50KHB0cilcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHJldHVybiBwdHIgPSBKc29uUG9pbnRlci5wYXJzZUZyYWdtZW50KHZhbHVlKVxuXG4gICAgaWYgaGFzT2JqXG4gICAgICAjIyNcbiAgICAgICMgZ2V0L3NldCBib3VuZCBvYmplY3RcbiAgICAgICNcbiAgICAgICMgT25seSBhdmFpbGFibGUgd2hlbiBvYmplY3QgaGFzIGJlZW4gYm91bmRcbiAgICAgICNcbiAgICAgICMgQHBhcmFtIHsqfSB2YWx1ZVxuICAgICAgIyBAcmV0dXJucyB7Kn0gYm91bmQgb2JqZWN0XG4gICAgICAjIyNcbiAgICAgIGFwaS5vYmplY3QgPSAodmFsdWUpIC0+XG4gICAgICAgIGlmIGFyZ3VtZW50cy5sZW5ndGggPT0gMFxuICAgICAgICAgIHJldHVybiBvYmpcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHJldHVybiBvYmogPSB2YWx1ZVxuXG4gICAgaWYgaGFzT3B0XG4gICAgICAjIyNcbiAgICAgICMgZ2V0L3NldCBib3VuZCBvcHRpb25zXG4gICAgICAjXG4gICAgICAjIE9ubHkgYXZhaWxhYmxlIHdoZW4gb3B0aW9ucyBoYXMgYmVlbiBib3VuZFxuICAgICAgI1xuICAgICAgIyBAcGFyYW0geyp9IHZhbHVlXG4gICAgICAjIEByZXR1cm5zIHsqfSBib3VuZCBvcHRpb25zXG4gICAgICAjIyNcbiAgICAgIGFwaS5vcHRpb25zID0gKHZhbHVlKSAtPlxuICAgICAgICBpZiBhcmd1bWVudHMubGVuZ3RoID09IDBcbiAgICAgICAgICByZXR1cm4gb3B0XG4gICAgICAgIGVsc2VcbiAgICAgICAgICByZXR1cm4gb3B0ID0gdmFsdWVcblxuICAgICMgY29weSB0aGUgcmVtYWluaW5nIG1ldGhvZHMgd2hpY2ggZG8gbm90IG5lZWQgYmluZGluZ1xuICAgIGZvciBvd24ga2V5LCB2YWwgb2YgSnNvblBvaW50ZXJcbiAgICAgIGlmIG5vdCB7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGFwaSwga2V5KVxuICAgICAgICBhcGlba2V5XSA9IHZhbFxuXG4gICAgIyBmaW5hbCByZXN1bHRcbiAgICByZXR1cm4gYXBpXG5cbiAgIyMjXG4gICMgRXNjYXBlcyB0aGUgZ2l2ZW4gcGF0aCBzZWdtZW50IGFzIGRlc2NyaWJlZCBieSBSRkM2OTAxLlxuICAjXG4gICMgTm90YWJseSwgYCd+J2AncyBhcmUgcmVwbGFjZWQgd2l0aCBgJ34wJ2AgYW5kIGAnLydgJ3MgYXJlIHJlcGxhY2VkIHdpdGggYCd+MSdgLlxuICAjXG4gICMgQHBhcmFtIHtzdHJpbmd9IHNlZ21lbnRcbiAgIyBAcmV0dXJucyB7c3RyaW5nfVxuICAjIyNcbiAgQGVzY2FwZTogKHNlZ21lbnQpIC0+XG4gICAgc2VnbWVudC5yZXBsYWNlKC9+L2csICd+MCcpLnJlcGxhY2UoL1xcLy9nLCAnfjEnKVxuXG4gICMjI1xuICAjIEVzY2FwZXMgdGhlIGdpdmVuIHBhdGggZnJhZ21lbnQgc2VnbWVudCBhcyBkZXNjcmliZWQgYnkgUkZDNjkwMS5cbiAgI1xuICAjIE5vdGFibHksIGAnfidgJ3MgYXJlIHJlcGxhY2VkIHdpdGggYCd+MCdgIGFuZCBgJy8nYCdzIGFyZSByZXBsYWNlZCB3aXRoIGAnfjEnYCBhbmQgZmluYWxseSB0aGUgc3RyaW5nIGlzIFVSSSBlbmNvZGVkLlxuICAjXG4gICMgQHBhcmFtIHtzdHJpbmd9IHNlZ21lbnRcbiAgIyBAcmV0dXJucyB7c3RyaW5nfVxuICAjIyNcbiAgQGVzY2FwZUZyYWdtZW50OiAoc2VnbWVudCkgLT5cbiAgICBlbmNvZGVVUklDb21wb25lbnQoSnNvblBvaW50ZXIuZXNjYXBlKHNlZ21lbnQpKVxuXG4gICMjI1xuICAjIFVuLUVzY2FwZXMgdGhlIGdpdmVuIHBhdGggc2VnbWVudCwgcmV2ZXJzaW5nIHRoZSBhY3Rpb25zIG9mIGAuZXNjYXBlYC5cbiAgI1xuICAjIE5vdGFibHksIGAnfjEnYCdzIGFyZSByZXBsYWNlZCB3aXRoIGAnLydgIGFuZCBgJ34wJ2AncyBhcmUgcmVwbGFjZWQgd2l0aCBgJ34nYC5cbiAgI1xuICAjIEBwYXJhbSB7c3RyaW5nfSBzZWdtZW50XG4gICMgQHJldHVybnMge3N0cmluZ31cbiAgIyMjXG4gIEB1bmVzY2FwZTogKHNlZ21lbnQpIC0+XG4gICAgc2VnbWVudC5yZXBsYWNlKC9+MS9nLCAnLycpLnJlcGxhY2UoL34wL2csICd+JylcblxuICAjIyNcbiAgIyBVbi1Fc2NhcGVzIHRoZSBnaXZlbiBwYXRoIGZyYWdtZW50IHNlZ21lbnQsIHJldmVyc2luZyB0aGUgYWN0aW9ucyBvZiBgLmVzY2FwZUZyYWdtZW50YC5cbiAgI1xuICAjIE5vdGFibHksIHRoZSBzdHJpbmcgaXMgVVJJIGRlY29kZWQgYW5kIHRoZW4gYCd+MSdgJ3MgYXJlIHJlcGxhY2VkIHdpdGggYCcvJ2AgYW5kIGAnfjAnYCdzIGFyZSByZXBsYWNlZCB3aXRoIGAnfidgLlxuICAjXG4gICMgQHBhcmFtIHtzdHJpbmd9IHNlZ21lbnRcbiAgIyBAcmV0dXJucyB7c3RyaW5nfVxuICAjIyNcbiAgQHVuZXNjYXBlRnJhZ21lbnQ6IChzZWdtZW50KSAtPlxuICAgIEpzb25Qb2ludGVyLnVuZXNjYXBlKGRlY29kZVVSSUNvbXBvbmVudChzZWdtZW50KSlcblxuICAjIyNcbiAgIyBSZXR1cm5zIHRydWUgaWZmIGBzdHJgIGlzIGEgdmFsaWQganNvbiBwb2ludGVyIHZhbHVlXG4gICNcbiAgIyBAcGFyYW0ge3N0cmluZ30gc3RyXG4gICMgQHJldHVybnMge0Jvb2xlYW59XG4gICMjI1xuICBAaXNQb2ludGVyOiAoc3RyKSAtPlxuICAgIHN3aXRjaCBzdHIuY2hhckF0KDApXG4gICAgICB3aGVuICcnIHRoZW4gcmV0dXJuIHRydWVcbiAgICAgIHdoZW4gJy8nIHRoZW4gcmV0dXJuIHRydWVcbiAgICAgIGVsc2VcbiAgICAgICAgcmV0dXJuIGZhbHNlXG5cbiAgIyMjXG4gICMgUmV0dXJucyB0cnVlIGlmZiBgc3RyYCBpcyBhIHZhbGlkIGpzb24gZnJhZ21lbnQgcG9pbnRlciB2YWx1ZVxuICAjXG4gICMgQHBhcmFtIHtzdHJpbmd9IHN0clxuICAjIEByZXR1cm5zIHtCb29sZWFufVxuICAjIyNcbiAgQGlzRnJhZ21lbnQ6IChzdHIpIC0+XG4gICAgc3dpdGNoIHN0ci5zdWJzdHJpbmcoMCwgMilcbiAgICAgIHdoZW4gJyMnIHRoZW4gcmV0dXJuIHRydWVcbiAgICAgIHdoZW4gJyMvJyB0aGVuIHJldHVybiB0cnVlXG4gICAgICBlbHNlXG4gICAgICAgIHJldHVybiBmYWxzZVxuXG4gICMjI1xuICAjIFBhcnNlcyBhIGpzb24tcG9pbnRlciBvciBqc29uIGZyYWdtZW50IHBvaW50ZXIsIGFzIGRlc2NyaWJlZCBieSBSRkM5MDEsIGludG8gYW4gYXJyYXkgb2YgcGF0aCBzZWdtZW50cy5cbiAgI1xuICAjIEB0aHJvd3Mge0pzb25Qb2ludGVyRXJyb3J9IGZvciBpbnZhbGlkIGpzb24tcG9pbnRlcnMuXG4gICNcbiAgIyBAcGFyYW0ge3N0cmluZ30gc3RyXG4gICMgQHJldHVybnMge3N0cmluZ1tdfVxuICAjIyNcbiAgQHBhcnNlOiAoc3RyKSAtPlxuICAgIHN3aXRjaCBzdHIuY2hhckF0KDApXG4gICAgICB3aGVuICcnIHRoZW4gcmV0dXJuIFtdXG4gICAgICB3aGVuICcvJyB0aGVuIHJldHVybiBzdHIuc3Vic3RyaW5nKDEpLnNwbGl0KCcvJykubWFwKEpzb25Qb2ludGVyLnVuZXNjYXBlKVxuICAgICAgd2hlbiAnIydcbiAgICAgICAgc3dpdGNoIHN0ci5jaGFyQXQoMSlcbiAgICAgICAgICB3aGVuICcnIHRoZW4gcmV0dXJuIFtdXG4gICAgICAgICAgd2hlbiAnLycgdGhlbiByZXR1cm4gc3RyLnN1YnN0cmluZygyKS5zcGxpdCgnLycpLm1hcChKc29uUG9pbnRlci51bmVzY2FwZUZyYWdtZW50KVxuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRocm93IG5ldyBKc29uUG9pbnRlckVycm9yKFwiSW52YWxpZCBKU09OIGZyYWdtZW50IHBvaW50ZXI6ICN7c3RyfVwiKVxuICAgICAgZWxzZVxuICAgICAgICB0aHJvdyBuZXcgSnNvblBvaW50ZXJFcnJvcihcIkludmFsaWQgSlNPTiBwb2ludGVyOiAje3N0cn1cIilcblxuICAjIyNcbiAgIyBQYXJzZXMgYSBqc29uLXBvaW50ZXIsIGFzIGRlc2NyaWJlZCBieSBSRkM5MDEsIGludG8gYW4gYXJyYXkgb2YgcGF0aCBzZWdtZW50cy5cbiAgI1xuICAjIEB0aHJvd3Mge0pzb25Qb2ludGVyRXJyb3J9IGZvciBpbnZhbGlkIGpzb24tcG9pbnRlcnMuXG4gICNcbiAgIyBAcGFyYW0ge3N0cmluZ30gc3RyXG4gICMgQHJldHVybnMge3N0cmluZ1tdfVxuICAjIyNcbiAgQHBhcnNlUG9pbnRlcjogKHN0cikgLT5cbiAgICBzd2l0Y2ggc3RyLmNoYXJBdCgwKVxuICAgICAgd2hlbiAnJyB0aGVuIHJldHVybiBbXVxuICAgICAgd2hlbiAnLycgdGhlbiByZXR1cm4gc3RyLnN1YnN0cmluZygxKS5zcGxpdCgnLycpLm1hcChKc29uUG9pbnRlci51bmVzY2FwZSlcbiAgICAgIGVsc2UgdGhyb3cgbmV3IEpzb25Qb2ludGVyRXJyb3IoXCJJbnZhbGlkIEpTT04gcG9pbnRlcjogI3tzdHJ9XCIpXG5cbiAgIyMjXG4gICMgUGFyc2VzIGEganNvbiBmcmFnbWVudCBwb2ludGVyLCBhcyBkZXNjcmliZWQgYnkgUkZDOTAxLCBpbnRvIGFuIGFycmF5IG9mIHBhdGggc2VnbWVudHMuXG4gICNcbiAgIyBAdGhyb3dzIHtKc29uUG9pbnRlckVycm9yfSBmb3IgaW52YWxpZCBqc29uLXBvaW50ZXJzLlxuICAjXG4gICMgQHBhcmFtIHtzdHJpbmd9IHN0clxuICAjIEByZXR1cm5zIHtzdHJpbmdbXX1cbiAgIyMjXG4gIEBwYXJzZUZyYWdtZW50OiAoc3RyKSAtPlxuICAgIHN3aXRjaCBzdHIuc3Vic3RyaW5nKDAsIDIpXG4gICAgICB3aGVuICcjJyB0aGVuIHJldHVybiBbXVxuICAgICAgd2hlbiAnIy8nIHRoZW4gcmV0dXJuIHN0ci5zdWJzdHJpbmcoMikuc3BsaXQoJy8nKS5tYXAoSnNvblBvaW50ZXIudW5lc2NhcGVGcmFnbWVudClcbiAgICAgIGVsc2VcbiAgICAgICAgdGhyb3cgbmV3IEpzb25Qb2ludGVyRXJyb3IoXCJJbnZhbGlkIEpTT04gZnJhZ21lbnQgcG9pbnRlcjogI3tzdHJ9XCIpXG5cbiAgIyMjXG4gICMgQ29udmVydHMgYW4gYXJyYXkgb2YgcGF0aCBzZWdtZW50cyBpbnRvIGEganNvbiBwb2ludGVyLlxuICAjIFRoaXMgbWV0aG9kIGlzIHRoZSByZXZlcnNlIG9mIGAucGFyc2VQb2ludGVyYC5cbiAgI1xuICAjIEBwYXJhbSB7c3RyaW5nW119IHNlZ21lbnRzXG4gICMgQHJldHVybnMge3N0cmluZ31cbiAgIyMjXG4gIEBjb21waWxlOiAoc2VnbWVudHMpIC0+XG4gICAgc2VnbWVudHMubWFwKChzZWdtZW50KSAtPiAnLycgKyBKc29uUG9pbnRlci5lc2NhcGUoc2VnbWVudCkpLmpvaW4oJycpXG5cbiAgIyMjXG4gICMgQ29udmVydHMgYW4gYXJyYXkgb2YgcGF0aCBzZWdtZW50cyBpbnRvIGEganNvbiBwb2ludGVyLlxuICAjIFRoaXMgbWV0aG9kIGlzIHRoZSByZXZlcnNlIG9mIGAucGFyc2VQb2ludGVyYC5cbiAgI1xuICAjIEBwYXJhbSB7c3RyaW5nW119IHNlZ21lbnRzXG4gICMgQHJldHVybnMge3N0cmluZ31cbiAgIyMjXG4gIEBjb21waWxlUG9pbnRlcjogKHNlZ21lbnRzKSAtPlxuICAgIHNlZ21lbnRzLm1hcCgoc2VnbWVudCkgLT4gJy8nICsgSnNvblBvaW50ZXIuZXNjYXBlKHNlZ21lbnQpKS5qb2luKCcnKVxuXG4gICMjI1xuICAjIENvbnZlcnRzIGFuIGFycmF5IG9mIHBhdGggc2VnbWVudHMgaW50byBhIGpzb24gZnJhZ21lbnQgcG9pbnRlci5cbiAgIyBUaGlzIG1ldGhvZCBpcyB0aGUgcmV2ZXJzZSBvZiBgLnBhcnNlRnJhZ21lbnRgLlxuICAjXG4gICMgQHBhcmFtIHtzdHJpbmdbXX0gc2VnbWVudHNcbiAgIyBAcmV0dXJucyB7c3RyaW5nfVxuICAjIyNcbiAgQGNvbXBpbGVGcmFnbWVudDogKHNlZ21lbnRzKSAtPlxuICAgICcjJyArIHNlZ21lbnRzLm1hcCgoc2VnbWVudCkgLT4gJy8nICsgSnNvblBvaW50ZXIuZXNjYXBlRnJhZ21lbnQoc2VnbWVudCkpLmpvaW4oJycpXG5cbiAgIyMjXG4gICMgQ2FsbGJhY2sgdXNlZCB0byBkZXRlcm1pbmUgaWYgYW4gb2JqZWN0IGNvbnRhaW5zIGEgZ2l2ZW4gcHJvcGVydHkuXG4gICNcbiAgIyBAY2FsbGJhY2sgaGFzUHJvcFxuICAjIEBwYXJhbSB7Kn0gb2JqXG4gICMgQHBhcmFtIHtzdHJpbmd8aW50ZWdlcn0ga2V5XG4gICMgQHJldHVybnMge0Jvb2xlYW59XG4gICMjI1xuXG4gICMjI1xuICAjIFJldHVybnMgdHJ1ZSBpZmYgYG9iamAgY29udGFpbnMgYGtleWAgYW5kIGBvYmpgIGlzIGVpdGhlciBhbiBBcnJheSBvciBhbiBPYmplY3QuXG4gICMgSWdub3JlcyB0aGUgcHJvdG90eXBlIGNoYWluLlxuICAjXG4gICMgRGVmYXVsdCB2YWx1ZSBmb3IgYG9wdGlvbnMuaGFzUHJvcGAuXG4gICNcbiAgIyBAcGFyYW0geyp9IG9ialxuICAjIEBwYXJhbSB7c3RyaW5nfGludGVnZXJ9IGtleVxuICAjIEByZXR1cm5zIHtCb29sZWFufVxuICAjIyNcbiAgQGhhc0pzb25Qcm9wOiAob2JqLCBrZXkpIC0+XG4gICAgaWYgQXJyYXkuaXNBcnJheShvYmopXG4gICAgICByZXR1cm4gKHR5cGVvZiBrZXkgPT0gJ251bWJlcicpIGFuZCAoa2V5IDwgb2JqLmxlbmd0aClcbiAgICBlbHNlIGlmIHR5cGVvZiBvYmogPT0gJ29iamVjdCdcbiAgICAgIHJldHVybiB7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KVxuICAgIGVsc2VcbiAgICAgIHJldHVybiBmYWxzZVxuXG4gICMjI1xuICAjIFJldHVybnMgdHJ1ZSBpZmYgYG9iamAgY29udGFpbnMgYGtleWAsIGRpc3JlZ2FyZGluZyB0aGUgcHJvdG90eXBlIGNoYWluLlxuICAjXG4gICMgQHBhcmFtIHsqfSBvYmpcbiAgIyBAcGFyYW0ge3N0cmluZ3xpbnRlZ2VyfSBrZXlcbiAgIyBAcmV0dXJucyB7Qm9vbGVhbn1cbiAgIyMjXG4gIEBoYXNPd25Qcm9wOiAob2JqLCBrZXkpIC0+XG4gICAge30uaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSlcblxuICAjIyNcbiAgIyBSZXR1cm5zIHRydWUgaWZmIGBvYmpgIGNvbnRhaW5zIGBrZXlgLCBpbmNsdWRpbmcgdmlhIHRoZSBwcm90b3R5cGUgY2hhaW4uXG4gICNcbiAgIyBAcGFyYW0geyp9IG9ialxuICAjIEBwYXJhbSB7c3RyaW5nfGludGVnZXJ9IGtleVxuICAjIEByZXR1cm5zIHtCb29sZWFufVxuICAjIyNcbiAgQGhhc1Byb3A6IChvYmosIGtleSkgLT5cbiAgICBrZXkgb2Ygb2JqXG5cbiAgIyMjXG4gICMgQ2FsbGJhY2sgdXNlZCB0byByZXRyaWV2ZSBhIHByb3BlcnR5IGZyb20gYW4gb2JqZWN0XG4gICNcbiAgIyBAY2FsbGJhY2sgZ2V0UHJvcFxuICAjIEBwYXJhbSB7Kn0gb2JqXG4gICMgQHBhcmFtIHtzdHJpbmd8aW50ZWdlcn0ga2V5XG4gICMgQHJldHVybnMgeyp9XG4gICMjI1xuXG4gICMjI1xuICAjIEZpbmRzIHRoZSBnaXZlbiBga2V5YCBpbiBgb2JqYC5cbiAgI1xuICAjIERlZmF1bHQgdmFsdWUgZm9yIGBvcHRpb25zLmdldFByb3BgLlxuICAjXG4gICMgQHBhcmFtIHsqfSBvYmpcbiAgIyBAcGFyYW0ge3N0cmluZ3xpbnRlZ2VyfSBrZXlcbiAgIyBAcmV0dXJucyB7Kn1cbiAgIyMjXG4gIEBnZXRQcm9wOiAob2JqLCBrZXkpIC0+XG4gICAgb2JqW2tleV1cblxuICAjIyNcbiAgIyBDYWxsYmFjayB1c2VkIHRvIHNldCBhIHByb3BlcnR5IG9uIGFuIG9iamVjdC5cbiAgI1xuICAjIEBjYWxsYmFjayBzZXRQcm9wXG4gICMgQHBhcmFtIHsqfSBvYmpcbiAgIyBAcGFyYW0ge3N0cmluZ3xpbnRlZ2VyfSBrZXlcbiAgIyBAcGFyYW0geyp9IHZhbHVlXG4gICMgQHJldHVybnMgeyp9XG4gICMjI1xuXG4gICMjI1xuICAjIFNldHMgdGhlIGdpdmVuIGBrZXlgIGluIGBvYmpgIHRvIGB2YWx1ZWAuXG4gICNcbiAgIyBEZWZhdWx0IHZhbHVlIGZvciBgb3B0aW9ucy5zZXRQcm9wYC5cbiAgI1xuICAjIEBwYXJhbSB7Kn0gb2JqXG4gICMgQHBhcmFtIHtzdHJpbmd8aW50ZWdlcn0ga2V5XG4gICMgQHBhcmFtIHsqfSB2YWx1ZVxuICAjIEByZXR1cm5zIHsqfSBgdmFsdWVgXG4gICMjI1xuICBAc2V0UHJvcDogKG9iaiwga2V5LCB2YWx1ZSkgLT5cbiAgICBvYmpba2V5XSA9IHZhbHVlXG5cbiAgIyMjXG4gICMgQ2FsbGJhY2sgdXNlZCB0byBtb2RpZnkgYmVoYXZpb3VyIHdoZW4gYSBnaXZlbiBwYXRoIHNlZ21lbnQgY2Fubm90IGJlIGZvdW5kLlxuICAjXG4gICMgQGNhbGxiYWNrIG5vdEZvdW5kXG4gICMgQHBhcmFtIHsqfSBvYmpcbiAgIyBAcGFyYW0ge3N0cmluZ3xpbnRlZ2VyfSBrZXlcbiAgIyBAcmV0dXJucyB7Kn1cbiAgIyMjXG5cbiAgIyMjXG4gICMgUmV0dXJucyB0aGUgdmFsdWUgdG8gdXNlIHdoZW4gYC5nZXRgIGZhaWxzIHRvIGxvY2F0ZSBhIHBvaW50ZXIgc2VnbWVudC5cbiAgI1xuICAjIERlZmF1bHQgdmFsdWUgZm9yIGBvcHRpb25zLmdldE5vdEZvdW5kYC5cbiAgI1xuICAjIEBwYXJhbSB7Kn0gb2JqXG4gICMgQHBhcmFtIHtzdHJpbmd8aW50ZWdlcn0gc2VnbWVudFxuICAjIEBwYXJhbSB7Kn0gcm9vdFxuICAjIEBwYXJhbSB7c3RyaW5nW119IHNlZ21lbnRzXG4gICMgQHBhcmFtIHtpbnRlZ2VyfSBpU2VnbWVudFxuICAjIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gICMjI1xuICBAZ2V0Tm90Rm91bmQ6IChvYmosIHNlZ21lbnQsIHJvb3QsIHNlZ21lbnRzLCBpU2VnbWVudCkgLT5cbiAgICB1bmRlZmluZWRcblxuICAjIyNcbiAgIyBSZXR1cm5zIHRoZSB2YWx1ZSB0byB1c2Ugd2hlbiBgLnNldGAgZmFpbHMgdG8gbG9jYXRlIGEgcG9pbnRlciBzZWdtZW50LlxuICAjXG4gICMgRGVmYXVsdCB2YWx1ZSBmb3IgYG9wdGlvbnMuc2V0Tm90Rm91bmRgLlxuICAjXG4gICMgQHBhcmFtIHsqfSBvYmpcbiAgIyBAcGFyYW0ge3N0cmluZ3xpbnRlZ2VyfSBzZWdtZW50XG4gICMgQHBhcmFtIHsqfSByb290XG4gICMgQHBhcmFtIHtzdHJpbmdbXX0gc2VnbWVudHNcbiAgIyBAcGFyYW0ge2ludGVnZXJ9IGlTZWdtZW50XG4gICMgQHJldHVybnMge3VuZGVmaW5lZH1cbiAgIyMjXG4gIEBzZXROb3RGb3VuZDogKG9iaiwgc2VnbWVudCwgcm9vdCwgc2VnbWVudHMsIGlTZWdtZW50KSAtPlxuICAgIGlmIHNlZ21lbnRzW2lTZWdtZW50ICsgMV0ubWF0Y2goL14oPzowfFsxLTldXFxkKnwtKSQvKVxuICAgICAgcmV0dXJuIG9ialtzZWdtZW50XSA9IFtdXG4gICAgZWxzZVxuICAgICAgcmV0dXJuIG9ialtzZWdtZW50XSA9IHt9XG5cbiAgIyMjXG4gICMgUGVyZm9ybXMgYW4gYWN0aW9uIHdoZW4gYC5kZWxgIGZhaWxzIHRvIGxvY2F0ZSBhIHBvaW50ZXIgc2VnbWVudC5cbiAgI1xuICAjIERlZmF1bHQgdmFsdWUgZm9yIGBvcHRpb25zLmRlbE5vdEZvdW5kYC5cbiAgI1xuICAjIEBwYXJhbSB7Kn0gb2JqXG4gICMgQHBhcmFtIHtzdHJpbmd8aW50ZWdlcn0gc2VnbWVudFxuICAjIEBwYXJhbSB7Kn0gcm9vdFxuICAjIEBwYXJhbSB7c3RyaW5nW119IHNlZ21lbnRzXG4gICMgQHBhcmFtIHtpbnRlZ2VyfSBpU2VnbWVudFxuICAjIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gICMjI1xuICBAZGVsTm90Rm91bmQ6IChvYmosIHNlZ21lbnQsIHJvb3QsIHNlZ21lbnRzLCBpU2VnbWVudCkgLT5cbiAgICB1bmRlZmluZWRcblxuICAjIyNcbiAgIyBSYWlzZXMgYSBKc29uUG9pbnRlckVycm9yIHdoZW4gdGhlIGdpdmVuIHBvaW50ZXIgc2VnbWVudCBpcyBub3QgZm91bmQuXG4gICNcbiAgIyBNYXkgYmUgdXNlZCBpbiBwbGFjZSBvZiB0aGUgYWJvdmUgbWV0aG9kcyB2aWEgdGhlIGBvcHRpb25zYCBhcmd1bWVudCBvZiBgLi8uZ2V0Ly5zZXQvLmhhcy8uZGVsLy5zaW1wbGVCaW5kYC5cbiAgI1xuICAjIEBwYXJhbSB7Kn0gb2JqXG4gICMgQHBhcmFtIHtzdHJpbmd8aW50ZWdlcn0gc2VnbWVudFxuICAjIEBwYXJhbSB7Kn0gcm9vdFxuICAjIEBwYXJhbSB7c3RyaW5nW119IHNlZ21lbnRzXG4gICMgQHBhcmFtIHtpbnRlZ2VyfSBpU2VnbWVudFxuICAjIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gICMjI1xuICBAZXJyb3JOb3RGb3VuZDogKG9iaiwgc2VnbWVudCwgcm9vdCwgc2VnbWVudHMsIGlTZWdtZW50KSAtPlxuICAgIHRocm93IG5ldyBKc29uUG9pbnRlckVycm9yKFwiVW5hYmxlIHRvIGZpbmQganNvbiBwYXRoOiAje0pzb25Qb2ludGVyLmNvbXBpbGUoc2VnbWVudHMuc2xpY2UoMCwgaVNlZ21lbnQrMSkpfVwiKVxuXG4gICMjI1xuICAjIFNldHMgdGhlIGxvY2F0aW9uIGluIGBvYmplY3RgLCBzcGVjaWZpZWQgYnkgYHBvaW50ZXJgLCB0byBgdmFsdWVgLlxuICAjIElmIGBwb2ludGVyYCByZWZlcnMgdG8gdGhlIHdob2xlIGRvY3VtZW50LCBgdmFsdWVgIGlzIHJldHVybmVkIHdpdGhvdXQgbW9kaWZ5aW5nIGBvYmplY3RgLFxuICAjIG90aGVyd2lzZSwgYG9iamVjdGAgbW9kaWZpZWQgYW5kIHJldHVybmVkLlxuICAjXG4gICMgQnkgZGVmYXVsdCwgaWYgYW55IGxvY2F0aW9uIHNwZWNpZmllZCBieSBgcG9pbnRlcmAgZG9lcyBub3QgZXhpc3QsIHRoZSBsb2NhdGlvbiBpcyBjcmVhdGVkIHVzaW5nIG9iamVjdHMgYW5kIGFycmF5cy5cbiAgIyBBcnJheXMgYXJlIHVzZWQgb25seSB3aGVuIHRoZSBpbW1lZGlhdGVseSBmb2xsb3dpbmcgcGF0aCBzZWdtZW50IGlzIGFuIGFycmF5IGVsZW1lbnQgYXMgZGVmaW5lZCBieSB0aGUgc3RhbmRhcmQuXG4gICNcbiAgIyBAcGFyYW0geyp9IG9ialxuICAjIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBwb2ludGVyXG4gICMgQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgIyBAcGFyYW0ge2hhc1Byb3B9IG9wdGlvbnMuaGFzUHJvcFxuICAjIEBwYXJhbSB7Z2V0UHJvcH0gb3B0aW9ucy5nZXRQcm9wXG4gICMgQHBhcmFtIHtzZXRQcm9wfSBvcHRpb25zLnNldFByb3BcbiAgIyBAcGFyYW0ge25vdEZvdW5kfSBvcHRpb25zLmdldE5vdEZvdW5kXG4gICMgQHJldHVybnMgeyp9XG4gICMjI1xuICBAc2V0OiAob2JqLCBwb2ludGVyLCB2YWx1ZSwgb3B0aW9ucykgLT5cbiAgICBpZiB0eXBlb2YgcG9pbnRlciA9PSAnc3RyaW5nJ1xuICAgICAgcG9pbnRlciA9IEpzb25Qb2ludGVyLnBhcnNlKHBvaW50ZXIpXG5cbiAgICBpZiBwb2ludGVyLmxlbmd0aCA9PSAwXG4gICAgICByZXR1cm4gdmFsdWVcblxuICAgIGhhc1Byb3AgPSBvcHRpb25zPy5oYXNQcm9wID8gSnNvblBvaW50ZXIuaGFzSnNvblByb3BcbiAgICBnZXRQcm9wID0gb3B0aW9ucz8uZ2V0UHJvcCA/IEpzb25Qb2ludGVyLmdldFByb3BcbiAgICBzZXRQcm9wID0gb3B0aW9ucz8uc2V0UHJvcCA/IEpzb25Qb2ludGVyLnNldFByb3BcbiAgICBzZXROb3RGb3VuZCA9IG9wdGlvbnM/LnNldE5vdEZvdW5kID8gSnNvblBvaW50ZXIuc2V0Tm90Rm91bmRcblxuICAgIHJvb3QgPSBvYmpcbiAgICBpU2VnbWVudCA9IDBcbiAgICBsZW4gPSBwb2ludGVyLmxlbmd0aFxuXG4gICAgd2hpbGUgaVNlZ21lbnQgIT0gbGVuXG4gICAgICBzZWdtZW50ID0gcG9pbnRlcltpU2VnbWVudF1cbiAgICAgICsraVNlZ21lbnRcblxuICAgICAgaWYgc2VnbWVudCA9PSAnLScgYW5kIEFycmF5LmlzQXJyYXkob2JqKVxuICAgICAgICBzZWdtZW50ID0gb2JqLmxlbmd0aFxuICAgICAgZWxzZSBpZiBzZWdtZW50Lm1hdGNoKC9eKD86MHxbMS05XVxcZCopJC8pIGFuZCBBcnJheS5pc0FycmF5KG9iailcbiAgICAgICAgc2VnbWVudCA9IHBhcnNlSW50KHNlZ21lbnQsIDEwKVxuXG4gICAgICBpZiBpU2VnbWVudCA9PSBsZW5cbiAgICAgICAgc2V0UHJvcChvYmosIHNlZ21lbnQsIHZhbHVlKVxuICAgICAgICBicmVha1xuICAgICAgZWxzZSBpZiBub3QgaGFzUHJvcChvYmosIHNlZ21lbnQpXG4gICAgICAgIG9iaiA9IHNldE5vdEZvdW5kKG9iaiwgc2VnbWVudCwgcm9vdCwgcG9pbnRlciwgaVNlZ21lbnQgLSAxKVxuICAgICAgZWxzZVxuICAgICAgICBvYmogPSBnZXRQcm9wKG9iaiwgc2VnbWVudClcblxuICAgIHJldHVybiByb290XG5cbiAgIyMjXG4gICMgRmluZHMgdGhlIHZhbHVlIGluIGBvYmpgIGFzIHNwZWNpZmllZCBieSBgcG9pbnRlcmBcbiAgI1xuICAjIEJ5IGRlZmF1bHQsIHJldHVybnMgdW5kZWZpbmVkIGZvciB2YWx1ZXMgd2hpY2ggY2Fubm90IGJlIGZvdW5kXG4gICNcbiAgIyBAcGFyYW0geyp9IG9ialxuICAjIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBwb2ludGVyXG4gICMgQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgIyBAcGFyYW0ge2hhc1Byb3B9IG9wdGlvbnMuaGFzUHJvcFxuICAjIEBwYXJhbSB7Z2V0UHJvcH0gb3B0aW9ucy5nZXRQcm9wXG4gICMgQHBhcmFtIHtub3RGb3VuZH0gb3B0aW9ucy5nZXROb3RGb3VuZFxuICAjIEByZXR1cm5zIHsqfVxuICAjIyNcbiAgQGdldDogKG9iaiwgcG9pbnRlciwgb3B0aW9ucykgLT5cbiAgICBpZiB0eXBlb2YgcG9pbnRlciA9PSAnc3RyaW5nJ1xuICAgICAgcG9pbnRlciA9IEpzb25Qb2ludGVyLnBhcnNlKHBvaW50ZXIpXG5cbiAgICBoYXNQcm9wID0gb3B0aW9ucz8uaGFzUHJvcCA/IEpzb25Qb2ludGVyLmhhc0pzb25Qcm9wXG4gICAgZ2V0UHJvcCA9IG9wdGlvbnM/LmdldFByb3AgPyBKc29uUG9pbnRlci5nZXRQcm9wXG4gICAgZ2V0Tm90Rm91bmQgPSBvcHRpb25zPy5nZXROb3RGb3VuZCA/IEpzb25Qb2ludGVyLmdldE5vdEZvdW5kXG5cbiAgICByb290ID0gb2JqXG4gICAgaVNlZ21lbnQgPSAwXG4gICAgbGVuID0gcG9pbnRlci5sZW5ndGhcbiAgICB3aGlsZSBpU2VnbWVudCAhPSBsZW5cbiAgICAgIHNlZ21lbnQgPSBwb2ludGVyW2lTZWdtZW50XVxuICAgICAgKytpU2VnbWVudFxuXG4gICAgICBpZiBzZWdtZW50ID09ICctJyBhbmQgQXJyYXkuaXNBcnJheShvYmopXG4gICAgICAgIHNlZ21lbnQgPSBvYmoubGVuZ3RoXG4gICAgICBlbHNlIGlmIHNlZ21lbnQubWF0Y2goL14oPzowfFsxLTldXFxkKikkLykgYW5kIEFycmF5LmlzQXJyYXkob2JqKVxuICAgICAgICBzZWdtZW50ID0gcGFyc2VJbnQoc2VnbWVudCwgMTApXG5cbiAgICAgIGlmIG5vdCBoYXNQcm9wKG9iaiwgc2VnbWVudClcbiAgICAgICAgcmV0dXJuIGdldE5vdEZvdW5kKG9iaiwgc2VnbWVudCwgcm9vdCwgcG9pbnRlciwgaVNlZ21lbnQgLSAxKVxuICAgICAgZWxzZVxuICAgICAgICBvYmogPSBnZXRQcm9wKG9iaiwgc2VnbWVudClcblxuICAgIHJldHVybiBvYmpcblxuICAjIyNcbiAgIyBSZW1vdmVzIHRoZSBsb2NhdGlvbiwgc3BlY2lmaWVkIGJ5IGBwb2ludGVyYCwgZnJvbSBgb2JqZWN0YC5cbiAgIyBSZXR1cm5zIHRoZSBtb2RpZmllZCBgb2JqZWN0YCwgb3IgdW5kZWZpbmVkIGlmIHRoZSBgcG9pbnRlcmAgaXMgZW1wdHkuXG4gICNcbiAgIyBAcGFyYW0geyp9IG9ialxuICAjIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBwb2ludGVyXG4gICMgQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgIyBAcGFyYW0ge2hhc1Byb3B9IG9wdGlvbnMuaGFzUHJvcFxuICAjIEBwYXJhbSB7Z2V0UHJvcH0gb3B0aW9ucy5nZXRQcm9wXG4gICMgQHBhcmFtIHtub3RGb3VuZH0gb3B0aW9ucy5kZWxOb3RGb3VuZFxuICAjIEByZXR1cm5zIHsqfVxuICAjIyNcbiAgQGRlbDogKG9iaiwgcG9pbnRlciwgb3B0aW9ucykgLT5cbiAgICBpZiB0eXBlb2YgcG9pbnRlciA9PSAnc3RyaW5nJ1xuICAgICAgcG9pbnRlciA9IEpzb25Qb2ludGVyLnBhcnNlKHBvaW50ZXIpXG5cbiAgICBpZiBwb2ludGVyLmxlbmd0aCA9PSAwXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG5cbiAgICBoYXNQcm9wID0gb3B0aW9ucz8uaGFzUHJvcCA/IEpzb25Qb2ludGVyLmhhc0pzb25Qcm9wXG4gICAgZ2V0UHJvcCA9IG9wdGlvbnM/LmdldFByb3AgPyBKc29uUG9pbnRlci5nZXRQcm9wXG4gICAgZGVsTm90Rm91bmQgPSBvcHRpb25zPy5kZWxOb3RGb3VuZCA/IEpzb25Qb2ludGVyLmRlbE5vdEZvdW5kXG5cbiAgICByb290ID0gb2JqXG4gICAgaVNlZ21lbnQgPSAwXG4gICAgbGVuID0gcG9pbnRlci5sZW5ndGhcbiAgICB3aGlsZSBpU2VnbWVudCAhPSBsZW5cbiAgICAgIHNlZ21lbnQgPSBwb2ludGVyW2lTZWdtZW50XVxuICAgICAgKytpU2VnbWVudFxuXG4gICAgICBpZiBzZWdtZW50ID09ICctJyBhbmQgQXJyYXkuaXNBcnJheShvYmopXG4gICAgICAgIHNlZ21lbnQgPSBvYmoubGVuZ3RoXG4gICAgICBlbHNlIGlmIHNlZ21lbnQubWF0Y2goL14oPzowfFsxLTldXFxkKikkLykgYW5kIEFycmF5LmlzQXJyYXkob2JqKVxuICAgICAgICBzZWdtZW50ID0gcGFyc2VJbnQoc2VnbWVudCwgMTApXG5cbiAgICAgIGlmIG5vdCBoYXNQcm9wKG9iaiwgc2VnbWVudClcbiAgICAgICAgZGVsTm90Rm91bmQob2JqLCBzZWdtZW50LCByb290LCBwb2ludGVyLCBpU2VnbWVudCAtIDEpXG4gICAgICAgIGJyZWFrXG4gICAgICBlbHNlIGlmIGlTZWdtZW50ID09IGxlblxuICAgICAgICBkZWxldGUgb2JqW3NlZ21lbnRdXG4gICAgICAgIGJyZWFrXG4gICAgICBlbHNlXG4gICAgICAgIG9iaiA9IGdldFByb3Aob2JqLCBzZWdtZW50KVxuXG4gICAgcmV0dXJuIHJvb3RcblxuICAjIyNcbiAgIyBSZXR1cm5zIHRydWUgaWZmIHRoZSBsb2NhdGlvbiwgc3BlY2lmaWVkIGJ5IGBwb2ludGVyYCwgZXhpc3RzIGluIGBvYmplY3RgXG4gICNcbiAgIyBAcGFyYW0geyp9IG9ialxuICAjIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBwb2ludGVyXG4gICMgQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgIyBAcGFyYW0ge2hhc1Byb3B9IG9wdGlvbnMuaGFzUHJvcFxuICAjIEBwYXJhbSB7Z2V0UHJvcH0gb3B0aW9ucy5nZXRQcm9wXG4gICMgQHJldHVybnMgeyp9XG4gICMjI1xuICBAaGFzOiAob2JqLCBwb2ludGVyLCBvcHRpb25zKSAtPlxuICAgIGlmIHR5cGVvZiBwb2ludGVyID09ICdzdHJpbmcnXG4gICAgICBwb2ludGVyID0gSnNvblBvaW50ZXIucGFyc2UocG9pbnRlcilcblxuICAgIGhhc1Byb3AgPSBvcHRpb25zPy5oYXNQcm9wID8gSnNvblBvaW50ZXIuaGFzSnNvblByb3BcbiAgICBnZXRQcm9wID0gb3B0aW9ucz8uZ2V0UHJvcCA/IEpzb25Qb2ludGVyLmdldFByb3BcblxuICAgIGlTZWdtZW50ID0gMFxuICAgIGxlbiA9IHBvaW50ZXIubGVuZ3RoXG4gICAgd2hpbGUgaVNlZ21lbnQgIT0gbGVuXG4gICAgICBzZWdtZW50ID0gcG9pbnRlcltpU2VnbWVudF1cbiAgICAgICsraVNlZ21lbnRcblxuICAgICAgaWYgc2VnbWVudCA9PSAnLScgYW5kIEFycmF5LmlzQXJyYXkob2JqKVxuICAgICAgICBzZWdtZW50ID0gb2JqLmxlbmd0aFxuICAgICAgZWxzZSBpZiBzZWdtZW50Lm1hdGNoKC9eKD86MHxbMS05XVxcZCopJC8pIGFuZCBBcnJheS5pc0FycmF5KG9iailcbiAgICAgICAgc2VnbWVudCA9IHBhcnNlSW50KHNlZ21lbnQsIDEwKVxuXG4gICAgICBpZiBub3QgaGFzUHJvcChvYmosIHNlZ21lbnQpXG4gICAgICAgIHJldHVybiBmYWxzZVxuXG4gICAgICBvYmogPSBnZXRQcm9wKG9iaiwgc2VnbWVudClcblxuICAgIHJldHVybiB0cnVlXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
