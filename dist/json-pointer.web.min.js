!function(n,t){"function"==typeof define&&define.amd?define([],t):n.JSON.pointer=t()}(this,function(){var n,t,e=function(n,t){function e(){this.constructor=n}for(var u in t)r.call(t,u)&&(n[u]=t[u]);return e.prototype=t.prototype,n.prototype=new e,n.__super__=t.prototype,n},r={}.hasOwnProperty;return t=function(n){function t(n){var e;e=t.__super__.constructor.call(this,n),this.message=e.message,this.stack=e.stack,this.name=this.constructor.name}return e(t,n),t}(Error),n=function(){function n(t,e,r){switch(arguments.length){case 3:return n.set(t,e,r);case 2:return n.get(t,e);case 1:return n.smartBind({object:t});default:return null}}return n.JsonPointerError=t,n.smartBind=function(t){var e,u,o,s,a,i,l,c,f,p,g;if(c=t.object,p=t.pointer,u=t.fragment,f=t.options,p=null!=u?u:p,o=void 0!==c,a=null!=p,s=null!=f,"string"==typeof p&&(p=this.parse(p)),l=function(n){var t,e,r,u,o,s,a;return null==n&&(n={}),t={},t.hasOwnProp=null!=(e=n.hasOwnProp)?e:f.hasOwnProp,t.getProp=null!=(r=n.getProp)?r:f.getProp,t.setProp=null!=(u=n.setProp)?u:f.setProp,t.getNotFound=null!=(o=n.getNotFound)?o:f.getNotFound,t.setNotFound=null!=(s=n.setNotFound)?s:f.setNotFound,t.delNotFound=null!=(a=n.delNotFound)?a:f.delNotFound,t},e=void 0,o&&a&&s)e=function(t){switch(arguments.length){case 1:return n.set(c,p,t,f);case 0:return n.get(c,p,f);default:return null}},e.set=function(t,e){return c=n.set(c,p,t,l(e))},e.get=function(t){return n.get(c,p,l(t))},e.has=function(t){return n.has(c,p,l(t))},e.del=function(t){return c=n.del(c,p,l(t))};else if(o&&a)e=function(t){switch(arguments.length){case 1:return n.set(c,p,t);case 0:return n.get(c,p);default:return null}},e.set=function(t,e){return c=n.set(c,p,t,e)},e.get=function(t){return n.get(c,p,t)},e.has=function(t){return n.has(c,p,t)},e.del=function(t){return c=n.del(c,p,t)};else if(o&&s)e=function(t,e){switch(arguments.length){case 2:return n.set(c,t,e,f);case 1:return n.get(c,t,f);default:return null}},e.set=function(t,e,r){return c=n.set(c,t,e,l(r))},e.get=function(t,e){return n.get(c,t,l(e))},e.has=function(t,e){return n.has(c,t,l(e))},e.del=function(t,e){return c=n.del(c,t,l(e))};else if(a&&s)e=function(t,e){switch(arguments.length){case 2:return n.set(t,p,e,f);case 1:return n.get(t,p,f);default:return null}},e.set=function(t,e,r){return n.set(t,p,e,l(r))},e.get=function(t,e){return n.get(t,p,l(e))},e.has=function(t,e){return n.has(t,p,l(e))},e.del=function(t,e){return n.del(t,p,l(e))};else if(s)e=function(t,r,u){switch(arguments.length){case 3:return n.set(t,r,u,f);case 2:return n.get(t,r,f);case 1:return e.smartBind({object:t});default:return null}},e.set=function(t,e,r,u){return n.set(t,e,r,l(u))},e.get=function(t,e,r){return n.get(t,e,l(r))},e.has=function(t,e,r){return n.has(t,e,l(r))},e.del=function(t,e,r){return n.del(t,e,l(r))};else if(o)e=function(t,e){switch(arguments.length){case 2:return n.set(c,t,e);case 1:return n.get(c,t);default:return null}},e.set=function(t,e,r){return c=n.set(c,t,e,r)},e.get=function(t,e){return n.get(c,t,e)},e.has=function(t,e){return n.has(c,t,e)},e.del=function(t,e){return c=n.del(c,t,e)};else{if(!a)return this;e=function(t,e){switch(arguments.length){case 2:return n.set(t,p,e);case 1:return n.get(t,p);default:return null}},e.set=function(t,e,r){return n.set(t,p,e,r)},e.get=function(t,e){return n.get(t,p,e)},e.has=function(t,e){return n.has(t,p,e)},e.del=function(t,e){return n.del(t,p,e)}}e.smartBind=function(t){var e;return e={},{}.hasOwnProperty.call(t,"object")?e.object=t.object:o&&(e.object=c),{}.hasOwnProperty.call(t,"pointer")?e.pointer=t.pointer:a&&(e.pointer=p),{}.hasOwnProperty.call(t,"options")?e.options=l(t.options):o&&(e.options=f),n.smartBind(e)},a&&(e.pointer=function(t){return 0===arguments.length?n.compilePointer(p):p=n.parsePointer(t)},e.fragment=function(t){return 0===arguments.length?n.compileFragment(p):p=n.parseFragment(t)}),o&&(e.object=function(n){return 0===arguments.length?c:c=n}),s&&(e.options=function(n){return 0===arguments.length?f:f=n});for(i in n)r.call(n,i)&&(g=n[i],{}.hasOwnProperty.call(e,i)||(e[i]=g));return e},n.escape=function(n){return n.replace(/~/g,"~0").replace(/\//g,"~1")},n.escapeFragment=function(t){return encodeURIComponent(n.escape(t))},n.unescape=function(n){return n.replace(/~1/g,"/").replace(/~0/g,"~")},n.unescapeFragment=function(t){return n.unescape(decodeURIComponent(t))},n.isPointer=function(n){switch(n.charAt(0)){case"":return!0;case"/":return!0;default:return!1}},n.isFragment=function(n){switch(n.substring(0,2)){case"#":return!0;case"#/":return!0;default:return!1}},n.parse=function(e){switch(e.charAt(0)){case"":return[];case"/":return e.substring(1).split("/").map(n.unescape);case"#":switch(e.charAt(1)){case"":return[];case"/":return e.substring(2).split("/").map(n.unescapeFragment);default:throw new t("Invalid JSON fragment pointer: "+e)}break;default:throw new t("Invalid JSON pointer: "+e)}},n.parsePointer=function(e){switch(e.charAt(0)){case"":return[];case"/":return e.substring(1).split("/").map(n.unescape);default:throw new t("Invalid JSON pointer: "+e)}},n.parseFragment=function(e){switch(e.substring(0,2)){case"#":return[];case"#/":return e.substring(2).split("/").map(n.unescapeFragment);default:throw new t("Invalid JSON fragment pointer: "+e)}},n.compile=function(t){return t.map(function(t){return"/"+n.escape(t)}).join("")},n.compilePointer=function(t){return t.map(function(t){return"/"+n.escape(t)}).join("")},n.compileFragment=function(t){return"#"+t.map(function(t){return"/"+n.escapeFragment(t)}).join("")},n.hasJsonProp=function(n,t){return Array.isArray(n)?"number"==typeof t&&t<n.length:"object"==typeof n?{}.hasOwnProperty.call(n,t):!1},n.hasOwnProp=function(n,t){return{}.hasOwnProperty.call(n,t)},n.hasProp=function(n,t){return t in n},n.getProp=function(n,t){return n[t]},n.setProp=function(n,t,e){return n[t]=e},n.getNotFound=function(n,t,e,r,u){},n.setNotFound=function(n,t,e,r,u){return r[u+1].match(/^(?:0|[1-9]\d*|-)$/)?n[t]=[]:n[t]={}},n.delNotFound=function(n,t,e,r,u){},n.errorNotFound=function(e,r,u,o,s){throw new t("Unable to find json path: "+n.compile(o.slice(0,s+1)))},n.set=function(t,e,r,u){var o,s,a,i,l,c,f,p,g,h,d,m;if("string"==typeof e&&(e=n.parse(e)),0===e.length)return r;for(s=null!=(l=null!=u?u.hasProp:void 0)?l:n.hasJsonProp,o=null!=(c=null!=u?u.getProp:void 0)?c:n.getProp,m=null!=(f=null!=u?u.setProp:void 0)?f:n.setProp,d=null!=(p=null!=u?u.setNotFound:void 0)?p:n.setNotFound,g=t,a=0,i=e.length;a!==i;){if(h=e[a],++a,"-"===h&&Array.isArray(t)?h=t.length:h.match(/^(?:0|[1-9]\d*)$/)&&Array.isArray(t)&&(h=parseInt(h,10)),a===i){m(t,h,r);break}t=s(t,h)?o(t,h):d(t,h,g,e,a-1)}return g},n.get=function(t,e,r){var u,o,s,a,i,l,c,f,p,g;for("string"==typeof e&&(e=n.parse(e)),s=null!=(l=null!=r?r.hasProp:void 0)?l:n.hasJsonProp,o=null!=(c=null!=r?r.getProp:void 0)?c:n.getProp,u=null!=(f=null!=r?r.getNotFound:void 0)?f:n.getNotFound,p=t,a=0,i=e.length;a!==i;){if(g=e[a],++a,"-"===g&&Array.isArray(t)?g=t.length:g.match(/^(?:0|[1-9]\d*)$/)&&Array.isArray(t)&&(g=parseInt(g,10)),!s(t,g))return u(t,g,p,e,a-1);t=o(t,g)}return t},n.del=function(t,e,r){var u,o,s,a,i,l,c,f,p,g;if("string"==typeof e&&(e=n.parse(e)),0!==e.length){for(s=null!=(l=null!=r?r.hasProp:void 0)?l:n.hasJsonProp,o=null!=(c=null!=r?r.getProp:void 0)?c:n.getProp,u=null!=(f=null!=r?r.delNotFound:void 0)?f:n.delNotFound,p=t,a=0,i=e.length;a!==i;){if(g=e[a],++a,"-"===g&&Array.isArray(t)?g=t.length:g.match(/^(?:0|[1-9]\d*)$/)&&Array.isArray(t)&&(g=parseInt(g,10)),!s(t,g)){u(t,g,p,e,a-1);break}if(a===i){delete t[g];break}t=o(t,g)}return p}},n.has=function(t,e,r){var u,o,s,a,i,l,c;for("string"==typeof e&&(e=n.parse(e)),o=null!=(i=null!=r?r.hasProp:void 0)?i:n.hasJsonProp,u=null!=(l=null!=r?r.getProp:void 0)?l:n.getProp,s=0,a=e.length;s!==a;){if(c=e[s],++s,"-"===c&&Array.isArray(t)?c=t.length:c.match(/^(?:0|[1-9]\d*)$/)&&Array.isArray(t)&&(c=parseInt(c,10)),!o(t,c))return!1;t=u(t,c)}return!0},n}()});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzb24tcG9pbnRlci53ZWIuanMiLCJqc29uLXBvaW50ZXIuY29mZmVlIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZGVmaW5lIiwiYW1kIiwiSlNPTiIsInBvaW50ZXIiLCJ0aGlzIiwiSnNvblBvaW50ZXIiLCJKc29uUG9pbnRlckVycm9yIiwiZXh0ZW5kIiwiY2hpbGQiLCJwYXJlbnQiLCJjdG9yIiwiY29uc3RydWN0b3IiLCJrZXkiLCJoYXNQcm9wMSIsImNhbGwiLCJwcm90b3R5cGUiLCJfX3N1cGVyX18iLCJoYXNPd25Qcm9wZXJ0eSIsInN1cGVyQ2xhc3MiLCJtZXNzYWdlIiwiYmFzZSIsInN0YWNrIiwibmFtZSIsIkVycm9yIiwib2JqZWN0IiwidmFsdWUiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJzZXQiLCJnZXQiLCJzbWFydEJpbmQiLCJhcmciLCJhcGkiLCJmcmFnIiwiaGFzT2JqIiwiaGFzT3B0IiwiaGFzUHRyIiwibWVyZ2VPcHRpb25zIiwib2JqIiwib3B0IiwicHRyIiwidmFsIiwiZnJhZ21lbnQiLCJvcHRpb25zIiwicGFyc2UiLCJvdmVycmlkZSIsIm8iLCJyZWYiLCJyZWYxIiwicmVmMiIsInJlZjMiLCJyZWY0IiwicmVmNSIsImhhc093blByb3AiLCJnZXRQcm9wIiwic2V0UHJvcCIsImdldE5vdEZvdW5kIiwic2V0Tm90Rm91bmQiLCJkZWxOb3RGb3VuZCIsImhhcyIsImRlbCIsImNvbXBpbGVQb2ludGVyIiwicGFyc2VQb2ludGVyIiwiY29tcGlsZUZyYWdtZW50IiwicGFyc2VGcmFnbWVudCIsImVzY2FwZSIsInNlZ21lbnQiLCJyZXBsYWNlIiwiZXNjYXBlRnJhZ21lbnQiLCJlbmNvZGVVUklDb21wb25lbnQiLCJ1bmVzY2FwZSIsInVuZXNjYXBlRnJhZ21lbnQiLCJkZWNvZGVVUklDb21wb25lbnQiLCJpc1BvaW50ZXIiLCJzdHIiLCJjaGFyQXQiLCJpc0ZyYWdtZW50Iiwic3Vic3RyaW5nIiwic3BsaXQiLCJtYXAiLCJjb21waWxlIiwic2VnbWVudHMiLCJqb2luIiwiaGFzSnNvblByb3AiLCJBcnJheSIsImlzQXJyYXkiLCJoYXNQcm9wIiwiaVNlZ21lbnQiLCJtYXRjaCIsImVycm9yTm90Rm91bmQiLCJzbGljZSIsImxlbiIsInBhcnNlSW50Il0sIm1hcHBpbmdzIjoiQ0FBRSxTQUFTQSxFQUFNQyxHQUNPLGtCQUFYQyxTQUF5QkEsT0FBT0MsSUFDekNELFVBQVdELEdBRVhELEVBQUtJLEtBQUtDLFFBQVVKLEtBRXRCSyxLQUFNLFdBQ1IsR0FBSUMsR0NQSkMsRUFBQUMsRUFBQSxTQUFBQyxFQUFBQyxHQUFBLFFBQUFDLEtBQUFOLEtBQUFPLFlBQUFILEVBQUEsSUFBQSxHQUFBSSxLQUFBSCxHQUFBSSxFQUFBQyxLQUFBTCxFQUFBRyxLQUFBSixFQUFBSSxHQUFBSCxFQUFBRyxHQUFBLE9BQUFGLEdBQUFLLFVBQUFOLEVBQUFNLFVBQUFQLEVBQUFPLFVBQUEsR0FBQUwsR0FBQUYsRUFBQVEsVUFBQVAsRUFBQU0sVUFBQVAsR0RTRUssS0FBY0ksY0FpN0JoQixPQzE3Qk1YLEdBQUEsU0FBQVksR0FDUyxRQUFBWixHQUFDYSxHQUNaLEdBQUFDLEVBQUFBLEdBQU9kLEVBQUFVLFVBQUFMLFlBQUFHLEtBQUFWLEtBQU1lLEdBRWJmLEtBQUNlLFFBQVVDLEVBQUtELFFBQ2hCZixLQUFDaUIsTUFBUUQsRUFBS0MsTUFDZGpCLEtBQUNrQixLQUFPbEIsS0FBQ08sWUFBWVcsS0RnQnZCLE1BVkFmLEdBQU9ELEVBQWtCWSxHQVVsQlosR0N0QnNCaUIsT0FRekJsQixFQUFBLFdBV1MsUUFBQUEsR0FBQ21CLEVBQVFyQixFQUFTc0IsR0FDdEIsT0FBT0MsVUFBVUMsUUFBakIsSUFDQSxHRHFCSCxNQ3JCVXRCLEdBQVl1QixJQUFJSixFQUFRckIsRUFBU3NCLEVBRHhDLEtBRUEsR0RzQkgsTUN0QlVwQixHQUFZd0IsSUFBSUwsRUFBUXJCLEVBRi9CLEtBR0EsR0R1QkgsTUN2QlVFLEdBQVl5QixXQUFZTixPQUFRQSxHQUh2QyxT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bEIsQ0FTRSxHQVJBekIsRUFBVS9ELEVBQVFvRixLQUNoQkEsRUFFWSxNQUFYckIsR0FBbUJrQixNQUFNQyxRQUFRL0MsR0FDbEM0QixFQUFVNUIsRUFBSVgsT0FDUnVDLEVBQVFzQixNQUFNLHFCQUF3QkosTUFBTUMsUUFBUS9DLEtBQzFENEIsRUFBVTBCLFNBQVMxQixFQUFTLE1BRXZCb0IsRUFBUWhELEVBQUs0QixHQUNsQixPQUFPLENBRVQ1QixHQUFNZ0IsRUFBUWhCLEVBQUs0QixHQUVyQixPQUFPLEdEd09GN0QiLCJmaWxlIjoianNvbi1wb2ludGVyLndlYi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyI7KGZ1bmN0aW9uKHJvb3QsIGZhY3RvcnkpIHtcbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShbXSwgZmFjdG9yeSk7XG4gIH0gZWxzZSB7XG4gICAgcm9vdC5KU09OLnBvaW50ZXIgPSBmYWN0b3J5KCk7XG4gIH1cbn0odGhpcywgZnVuY3Rpb24gKCkge1xudmFyIEpzb25Qb2ludGVyLCBKc29uUG9pbnRlckVycm9yLFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AxLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wMSA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5Kc29uUG9pbnRlckVycm9yID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKEpzb25Qb2ludGVyRXJyb3IsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIEpzb25Qb2ludGVyRXJyb3IobWVzc2FnZSkge1xuICAgIHZhciBiYXNlO1xuICAgIGJhc2UgPSBKc29uUG9pbnRlckVycm9yLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIG1lc3NhZ2UpO1xuICAgIHRoaXMubWVzc2FnZSA9IGJhc2UubWVzc2FnZTtcbiAgICB0aGlzLnN0YWNrID0gYmFzZS5zdGFjaztcbiAgICB0aGlzLm5hbWUgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7XG4gIH1cblxuICByZXR1cm4gSnNvblBvaW50ZXJFcnJvcjtcblxufSkoRXJyb3IpO1xuXG5Kc29uUG9pbnRlciA9IChmdW5jdGlvbigpIHtcbiAgSnNvblBvaW50ZXIuSnNvblBvaW50ZXJFcnJvciA9IEpzb25Qb2ludGVyRXJyb3I7XG5cblxuICAvKlxuICAgKiBDb252ZW5pZW5jZSBmdW5jdGlvbiBmb3IgY2hvb3NpbmcgYmV0d2VlbiBgLnNtYXJ0QmluZGAsIGAuZ2V0YCwgYW5kIGAuc2V0YCwgZGVwZW5kaW5nIG9uIHRoZSBudW1iZXIgb2YgYXJndW1lbnRzLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IG9iamVjdFxuICAgKiBAcGFyYW0ge3N0cmluZ30gcG9pbnRlclxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEByZXR1cm5zIHsqfSBldmFsdWF0aW9uIG9mIHRoZSBwcm94aWVkIG1ldGhvZFxuICAgKi9cblxuICBmdW5jdGlvbiBKc29uUG9pbnRlcihvYmplY3QsIHBvaW50ZXIsIHZhbHVlKSB7XG4gICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICBjYXNlIDM6XG4gICAgICAgIHJldHVybiBKc29uUG9pbnRlci5zZXQob2JqZWN0LCBwb2ludGVyLCB2YWx1ZSk7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIHJldHVybiBKc29uUG9pbnRlci5nZXQob2JqZWN0LCBwb2ludGVyKTtcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgcmV0dXJuIEpzb25Qb2ludGVyLnNtYXJ0QmluZCh7XG4gICAgICAgICAgb2JqZWN0OiBvYmplY3RcbiAgICAgICAgfSk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuXG4gIC8qXG4gICAqIENyZWF0ZXMgYSBjbG9uZSBvZiB0aGUgYXBpLCB3aXRoIGAuLy5nZXQvLmhhcy8uc2V0Ly5kZWwvLnNtYXJ0QmluZGAgbWV0aG9kIHNpZ25hdHVyZXMgYWRqdXN0ZWQuXG4gICAqIFRoZSBzbWFydEJpbmQgbWV0aG9kIGlzIGN1bXVsYXRpdmUsIG1lYW5pbmcgdGhhdCBgLnNtYXJ0QmluZCh7IG9iamVjdDogeH0pLnNtYXJ0QmluZCh7IHBvaW50ZXI6IHkgfSlgIHdpbGwgYmVoYXZlIGFzIGV4cGVjdGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gYmluZGluZ3NcbiAgICogQHBhcmFtIHsqfSBiaW5kaW5ncy5vYmplY3RcbiAgICogQHBhcmFtIHtzdHJpbmd8c3RyaW5nW119IGJpbmRpbmdzLnBvaW50ZXJcbiAgICogQHBhcmFtIHtPYmplY3R9IGJpbmRpbmdzLm9wdGlvbnNcbiAgICogQHJldHVybnMge0pzb25Qb2ludGVyfVxuICAgKi9cblxuICBKc29uUG9pbnRlci5zbWFydEJpbmQgPSBmdW5jdGlvbihhcmcpIHtcbiAgICB2YXIgYXBpLCBmcmFnLCBoYXNPYmosIGhhc09wdCwgaGFzUHRyLCBrZXksIG1lcmdlT3B0aW9ucywgb2JqLCBvcHQsIHB0ciwgdmFsO1xuICAgIG9iaiA9IGFyZy5vYmplY3QsIHB0ciA9IGFyZy5wb2ludGVyLCBmcmFnID0gYXJnLmZyYWdtZW50LCBvcHQgPSBhcmcub3B0aW9ucztcbiAgICBwdHIgPSBmcmFnICE9IG51bGwgPyBmcmFnIDogcHRyO1xuICAgIGhhc09iaiA9IG9iaiAhPT0gdm9pZCAwO1xuICAgIGhhc1B0ciA9IHB0ciAhPSBudWxsO1xuICAgIGhhc09wdCA9IG9wdCAhPSBudWxsO1xuICAgIGlmICh0eXBlb2YgcHRyID09PSAnc3RyaW5nJykge1xuICAgICAgcHRyID0gdGhpcy5wYXJzZShwdHIpO1xuICAgIH1cbiAgICBtZXJnZU9wdGlvbnMgPSBmdW5jdGlvbihvdmVycmlkZSkge1xuICAgICAgdmFyIG8sIHJlZiwgcmVmMSwgcmVmMiwgcmVmMywgcmVmNCwgcmVmNTtcbiAgICAgIGlmIChvdmVycmlkZSA9PSBudWxsKSB7XG4gICAgICAgIG92ZXJyaWRlID0ge307XG4gICAgICB9XG4gICAgICBvID0ge307XG4gICAgICBvLmhhc093blByb3AgPSAocmVmID0gb3ZlcnJpZGUuaGFzT3duUHJvcCkgIT0gbnVsbCA/IHJlZiA6IG9wdC5oYXNPd25Qcm9wO1xuICAgICAgby5nZXRQcm9wID0gKHJlZjEgPSBvdmVycmlkZS5nZXRQcm9wKSAhPSBudWxsID8gcmVmMSA6IG9wdC5nZXRQcm9wO1xuICAgICAgby5zZXRQcm9wID0gKHJlZjIgPSBvdmVycmlkZS5zZXRQcm9wKSAhPSBudWxsID8gcmVmMiA6IG9wdC5zZXRQcm9wO1xuICAgICAgby5nZXROb3RGb3VuZCA9IChyZWYzID0gb3ZlcnJpZGUuZ2V0Tm90Rm91bmQpICE9IG51bGwgPyByZWYzIDogb3B0LmdldE5vdEZvdW5kO1xuICAgICAgby5zZXROb3RGb3VuZCA9IChyZWY0ID0gb3ZlcnJpZGUuc2V0Tm90Rm91bmQpICE9IG51bGwgPyByZWY0IDogb3B0LnNldE5vdEZvdW5kO1xuICAgICAgby5kZWxOb3RGb3VuZCA9IChyZWY1ID0gb3ZlcnJpZGUuZGVsTm90Rm91bmQpICE9IG51bGwgPyByZWY1IDogb3B0LmRlbE5vdEZvdW5kO1xuICAgICAgcmV0dXJuIG87XG4gICAgfTtcbiAgICBhcGkgPSB2b2lkIDA7XG4gICAgaWYgKGhhc09iaiAmJiBoYXNQdHIgJiYgaGFzT3B0KSB7XG4gICAgICBhcGkgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gSnNvblBvaW50ZXIuc2V0KG9iaiwgcHRyLCB2YWx1ZSwgb3B0KTtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gSnNvblBvaW50ZXIuZ2V0KG9iaiwgcHRyLCBvcHQpO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGFwaS5zZXQgPSBmdW5jdGlvbih2YWx1ZSwgb3ZlcnJpZGUpIHtcbiAgICAgICAgcmV0dXJuIG9iaiA9IEpzb25Qb2ludGVyLnNldChvYmosIHB0ciwgdmFsdWUsIG1lcmdlT3B0aW9ucyhvdmVycmlkZSkpO1xuICAgICAgfTtcbiAgICAgIGFwaS5nZXQgPSBmdW5jdGlvbihvdmVycmlkZSkge1xuICAgICAgICByZXR1cm4gSnNvblBvaW50ZXIuZ2V0KG9iaiwgcHRyLCBtZXJnZU9wdGlvbnMob3ZlcnJpZGUpKTtcbiAgICAgIH07XG4gICAgICBhcGkuaGFzID0gZnVuY3Rpb24ob3ZlcnJpZGUpIHtcbiAgICAgICAgcmV0dXJuIEpzb25Qb2ludGVyLmhhcyhvYmosIHB0ciwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSk7XG4gICAgICB9O1xuICAgICAgYXBpLmRlbCA9IGZ1bmN0aW9uKG92ZXJyaWRlKSB7XG4gICAgICAgIHJldHVybiBvYmogPSBKc29uUG9pbnRlci5kZWwob2JqLCBwdHIsIG1lcmdlT3B0aW9ucyhvdmVycmlkZSkpO1xuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKGhhc09iaiAmJiBoYXNQdHIpIHtcbiAgICAgIGFwaSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJldHVybiBKc29uUG9pbnRlci5zZXQob2JqLCBwdHIsIHZhbHVlKTtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gSnNvblBvaW50ZXIuZ2V0KG9iaiwgcHRyKTtcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBhcGkuc2V0ID0gZnVuY3Rpb24odmFsdWUsIG92ZXJyaWRlKSB7XG4gICAgICAgIHJldHVybiBvYmogPSBKc29uUG9pbnRlci5zZXQob2JqLCBwdHIsIHZhbHVlLCBvdmVycmlkZSk7XG4gICAgICB9O1xuICAgICAgYXBpLmdldCA9IGZ1bmN0aW9uKG92ZXJyaWRlKSB7XG4gICAgICAgIHJldHVybiBKc29uUG9pbnRlci5nZXQob2JqLCBwdHIsIG92ZXJyaWRlKTtcbiAgICAgIH07XG4gICAgICBhcGkuaGFzID0gZnVuY3Rpb24ob3ZlcnJpZGUpIHtcbiAgICAgICAgcmV0dXJuIEpzb25Qb2ludGVyLmhhcyhvYmosIHB0ciwgb3ZlcnJpZGUpO1xuICAgICAgfTtcbiAgICAgIGFwaS5kZWwgPSBmdW5jdGlvbihvdmVycmlkZSkge1xuICAgICAgICByZXR1cm4gb2JqID0gSnNvblBvaW50ZXIuZGVsKG9iaiwgcHRyLCBvdmVycmlkZSk7XG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAoaGFzT2JqICYmIGhhc09wdCkge1xuICAgICAgYXBpID0gZnVuY3Rpb24ocHRyLCB2YWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZXR1cm4gSnNvblBvaW50ZXIuc2V0KG9iaiwgcHRyLCB2YWx1ZSwgb3B0KTtcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gSnNvblBvaW50ZXIuZ2V0KG9iaiwgcHRyLCBvcHQpO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGFwaS5zZXQgPSBmdW5jdGlvbihwdHIsIHZhbHVlLCBvdmVycmlkZSkge1xuICAgICAgICByZXR1cm4gb2JqID0gSnNvblBvaW50ZXIuc2V0KG9iaiwgcHRyLCB2YWx1ZSwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSk7XG4gICAgICB9O1xuICAgICAgYXBpLmdldCA9IGZ1bmN0aW9uKHB0ciwgb3ZlcnJpZGUpIHtcbiAgICAgICAgcmV0dXJuIEpzb25Qb2ludGVyLmdldChvYmosIHB0ciwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSk7XG4gICAgICB9O1xuICAgICAgYXBpLmhhcyA9IGZ1bmN0aW9uKHB0ciwgb3ZlcnJpZGUpIHtcbiAgICAgICAgcmV0dXJuIEpzb25Qb2ludGVyLmhhcyhvYmosIHB0ciwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSk7XG4gICAgICB9O1xuICAgICAgYXBpLmRlbCA9IGZ1bmN0aW9uKHB0ciwgb3ZlcnJpZGUpIHtcbiAgICAgICAgcmV0dXJuIG9iaiA9IEpzb25Qb2ludGVyLmRlbChvYmosIHB0ciwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSk7XG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAoaGFzUHRyICYmIGhhc09wdCkge1xuICAgICAgYXBpID0gZnVuY3Rpb24ob2JqLCB2YWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZXR1cm4gSnNvblBvaW50ZXIuc2V0KG9iaiwgcHRyLCB2YWx1ZSwgb3B0KTtcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gSnNvblBvaW50ZXIuZ2V0KG9iaiwgcHRyLCBvcHQpO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGFwaS5zZXQgPSBmdW5jdGlvbihvYmosIHZhbHVlLCBvdmVycmlkZSkge1xuICAgICAgICByZXR1cm4gSnNvblBvaW50ZXIuc2V0KG9iaiwgcHRyLCB2YWx1ZSwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSk7XG4gICAgICB9O1xuICAgICAgYXBpLmdldCA9IGZ1bmN0aW9uKG9iaiwgb3ZlcnJpZGUpIHtcbiAgICAgICAgcmV0dXJuIEpzb25Qb2ludGVyLmdldChvYmosIHB0ciwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSk7XG4gICAgICB9O1xuICAgICAgYXBpLmhhcyA9IGZ1bmN0aW9uKG9iaiwgb3ZlcnJpZGUpIHtcbiAgICAgICAgcmV0dXJuIEpzb25Qb2ludGVyLmhhcyhvYmosIHB0ciwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSk7XG4gICAgICB9O1xuICAgICAgYXBpLmRlbCA9IGZ1bmN0aW9uKG9iaiwgb3ZlcnJpZGUpIHtcbiAgICAgICAgcmV0dXJuIEpzb25Qb2ludGVyLmRlbChvYmosIHB0ciwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSk7XG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAoaGFzT3B0KSB7XG4gICAgICBhcGkgPSBmdW5jdGlvbihvYmosIHB0ciwgdmFsdWUpIHtcbiAgICAgICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmV0dXJuIEpzb25Qb2ludGVyLnNldChvYmosIHB0ciwgdmFsdWUsIG9wdCk7XG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIEpzb25Qb2ludGVyLmdldChvYmosIHB0ciwgb3B0KTtcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gYXBpLnNtYXJ0QmluZCh7XG4gICAgICAgICAgICAgIG9iamVjdDogb2JqXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBhcGkuc2V0ID0gZnVuY3Rpb24ob2JqLCBwdHIsIHZhbHVlLCBvdmVycmlkZSkge1xuICAgICAgICByZXR1cm4gSnNvblBvaW50ZXIuc2V0KG9iaiwgcHRyLCB2YWx1ZSwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSk7XG4gICAgICB9O1xuICAgICAgYXBpLmdldCA9IGZ1bmN0aW9uKG9iaiwgcHRyLCBvdmVycmlkZSkge1xuICAgICAgICByZXR1cm4gSnNvblBvaW50ZXIuZ2V0KG9iaiwgcHRyLCBtZXJnZU9wdGlvbnMob3ZlcnJpZGUpKTtcbiAgICAgIH07XG4gICAgICBhcGkuaGFzID0gZnVuY3Rpb24ob2JqLCBwdHIsIG92ZXJyaWRlKSB7XG4gICAgICAgIHJldHVybiBKc29uUG9pbnRlci5oYXMob2JqLCBwdHIsIG1lcmdlT3B0aW9ucyhvdmVycmlkZSkpO1xuICAgICAgfTtcbiAgICAgIGFwaS5kZWwgPSBmdW5jdGlvbihvYmosIHB0ciwgb3ZlcnJpZGUpIHtcbiAgICAgICAgcmV0dXJuIEpzb25Qb2ludGVyLmRlbChvYmosIHB0ciwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSk7XG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAoaGFzT2JqKSB7XG4gICAgICBhcGkgPSBmdW5jdGlvbihwdHIsIHZhbHVlKSB7XG4gICAgICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiBKc29uUG9pbnRlci5zZXQob2JqLCBwdHIsIHZhbHVlKTtcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gSnNvblBvaW50ZXIuZ2V0KG9iaiwgcHRyKTtcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBhcGkuc2V0ID0gZnVuY3Rpb24ocHRyLCB2YWx1ZSwgb3ZlcnJpZGUpIHtcbiAgICAgICAgcmV0dXJuIG9iaiA9IEpzb25Qb2ludGVyLnNldChvYmosIHB0ciwgdmFsdWUsIG92ZXJyaWRlKTtcbiAgICAgIH07XG4gICAgICBhcGkuZ2V0ID0gZnVuY3Rpb24ocHRyLCBvdmVycmlkZSkge1xuICAgICAgICByZXR1cm4gSnNvblBvaW50ZXIuZ2V0KG9iaiwgcHRyLCBvdmVycmlkZSk7XG4gICAgICB9O1xuICAgICAgYXBpLmhhcyA9IGZ1bmN0aW9uKHB0ciwgb3ZlcnJpZGUpIHtcbiAgICAgICAgcmV0dXJuIEpzb25Qb2ludGVyLmhhcyhvYmosIHB0ciwgb3ZlcnJpZGUpO1xuICAgICAgfTtcbiAgICAgIGFwaS5kZWwgPSBmdW5jdGlvbihwdHIsIG92ZXJyaWRlKSB7XG4gICAgICAgIHJldHVybiBvYmogPSBKc29uUG9pbnRlci5kZWwob2JqLCBwdHIsIG92ZXJyaWRlKTtcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmIChoYXNQdHIpIHtcbiAgICAgIGFwaSA9IGZ1bmN0aW9uKG9iaiwgdmFsdWUpIHtcbiAgICAgICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIEpzb25Qb2ludGVyLnNldChvYmosIHB0ciwgdmFsdWUpO1xuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJldHVybiBKc29uUG9pbnRlci5nZXQob2JqLCBwdHIpO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGFwaS5zZXQgPSBmdW5jdGlvbihvYmosIHZhbHVlLCBvdmVycmlkZSkge1xuICAgICAgICByZXR1cm4gSnNvblBvaW50ZXIuc2V0KG9iaiwgcHRyLCB2YWx1ZSwgb3ZlcnJpZGUpO1xuICAgICAgfTtcbiAgICAgIGFwaS5nZXQgPSBmdW5jdGlvbihvYmosIG92ZXJyaWRlKSB7XG4gICAgICAgIHJldHVybiBKc29uUG9pbnRlci5nZXQob2JqLCBwdHIsIG92ZXJyaWRlKTtcbiAgICAgIH07XG4gICAgICBhcGkuaGFzID0gZnVuY3Rpb24ob2JqLCBvdmVycmlkZSkge1xuICAgICAgICByZXR1cm4gSnNvblBvaW50ZXIuaGFzKG9iaiwgcHRyLCBvdmVycmlkZSk7XG4gICAgICB9O1xuICAgICAgYXBpLmRlbCA9IGZ1bmN0aW9uKG9iaiwgb3ZlcnJpZGUpIHtcbiAgICAgICAgcmV0dXJuIEpzb25Qb2ludGVyLmRlbChvYmosIHB0ciwgb3ZlcnJpZGUpO1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGFwaS5zbWFydEJpbmQgPSBmdW5jdGlvbihvdmVycmlkZSkge1xuICAgICAgdmFyIG87XG4gICAgICBvID0ge307XG4gICAgICBpZiAoe30uaGFzT3duUHJvcGVydHkuY2FsbChvdmVycmlkZSwgJ29iamVjdCcpKSB7XG4gICAgICAgIG8ub2JqZWN0ID0gb3ZlcnJpZGUub2JqZWN0O1xuICAgICAgfSBlbHNlIGlmIChoYXNPYmopIHtcbiAgICAgICAgby5vYmplY3QgPSBvYmo7XG4gICAgICB9XG4gICAgICBpZiAoe30uaGFzT3duUHJvcGVydHkuY2FsbChvdmVycmlkZSwgJ3BvaW50ZXInKSkge1xuICAgICAgICBvLnBvaW50ZXIgPSBvdmVycmlkZS5wb2ludGVyO1xuICAgICAgfSBlbHNlIGlmIChoYXNQdHIpIHtcbiAgICAgICAgby5wb2ludGVyID0gcHRyO1xuICAgICAgfVxuICAgICAgaWYgKHt9Lmhhc093blByb3BlcnR5LmNhbGwob3ZlcnJpZGUsICdvcHRpb25zJykpIHtcbiAgICAgICAgby5vcHRpb25zID0gbWVyZ2VPcHRpb25zKG92ZXJyaWRlLm9wdGlvbnMpO1xuICAgICAgfSBlbHNlIGlmIChoYXNPYmopIHtcbiAgICAgICAgby5vcHRpb25zID0gb3B0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIEpzb25Qb2ludGVyLnNtYXJ0QmluZChvKTtcbiAgICB9O1xuICAgIGlmIChoYXNQdHIpIHtcblxuICAgICAgLypcbiAgICAgICAqIGdldC9zZXQgYm91bmQgcG9pbnRlciB2YWx1ZVxuICAgICAgICpcbiAgICAgICAqIE9ubHkgYXZhaWxhYmxlIHdoZW4gcG9pbnRlciBoYXMgYmVlbiBib3VuZFxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAgICogQHJldHVybnMgc3RyaW5nW10gc2VnbWVudHNcbiAgICAgICAqL1xuICAgICAgYXBpLnBvaW50ZXIgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiBKc29uUG9pbnRlci5jb21waWxlUG9pbnRlcihwdHIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBwdHIgPSBKc29uUG9pbnRlci5wYXJzZVBvaW50ZXIodmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvKlxuICAgICAgICogZ2V0L3NldCBib3VuZCBwb2ludGVyIHZhbHVlIGFzIGZyYWdtZW50XG4gICAgICAgKlxuICAgICAgICogT25seSBhdmFpbGFibGUgd2hlbiBwb2ludGVyIGhhcyBiZWVuIGJvdW5kXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICAgKiBAcmV0dXJucyBzdHJpbmdbXSBzZWdtZW50c1xuICAgICAgICovXG4gICAgICBhcGkuZnJhZ21lbnQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiBKc29uUG9pbnRlci5jb21waWxlRnJhZ21lbnQocHRyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gcHRyID0gSnNvblBvaW50ZXIucGFyc2VGcmFnbWVudCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICAgIGlmIChoYXNPYmopIHtcblxuICAgICAgLypcbiAgICAgICAqIGdldC9zZXQgYm91bmQgb2JqZWN0XG4gICAgICAgKlxuICAgICAgICogT25seSBhdmFpbGFibGUgd2hlbiBvYmplY3QgaGFzIGJlZW4gYm91bmRcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAgICAgKiBAcmV0dXJucyB7Kn0gYm91bmQgb2JqZWN0XG4gICAgICAgKi9cbiAgICAgIGFwaS5vYmplY3QgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIG9iaiA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoaGFzT3B0KSB7XG5cbiAgICAgIC8qXG4gICAgICAgKiBnZXQvc2V0IGJvdW5kIG9wdGlvbnNcbiAgICAgICAqXG4gICAgICAgKiBPbmx5IGF2YWlsYWJsZSB3aGVuIG9wdGlvbnMgaGFzIGJlZW4gYm91bmRcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAgICAgKiBAcmV0dXJucyB7Kn0gYm91bmQgb3B0aW9uc1xuICAgICAgICovXG4gICAgICBhcGkub3B0aW9ucyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIG9wdDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gb3B0ID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICAgIGZvciAoa2V5IGluIEpzb25Qb2ludGVyKSB7XG4gICAgICBpZiAoIWhhc1Byb3AxLmNhbGwoSnNvblBvaW50ZXIsIGtleSkpIGNvbnRpbnVlO1xuICAgICAgdmFsID0gSnNvblBvaW50ZXJba2V5XTtcbiAgICAgIGlmICghe30uaGFzT3duUHJvcGVydHkuY2FsbChhcGksIGtleSkpIHtcbiAgICAgICAgYXBpW2tleV0gPSB2YWw7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhcGk7XG4gIH07XG5cblxuICAvKlxuICAgKiBFc2NhcGVzIHRoZSBnaXZlbiBwYXRoIHNlZ21lbnQgYXMgZGVzY3JpYmVkIGJ5IFJGQzY5MDEuXG4gICAqXG4gICAqIE5vdGFibHksIGAnfidgJ3MgYXJlIHJlcGxhY2VkIHdpdGggYCd+MCdgIGFuZCBgJy8nYCdzIGFyZSByZXBsYWNlZCB3aXRoIGAnfjEnYC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNlZ21lbnRcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG5cbiAgSnNvblBvaW50ZXIuZXNjYXBlID0gZnVuY3Rpb24oc2VnbWVudCkge1xuICAgIHJldHVybiBzZWdtZW50LnJlcGxhY2UoL34vZywgJ34wJykucmVwbGFjZSgvXFwvL2csICd+MScpO1xuICB9O1xuXG5cbiAgLypcbiAgICogRXNjYXBlcyB0aGUgZ2l2ZW4gcGF0aCBmcmFnbWVudCBzZWdtZW50IGFzIGRlc2NyaWJlZCBieSBSRkM2OTAxLlxuICAgKlxuICAgKiBOb3RhYmx5LCBgJ34nYCdzIGFyZSByZXBsYWNlZCB3aXRoIGAnfjAnYCBhbmQgYCcvJ2AncyBhcmUgcmVwbGFjZWQgd2l0aCBgJ34xJ2AgYW5kIGZpbmFsbHkgdGhlIHN0cmluZyBpcyBVUkkgZW5jb2RlZC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNlZ21lbnRcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG5cbiAgSnNvblBvaW50ZXIuZXNjYXBlRnJhZ21lbnQgPSBmdW5jdGlvbihzZWdtZW50KSB7XG4gICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChKc29uUG9pbnRlci5lc2NhcGUoc2VnbWVudCkpO1xuICB9O1xuXG5cbiAgLypcbiAgICogVW4tRXNjYXBlcyB0aGUgZ2l2ZW4gcGF0aCBzZWdtZW50LCByZXZlcnNpbmcgdGhlIGFjdGlvbnMgb2YgYC5lc2NhcGVgLlxuICAgKlxuICAgKiBOb3RhYmx5LCBgJ34xJ2AncyBhcmUgcmVwbGFjZWQgd2l0aCBgJy8nYCBhbmQgYCd+MCdgJ3MgYXJlIHJlcGxhY2VkIHdpdGggYCd+J2AuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzZWdtZW50XG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuXG4gIEpzb25Qb2ludGVyLnVuZXNjYXBlID0gZnVuY3Rpb24oc2VnbWVudCkge1xuICAgIHJldHVybiBzZWdtZW50LnJlcGxhY2UoL34xL2csICcvJykucmVwbGFjZSgvfjAvZywgJ34nKTtcbiAgfTtcblxuXG4gIC8qXG4gICAqIFVuLUVzY2FwZXMgdGhlIGdpdmVuIHBhdGggZnJhZ21lbnQgc2VnbWVudCwgcmV2ZXJzaW5nIHRoZSBhY3Rpb25zIG9mIGAuZXNjYXBlRnJhZ21lbnRgLlxuICAgKlxuICAgKiBOb3RhYmx5LCB0aGUgc3RyaW5nIGlzIFVSSSBkZWNvZGVkIGFuZCB0aGVuIGAnfjEnYCdzIGFyZSByZXBsYWNlZCB3aXRoIGAnLydgIGFuZCBgJ34wJ2AncyBhcmUgcmVwbGFjZWQgd2l0aCBgJ34nYC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNlZ21lbnRcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG5cbiAgSnNvblBvaW50ZXIudW5lc2NhcGVGcmFnbWVudCA9IGZ1bmN0aW9uKHNlZ21lbnQpIHtcbiAgICByZXR1cm4gSnNvblBvaW50ZXIudW5lc2NhcGUoZGVjb2RlVVJJQ29tcG9uZW50KHNlZ21lbnQpKTtcbiAgfTtcblxuXG4gIC8qXG4gICAqIFJldHVybnMgdHJ1ZSBpZmYgYHN0cmAgaXMgYSB2YWxpZCBqc29uIHBvaW50ZXIgdmFsdWVcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0clxuICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAgICovXG5cbiAgSnNvblBvaW50ZXIuaXNQb2ludGVyID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgc3dpdGNoIChzdHIuY2hhckF0KDApKSB7XG4gICAgICBjYXNlICcnOlxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIGNhc2UgJy8nOlxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG5cblxuICAvKlxuICAgKiBSZXR1cm5zIHRydWUgaWZmIGBzdHJgIGlzIGEgdmFsaWQganNvbiBmcmFnbWVudCBwb2ludGVyIHZhbHVlXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcbiAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAqL1xuXG4gIEpzb25Qb2ludGVyLmlzRnJhZ21lbnQgPSBmdW5jdGlvbihzdHIpIHtcbiAgICBzd2l0Y2ggKHN0ci5zdWJzdHJpbmcoMCwgMikpIHtcbiAgICAgIGNhc2UgJyMnOlxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIGNhc2UgJyMvJzpcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuXG5cbiAgLypcbiAgICogUGFyc2VzIGEganNvbi1wb2ludGVyIG9yIGpzb24gZnJhZ21lbnQgcG9pbnRlciwgYXMgZGVzY3JpYmVkIGJ5IFJGQzkwMSwgaW50byBhbiBhcnJheSBvZiBwYXRoIHNlZ21lbnRzLlxuICAgKlxuICAgKiBAdGhyb3dzIHtKc29uUG9pbnRlckVycm9yfSBmb3IgaW52YWxpZCBqc29uLXBvaW50ZXJzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RyXG4gICAqIEByZXR1cm5zIHtzdHJpbmdbXX1cbiAgICovXG5cbiAgSnNvblBvaW50ZXIucGFyc2UgPSBmdW5jdGlvbihzdHIpIHtcbiAgICBzd2l0Y2ggKHN0ci5jaGFyQXQoMCkpIHtcbiAgICAgIGNhc2UgJyc6XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIGNhc2UgJy8nOlxuICAgICAgICByZXR1cm4gc3RyLnN1YnN0cmluZygxKS5zcGxpdCgnLycpLm1hcChKc29uUG9pbnRlci51bmVzY2FwZSk7XG4gICAgICBjYXNlICcjJzpcbiAgICAgICAgc3dpdGNoIChzdHIuY2hhckF0KDEpKSB7XG4gICAgICAgICAgY2FzZSAnJzpcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICBjYXNlICcvJzpcbiAgICAgICAgICAgIHJldHVybiBzdHIuc3Vic3RyaW5nKDIpLnNwbGl0KCcvJykubWFwKEpzb25Qb2ludGVyLnVuZXNjYXBlRnJhZ21lbnQpO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgSnNvblBvaW50ZXJFcnJvcihcIkludmFsaWQgSlNPTiBmcmFnbWVudCBwb2ludGVyOiBcIiArIHN0cik7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgSnNvblBvaW50ZXJFcnJvcihcIkludmFsaWQgSlNPTiBwb2ludGVyOiBcIiArIHN0cik7XG4gICAgfVxuICB9O1xuXG5cbiAgLypcbiAgICogUGFyc2VzIGEganNvbi1wb2ludGVyLCBhcyBkZXNjcmliZWQgYnkgUkZDOTAxLCBpbnRvIGFuIGFycmF5IG9mIHBhdGggc2VnbWVudHMuXG4gICAqXG4gICAqIEB0aHJvd3Mge0pzb25Qb2ludGVyRXJyb3J9IGZvciBpbnZhbGlkIGpzb24tcG9pbnRlcnMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcbiAgICogQHJldHVybnMge3N0cmluZ1tdfVxuICAgKi9cblxuICBKc29uUG9pbnRlci5wYXJzZVBvaW50ZXIgPSBmdW5jdGlvbihzdHIpIHtcbiAgICBzd2l0Y2ggKHN0ci5jaGFyQXQoMCkpIHtcbiAgICAgIGNhc2UgJyc6XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIGNhc2UgJy8nOlxuICAgICAgICByZXR1cm4gc3RyLnN1YnN0cmluZygxKS5zcGxpdCgnLycpLm1hcChKc29uUG9pbnRlci51bmVzY2FwZSk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgSnNvblBvaW50ZXJFcnJvcihcIkludmFsaWQgSlNPTiBwb2ludGVyOiBcIiArIHN0cik7XG4gICAgfVxuICB9O1xuXG5cbiAgLypcbiAgICogUGFyc2VzIGEganNvbiBmcmFnbWVudCBwb2ludGVyLCBhcyBkZXNjcmliZWQgYnkgUkZDOTAxLCBpbnRvIGFuIGFycmF5IG9mIHBhdGggc2VnbWVudHMuXG4gICAqXG4gICAqIEB0aHJvd3Mge0pzb25Qb2ludGVyRXJyb3J9IGZvciBpbnZhbGlkIGpzb24tcG9pbnRlcnMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcbiAgICogQHJldHVybnMge3N0cmluZ1tdfVxuICAgKi9cblxuICBKc29uUG9pbnRlci5wYXJzZUZyYWdtZW50ID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgc3dpdGNoIChzdHIuc3Vic3RyaW5nKDAsIDIpKSB7XG4gICAgICBjYXNlICcjJzpcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgY2FzZSAnIy8nOlxuICAgICAgICByZXR1cm4gc3RyLnN1YnN0cmluZygyKS5zcGxpdCgnLycpLm1hcChKc29uUG9pbnRlci51bmVzY2FwZUZyYWdtZW50KTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBKc29uUG9pbnRlckVycm9yKFwiSW52YWxpZCBKU09OIGZyYWdtZW50IHBvaW50ZXI6IFwiICsgc3RyKTtcbiAgICB9XG4gIH07XG5cblxuICAvKlxuICAgKiBDb252ZXJ0cyBhbiBhcnJheSBvZiBwYXRoIHNlZ21lbnRzIGludG8gYSBqc29uIHBvaW50ZXIuXG4gICAqIFRoaXMgbWV0aG9kIGlzIHRoZSByZXZlcnNlIG9mIGAucGFyc2VQb2ludGVyYC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gc2VnbWVudHNcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG5cbiAgSnNvblBvaW50ZXIuY29tcGlsZSA9IGZ1bmN0aW9uKHNlZ21lbnRzKSB7XG4gICAgcmV0dXJuIHNlZ21lbnRzLm1hcChmdW5jdGlvbihzZWdtZW50KSB7XG4gICAgICByZXR1cm4gJy8nICsgSnNvblBvaW50ZXIuZXNjYXBlKHNlZ21lbnQpO1xuICAgIH0pLmpvaW4oJycpO1xuICB9O1xuXG5cbiAgLypcbiAgICogQ29udmVydHMgYW4gYXJyYXkgb2YgcGF0aCBzZWdtZW50cyBpbnRvIGEganNvbiBwb2ludGVyLlxuICAgKiBUaGlzIG1ldGhvZCBpcyB0aGUgcmV2ZXJzZSBvZiBgLnBhcnNlUG9pbnRlcmAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHNlZ21lbnRzXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuXG4gIEpzb25Qb2ludGVyLmNvbXBpbGVQb2ludGVyID0gZnVuY3Rpb24oc2VnbWVudHMpIHtcbiAgICByZXR1cm4gc2VnbWVudHMubWFwKGZ1bmN0aW9uKHNlZ21lbnQpIHtcbiAgICAgIHJldHVybiAnLycgKyBKc29uUG9pbnRlci5lc2NhcGUoc2VnbWVudCk7XG4gICAgfSkuam9pbignJyk7XG4gIH07XG5cblxuICAvKlxuICAgKiBDb252ZXJ0cyBhbiBhcnJheSBvZiBwYXRoIHNlZ21lbnRzIGludG8gYSBqc29uIGZyYWdtZW50IHBvaW50ZXIuXG4gICAqIFRoaXMgbWV0aG9kIGlzIHRoZSByZXZlcnNlIG9mIGAucGFyc2VGcmFnbWVudGAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHNlZ21lbnRzXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuXG4gIEpzb25Qb2ludGVyLmNvbXBpbGVGcmFnbWVudCA9IGZ1bmN0aW9uKHNlZ21lbnRzKSB7XG4gICAgcmV0dXJuICcjJyArIHNlZ21lbnRzLm1hcChmdW5jdGlvbihzZWdtZW50KSB7XG4gICAgICByZXR1cm4gJy8nICsgSnNvblBvaW50ZXIuZXNjYXBlRnJhZ21lbnQoc2VnbWVudCk7XG4gICAgfSkuam9pbignJyk7XG4gIH07XG5cblxuICAvKlxuICAgKiBDYWxsYmFjayB1c2VkIHRvIGRldGVybWluZSBpZiBhbiBvYmplY3QgY29udGFpbnMgYSBnaXZlbiBwcm9wZXJ0eS5cbiAgICpcbiAgICogQGNhbGxiYWNrIGhhc1Byb3BcbiAgICogQHBhcmFtIHsqfSBvYmpcbiAgICogQHBhcmFtIHtzdHJpbmd8aW50ZWdlcn0ga2V5XG4gICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgKi9cblxuXG4gIC8qXG4gICAqIFJldHVybnMgdHJ1ZSBpZmYgYG9iamAgY29udGFpbnMgYGtleWAgYW5kIGBvYmpgIGlzIGVpdGhlciBhbiBBcnJheSBvciBhbiBPYmplY3QuXG4gICAqIElnbm9yZXMgdGhlIHByb3RvdHlwZSBjaGFpbi5cbiAgICpcbiAgICogRGVmYXVsdCB2YWx1ZSBmb3IgYG9wdGlvbnMuaGFzUHJvcGAuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gb2JqXG4gICAqIEBwYXJhbSB7c3RyaW5nfGludGVnZXJ9IGtleVxuICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAgICovXG5cbiAgSnNvblBvaW50ZXIuaGFzSnNvblByb3AgPSBmdW5jdGlvbihvYmosIGtleSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICAgIHJldHVybiAodHlwZW9mIGtleSA9PT0gJ251bWJlcicpICYmIChrZXkgPCBvYmoubGVuZ3RoKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBvYmogPT09ICdvYmplY3QnKSB7XG4gICAgICByZXR1cm4ge30uaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG5cblxuICAvKlxuICAgKiBSZXR1cm5zIHRydWUgaWZmIGBvYmpgIGNvbnRhaW5zIGBrZXlgLCBkaXNyZWdhcmRpbmcgdGhlIHByb3RvdHlwZSBjaGFpbi5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBvYmpcbiAgICogQHBhcmFtIHtzdHJpbmd8aW50ZWdlcn0ga2V5XG4gICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgKi9cblxuICBKc29uUG9pbnRlci5oYXNPd25Qcm9wID0gZnVuY3Rpb24ob2JqLCBrZXkpIHtcbiAgICByZXR1cm4ge30uaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG4gIH07XG5cblxuICAvKlxuICAgKiBSZXR1cm5zIHRydWUgaWZmIGBvYmpgIGNvbnRhaW5zIGBrZXlgLCBpbmNsdWRpbmcgdmlhIHRoZSBwcm90b3R5cGUgY2hhaW4uXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gb2JqXG4gICAqIEBwYXJhbSB7c3RyaW5nfGludGVnZXJ9IGtleVxuICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAgICovXG5cbiAgSnNvblBvaW50ZXIuaGFzUHJvcCA9IGZ1bmN0aW9uKG9iaiwga2V5KSB7XG4gICAgcmV0dXJuIGtleSBpbiBvYmo7XG4gIH07XG5cblxuICAvKlxuICAgKiBDYWxsYmFjayB1c2VkIHRvIHJldHJpZXZlIGEgcHJvcGVydHkgZnJvbSBhbiBvYmplY3RcbiAgICpcbiAgICogQGNhbGxiYWNrIGdldFByb3BcbiAgICogQHBhcmFtIHsqfSBvYmpcbiAgICogQHBhcmFtIHtzdHJpbmd8aW50ZWdlcn0ga2V5XG4gICAqIEByZXR1cm5zIHsqfVxuICAgKi9cblxuXG4gIC8qXG4gICAqIEZpbmRzIHRoZSBnaXZlbiBga2V5YCBpbiBgb2JqYC5cbiAgICpcbiAgICogRGVmYXVsdCB2YWx1ZSBmb3IgYG9wdGlvbnMuZ2V0UHJvcGAuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gb2JqXG4gICAqIEBwYXJhbSB7c3RyaW5nfGludGVnZXJ9IGtleVxuICAgKiBAcmV0dXJucyB7Kn1cbiAgICovXG5cbiAgSnNvblBvaW50ZXIuZ2V0UHJvcCA9IGZ1bmN0aW9uKG9iaiwga2V5KSB7XG4gICAgcmV0dXJuIG9ialtrZXldO1xuICB9O1xuXG5cbiAgLypcbiAgICogQ2FsbGJhY2sgdXNlZCB0byBzZXQgYSBwcm9wZXJ0eSBvbiBhbiBvYmplY3QuXG4gICAqXG4gICAqIEBjYWxsYmFjayBzZXRQcm9wXG4gICAqIEBwYXJhbSB7Kn0gb2JqXG4gICAqIEBwYXJhbSB7c3RyaW5nfGludGVnZXJ9IGtleVxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEByZXR1cm5zIHsqfVxuICAgKi9cblxuXG4gIC8qXG4gICAqIFNldHMgdGhlIGdpdmVuIGBrZXlgIGluIGBvYmpgIHRvIGB2YWx1ZWAuXG4gICAqXG4gICAqIERlZmF1bHQgdmFsdWUgZm9yIGBvcHRpb25zLnNldFByb3BgLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IG9ialxuICAgKiBAcGFyYW0ge3N0cmluZ3xpbnRlZ2VyfSBrZXlcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcmV0dXJucyB7Kn0gYHZhbHVlYFxuICAgKi9cblxuICBKc29uUG9pbnRlci5zZXRQcm9wID0gZnVuY3Rpb24ob2JqLCBrZXksIHZhbHVlKSB7XG4gICAgcmV0dXJuIG9ialtrZXldID0gdmFsdWU7XG4gIH07XG5cblxuICAvKlxuICAgKiBDYWxsYmFjayB1c2VkIHRvIG1vZGlmeSBiZWhhdmlvdXIgd2hlbiBhIGdpdmVuIHBhdGggc2VnbWVudCBjYW5ub3QgYmUgZm91bmQuXG4gICAqXG4gICAqIEBjYWxsYmFjayBub3RGb3VuZFxuICAgKiBAcGFyYW0geyp9IG9ialxuICAgKiBAcGFyYW0ge3N0cmluZ3xpbnRlZ2VyfSBrZXlcbiAgICogQHJldHVybnMgeyp9XG4gICAqL1xuXG5cbiAgLypcbiAgICogUmV0dXJucyB0aGUgdmFsdWUgdG8gdXNlIHdoZW4gYC5nZXRgIGZhaWxzIHRvIGxvY2F0ZSBhIHBvaW50ZXIgc2VnbWVudC5cbiAgICpcbiAgICogRGVmYXVsdCB2YWx1ZSBmb3IgYG9wdGlvbnMuZ2V0Tm90Rm91bmRgLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IG9ialxuICAgKiBAcGFyYW0ge3N0cmluZ3xpbnRlZ2VyfSBzZWdtZW50XG4gICAqIEBwYXJhbSB7Kn0gcm9vdFxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBzZWdtZW50c1xuICAgKiBAcGFyYW0ge2ludGVnZXJ9IGlTZWdtZW50XG4gICAqIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gICAqL1xuXG4gIEpzb25Qb2ludGVyLmdldE5vdEZvdW5kID0gZnVuY3Rpb24ob2JqLCBzZWdtZW50LCByb290LCBzZWdtZW50cywgaVNlZ21lbnQpIHtcbiAgICByZXR1cm4gdm9pZCAwO1xuICB9O1xuXG5cbiAgLypcbiAgICogUmV0dXJucyB0aGUgdmFsdWUgdG8gdXNlIHdoZW4gYC5zZXRgIGZhaWxzIHRvIGxvY2F0ZSBhIHBvaW50ZXIgc2VnbWVudC5cbiAgICpcbiAgICogRGVmYXVsdCB2YWx1ZSBmb3IgYG9wdGlvbnMuc2V0Tm90Rm91bmRgLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IG9ialxuICAgKiBAcGFyYW0ge3N0cmluZ3xpbnRlZ2VyfSBzZWdtZW50XG4gICAqIEBwYXJhbSB7Kn0gcm9vdFxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBzZWdtZW50c1xuICAgKiBAcGFyYW0ge2ludGVnZXJ9IGlTZWdtZW50XG4gICAqIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gICAqL1xuXG4gIEpzb25Qb2ludGVyLnNldE5vdEZvdW5kID0gZnVuY3Rpb24ob2JqLCBzZWdtZW50LCByb290LCBzZWdtZW50cywgaVNlZ21lbnQpIHtcbiAgICBpZiAoc2VnbWVudHNbaVNlZ21lbnQgKyAxXS5tYXRjaCgvXig/OjB8WzEtOV1cXGQqfC0pJC8pKSB7XG4gICAgICByZXR1cm4gb2JqW3NlZ21lbnRdID0gW107XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBvYmpbc2VnbWVudF0gPSB7fTtcbiAgICB9XG4gIH07XG5cblxuICAvKlxuICAgKiBQZXJmb3JtcyBhbiBhY3Rpb24gd2hlbiBgLmRlbGAgZmFpbHMgdG8gbG9jYXRlIGEgcG9pbnRlciBzZWdtZW50LlxuICAgKlxuICAgKiBEZWZhdWx0IHZhbHVlIGZvciBgb3B0aW9ucy5kZWxOb3RGb3VuZGAuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gb2JqXG4gICAqIEBwYXJhbSB7c3RyaW5nfGludGVnZXJ9IHNlZ21lbnRcbiAgICogQHBhcmFtIHsqfSByb290XG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHNlZ21lbnRzXG4gICAqIEBwYXJhbSB7aW50ZWdlcn0gaVNlZ21lbnRcbiAgICogQHJldHVybnMge3VuZGVmaW5lZH1cbiAgICovXG5cbiAgSnNvblBvaW50ZXIuZGVsTm90Rm91bmQgPSBmdW5jdGlvbihvYmosIHNlZ21lbnQsIHJvb3QsIHNlZ21lbnRzLCBpU2VnbWVudCkge1xuICAgIHJldHVybiB2b2lkIDA7XG4gIH07XG5cblxuICAvKlxuICAgKiBSYWlzZXMgYSBKc29uUG9pbnRlckVycm9yIHdoZW4gdGhlIGdpdmVuIHBvaW50ZXIgc2VnbWVudCBpcyBub3QgZm91bmQuXG4gICAqXG4gICAqIE1heSBiZSB1c2VkIGluIHBsYWNlIG9mIHRoZSBhYm92ZSBtZXRob2RzIHZpYSB0aGUgYG9wdGlvbnNgIGFyZ3VtZW50IG9mIGAuLy5nZXQvLnNldC8uaGFzLy5kZWwvLnNpbXBsZUJpbmRgLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IG9ialxuICAgKiBAcGFyYW0ge3N0cmluZ3xpbnRlZ2VyfSBzZWdtZW50XG4gICAqIEBwYXJhbSB7Kn0gcm9vdFxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBzZWdtZW50c1xuICAgKiBAcGFyYW0ge2ludGVnZXJ9IGlTZWdtZW50XG4gICAqIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gICAqL1xuXG4gIEpzb25Qb2ludGVyLmVycm9yTm90Rm91bmQgPSBmdW5jdGlvbihvYmosIHNlZ21lbnQsIHJvb3QsIHNlZ21lbnRzLCBpU2VnbWVudCkge1xuICAgIHRocm93IG5ldyBKc29uUG9pbnRlckVycm9yKFwiVW5hYmxlIHRvIGZpbmQganNvbiBwYXRoOiBcIiArIChKc29uUG9pbnRlci5jb21waWxlKHNlZ21lbnRzLnNsaWNlKDAsIGlTZWdtZW50ICsgMSkpKSk7XG4gIH07XG5cblxuICAvKlxuICAgKiBTZXRzIHRoZSBsb2NhdGlvbiBpbiBgb2JqZWN0YCwgc3BlY2lmaWVkIGJ5IGBwb2ludGVyYCwgdG8gYHZhbHVlYC5cbiAgICogSWYgYHBvaW50ZXJgIHJlZmVycyB0byB0aGUgd2hvbGUgZG9jdW1lbnQsIGB2YWx1ZWAgaXMgcmV0dXJuZWQgd2l0aG91dCBtb2RpZnlpbmcgYG9iamVjdGAsXG4gICAqIG90aGVyd2lzZSwgYG9iamVjdGAgbW9kaWZpZWQgYW5kIHJldHVybmVkLlxuICAgKlxuICAgKiBCeSBkZWZhdWx0LCBpZiBhbnkgbG9jYXRpb24gc3BlY2lmaWVkIGJ5IGBwb2ludGVyYCBkb2VzIG5vdCBleGlzdCwgdGhlIGxvY2F0aW9uIGlzIGNyZWF0ZWQgdXNpbmcgb2JqZWN0cyBhbmQgYXJyYXlzLlxuICAgKiBBcnJheXMgYXJlIHVzZWQgb25seSB3aGVuIHRoZSBpbW1lZGlhdGVseSBmb2xsb3dpbmcgcGF0aCBzZWdtZW50IGlzIGFuIGFycmF5IGVsZW1lbnQgYXMgZGVmaW5lZCBieSB0aGUgc3RhbmRhcmQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gb2JqXG4gICAqIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBwb2ludGVyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAqIEBwYXJhbSB7aGFzUHJvcH0gb3B0aW9ucy5oYXNQcm9wXG4gICAqIEBwYXJhbSB7Z2V0UHJvcH0gb3B0aW9ucy5nZXRQcm9wXG4gICAqIEBwYXJhbSB7c2V0UHJvcH0gb3B0aW9ucy5zZXRQcm9wXG4gICAqIEBwYXJhbSB7bm90Rm91bmR9IG9wdGlvbnMuZ2V0Tm90Rm91bmRcbiAgICogQHJldHVybnMgeyp9XG4gICAqL1xuXG4gIEpzb25Qb2ludGVyLnNldCA9IGZ1bmN0aW9uKG9iaiwgcG9pbnRlciwgdmFsdWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgZ2V0UHJvcCwgaGFzUHJvcCwgaVNlZ21lbnQsIGxlbiwgcmVmLCByZWYxLCByZWYyLCByZWYzLCByb290LCBzZWdtZW50LCBzZXROb3RGb3VuZCwgc2V0UHJvcDtcbiAgICBpZiAodHlwZW9mIHBvaW50ZXIgPT09ICdzdHJpbmcnKSB7XG4gICAgICBwb2ludGVyID0gSnNvblBvaW50ZXIucGFyc2UocG9pbnRlcik7XG4gICAgfVxuICAgIGlmIChwb2ludGVyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBoYXNQcm9wID0gKHJlZiA9IG9wdGlvbnMgIT0gbnVsbCA/IG9wdGlvbnMuaGFzUHJvcCA6IHZvaWQgMCkgIT0gbnVsbCA/IHJlZiA6IEpzb25Qb2ludGVyLmhhc0pzb25Qcm9wO1xuICAgIGdldFByb3AgPSAocmVmMSA9IG9wdGlvbnMgIT0gbnVsbCA/IG9wdGlvbnMuZ2V0UHJvcCA6IHZvaWQgMCkgIT0gbnVsbCA/IHJlZjEgOiBKc29uUG9pbnRlci5nZXRQcm9wO1xuICAgIHNldFByb3AgPSAocmVmMiA9IG9wdGlvbnMgIT0gbnVsbCA/IG9wdGlvbnMuc2V0UHJvcCA6IHZvaWQgMCkgIT0gbnVsbCA/IHJlZjIgOiBKc29uUG9pbnRlci5zZXRQcm9wO1xuICAgIHNldE5vdEZvdW5kID0gKHJlZjMgPSBvcHRpb25zICE9IG51bGwgPyBvcHRpb25zLnNldE5vdEZvdW5kIDogdm9pZCAwKSAhPSBudWxsID8gcmVmMyA6IEpzb25Qb2ludGVyLnNldE5vdEZvdW5kO1xuICAgIHJvb3QgPSBvYmo7XG4gICAgaVNlZ21lbnQgPSAwO1xuICAgIGxlbiA9IHBvaW50ZXIubGVuZ3RoO1xuICAgIHdoaWxlIChpU2VnbWVudCAhPT0gbGVuKSB7XG4gICAgICBzZWdtZW50ID0gcG9pbnRlcltpU2VnbWVudF07XG4gICAgICArK2lTZWdtZW50O1xuICAgICAgaWYgKHNlZ21lbnQgPT09ICctJyAmJiBBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICAgICAgc2VnbWVudCA9IG9iai5sZW5ndGg7XG4gICAgICB9IGVsc2UgaWYgKHNlZ21lbnQubWF0Y2goL14oPzowfFsxLTldXFxkKikkLykgJiYgQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgICAgIHNlZ21lbnQgPSBwYXJzZUludChzZWdtZW50LCAxMCk7XG4gICAgICB9XG4gICAgICBpZiAoaVNlZ21lbnQgPT09IGxlbikge1xuICAgICAgICBzZXRQcm9wKG9iaiwgc2VnbWVudCwgdmFsdWUpO1xuICAgICAgICBicmVhaztcbiAgICAgIH0gZWxzZSBpZiAoIWhhc1Byb3Aob2JqLCBzZWdtZW50KSkge1xuICAgICAgICBvYmogPSBzZXROb3RGb3VuZChvYmosIHNlZ21lbnQsIHJvb3QsIHBvaW50ZXIsIGlTZWdtZW50IC0gMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvYmogPSBnZXRQcm9wKG9iaiwgc2VnbWVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByb290O1xuICB9O1xuXG5cbiAgLypcbiAgICogRmluZHMgdGhlIHZhbHVlIGluIGBvYmpgIGFzIHNwZWNpZmllZCBieSBgcG9pbnRlcmBcbiAgICpcbiAgICogQnkgZGVmYXVsdCwgcmV0dXJucyB1bmRlZmluZWQgZm9yIHZhbHVlcyB3aGljaCBjYW5ub3QgYmUgZm91bmRcbiAgICpcbiAgICogQHBhcmFtIHsqfSBvYmpcbiAgICogQHBhcmFtIHtzdHJpbmd8c3RyaW5nW119IHBvaW50ZXJcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICogQHBhcmFtIHtoYXNQcm9wfSBvcHRpb25zLmhhc1Byb3BcbiAgICogQHBhcmFtIHtnZXRQcm9wfSBvcHRpb25zLmdldFByb3BcbiAgICogQHBhcmFtIHtub3RGb3VuZH0gb3B0aW9ucy5nZXROb3RGb3VuZFxuICAgKiBAcmV0dXJucyB7Kn1cbiAgICovXG5cbiAgSnNvblBvaW50ZXIuZ2V0ID0gZnVuY3Rpb24ob2JqLCBwb2ludGVyLCBvcHRpb25zKSB7XG4gICAgdmFyIGdldE5vdEZvdW5kLCBnZXRQcm9wLCBoYXNQcm9wLCBpU2VnbWVudCwgbGVuLCByZWYsIHJlZjEsIHJlZjIsIHJvb3QsIHNlZ21lbnQ7XG4gICAgaWYgKHR5cGVvZiBwb2ludGVyID09PSAnc3RyaW5nJykge1xuICAgICAgcG9pbnRlciA9IEpzb25Qb2ludGVyLnBhcnNlKHBvaW50ZXIpO1xuICAgIH1cbiAgICBoYXNQcm9wID0gKHJlZiA9IG9wdGlvbnMgIT0gbnVsbCA/IG9wdGlvbnMuaGFzUHJvcCA6IHZvaWQgMCkgIT0gbnVsbCA/IHJlZiA6IEpzb25Qb2ludGVyLmhhc0pzb25Qcm9wO1xuICAgIGdldFByb3AgPSAocmVmMSA9IG9wdGlvbnMgIT0gbnVsbCA/IG9wdGlvbnMuZ2V0UHJvcCA6IHZvaWQgMCkgIT0gbnVsbCA/IHJlZjEgOiBKc29uUG9pbnRlci5nZXRQcm9wO1xuICAgIGdldE5vdEZvdW5kID0gKHJlZjIgPSBvcHRpb25zICE9IG51bGwgPyBvcHRpb25zLmdldE5vdEZvdW5kIDogdm9pZCAwKSAhPSBudWxsID8gcmVmMiA6IEpzb25Qb2ludGVyLmdldE5vdEZvdW5kO1xuICAgIHJvb3QgPSBvYmo7XG4gICAgaVNlZ21lbnQgPSAwO1xuICAgIGxlbiA9IHBvaW50ZXIubGVuZ3RoO1xuICAgIHdoaWxlIChpU2VnbWVudCAhPT0gbGVuKSB7XG4gICAgICBzZWdtZW50ID0gcG9pbnRlcltpU2VnbWVudF07XG4gICAgICArK2lTZWdtZW50O1xuICAgICAgaWYgKHNlZ21lbnQgPT09ICctJyAmJiBBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICAgICAgc2VnbWVudCA9IG9iai5sZW5ndGg7XG4gICAgICB9IGVsc2UgaWYgKHNlZ21lbnQubWF0Y2goL14oPzowfFsxLTldXFxkKikkLykgJiYgQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgICAgIHNlZ21lbnQgPSBwYXJzZUludChzZWdtZW50LCAxMCk7XG4gICAgICB9XG4gICAgICBpZiAoIWhhc1Byb3Aob2JqLCBzZWdtZW50KSkge1xuICAgICAgICByZXR1cm4gZ2V0Tm90Rm91bmQob2JqLCBzZWdtZW50LCByb290LCBwb2ludGVyLCBpU2VnbWVudCAtIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb2JqID0gZ2V0UHJvcChvYmosIHNlZ21lbnQpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2JqO1xuICB9O1xuXG5cbiAgLypcbiAgICogUmVtb3ZlcyB0aGUgbG9jYXRpb24sIHNwZWNpZmllZCBieSBgcG9pbnRlcmAsIGZyb20gYG9iamVjdGAuXG4gICAqIFJldHVybnMgdGhlIG1vZGlmaWVkIGBvYmplY3RgLCBvciB1bmRlZmluZWQgaWYgdGhlIGBwb2ludGVyYCBpcyBlbXB0eS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBvYmpcbiAgICogQHBhcmFtIHtzdHJpbmd8c3RyaW5nW119IHBvaW50ZXJcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICogQHBhcmFtIHtoYXNQcm9wfSBvcHRpb25zLmhhc1Byb3BcbiAgICogQHBhcmFtIHtnZXRQcm9wfSBvcHRpb25zLmdldFByb3BcbiAgICogQHBhcmFtIHtub3RGb3VuZH0gb3B0aW9ucy5kZWxOb3RGb3VuZFxuICAgKiBAcmV0dXJucyB7Kn1cbiAgICovXG5cbiAgSnNvblBvaW50ZXIuZGVsID0gZnVuY3Rpb24ob2JqLCBwb2ludGVyLCBvcHRpb25zKSB7XG4gICAgdmFyIGRlbE5vdEZvdW5kLCBnZXRQcm9wLCBoYXNQcm9wLCBpU2VnbWVudCwgbGVuLCByZWYsIHJlZjEsIHJlZjIsIHJvb3QsIHNlZ21lbnQ7XG4gICAgaWYgKHR5cGVvZiBwb2ludGVyID09PSAnc3RyaW5nJykge1xuICAgICAgcG9pbnRlciA9IEpzb25Qb2ludGVyLnBhcnNlKHBvaW50ZXIpO1xuICAgIH1cbiAgICBpZiAocG9pbnRlci5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgfVxuICAgIGhhc1Byb3AgPSAocmVmID0gb3B0aW9ucyAhPSBudWxsID8gb3B0aW9ucy5oYXNQcm9wIDogdm9pZCAwKSAhPSBudWxsID8gcmVmIDogSnNvblBvaW50ZXIuaGFzSnNvblByb3A7XG4gICAgZ2V0UHJvcCA9IChyZWYxID0gb3B0aW9ucyAhPSBudWxsID8gb3B0aW9ucy5nZXRQcm9wIDogdm9pZCAwKSAhPSBudWxsID8gcmVmMSA6IEpzb25Qb2ludGVyLmdldFByb3A7XG4gICAgZGVsTm90Rm91bmQgPSAocmVmMiA9IG9wdGlvbnMgIT0gbnVsbCA/IG9wdGlvbnMuZGVsTm90Rm91bmQgOiB2b2lkIDApICE9IG51bGwgPyByZWYyIDogSnNvblBvaW50ZXIuZGVsTm90Rm91bmQ7XG4gICAgcm9vdCA9IG9iajtcbiAgICBpU2VnbWVudCA9IDA7XG4gICAgbGVuID0gcG9pbnRlci5sZW5ndGg7XG4gICAgd2hpbGUgKGlTZWdtZW50ICE9PSBsZW4pIHtcbiAgICAgIHNlZ21lbnQgPSBwb2ludGVyW2lTZWdtZW50XTtcbiAgICAgICsraVNlZ21lbnQ7XG4gICAgICBpZiAoc2VnbWVudCA9PT0gJy0nICYmIEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgICAgICBzZWdtZW50ID0gb2JqLmxlbmd0aDtcbiAgICAgIH0gZWxzZSBpZiAoc2VnbWVudC5tYXRjaCgvXig/OjB8WzEtOV1cXGQqKSQvKSAmJiBBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICAgICAgc2VnbWVudCA9IHBhcnNlSW50KHNlZ21lbnQsIDEwKTtcbiAgICAgIH1cbiAgICAgIGlmICghaGFzUHJvcChvYmosIHNlZ21lbnQpKSB7XG4gICAgICAgIGRlbE5vdEZvdW5kKG9iaiwgc2VnbWVudCwgcm9vdCwgcG9pbnRlciwgaVNlZ21lbnQgLSAxKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9IGVsc2UgaWYgKGlTZWdtZW50ID09PSBsZW4pIHtcbiAgICAgICAgZGVsZXRlIG9ialtzZWdtZW50XTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvYmogPSBnZXRQcm9wKG9iaiwgc2VnbWVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByb290O1xuICB9O1xuXG5cbiAgLypcbiAgICogUmV0dXJucyB0cnVlIGlmZiB0aGUgbG9jYXRpb24sIHNwZWNpZmllZCBieSBgcG9pbnRlcmAsIGV4aXN0cyBpbiBgb2JqZWN0YFxuICAgKlxuICAgKiBAcGFyYW0geyp9IG9ialxuICAgKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gcG9pbnRlclxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge2hhc1Byb3B9IG9wdGlvbnMuaGFzUHJvcFxuICAgKiBAcGFyYW0ge2dldFByb3B9IG9wdGlvbnMuZ2V0UHJvcFxuICAgKiBAcmV0dXJucyB7Kn1cbiAgICovXG5cbiAgSnNvblBvaW50ZXIuaGFzID0gZnVuY3Rpb24ob2JqLCBwb2ludGVyLCBvcHRpb25zKSB7XG4gICAgdmFyIGdldFByb3AsIGhhc1Byb3AsIGlTZWdtZW50LCBsZW4sIHJlZiwgcmVmMSwgc2VnbWVudDtcbiAgICBpZiAodHlwZW9mIHBvaW50ZXIgPT09ICdzdHJpbmcnKSB7XG4gICAgICBwb2ludGVyID0gSnNvblBvaW50ZXIucGFyc2UocG9pbnRlcik7XG4gICAgfVxuICAgIGhhc1Byb3AgPSAocmVmID0gb3B0aW9ucyAhPSBudWxsID8gb3B0aW9ucy5oYXNQcm9wIDogdm9pZCAwKSAhPSBudWxsID8gcmVmIDogSnNvblBvaW50ZXIuaGFzSnNvblByb3A7XG4gICAgZ2V0UHJvcCA9IChyZWYxID0gb3B0aW9ucyAhPSBudWxsID8gb3B0aW9ucy5nZXRQcm9wIDogdm9pZCAwKSAhPSBudWxsID8gcmVmMSA6IEpzb25Qb2ludGVyLmdldFByb3A7XG4gICAgaVNlZ21lbnQgPSAwO1xuICAgIGxlbiA9IHBvaW50ZXIubGVuZ3RoO1xuICAgIHdoaWxlIChpU2VnbWVudCAhPT0gbGVuKSB7XG4gICAgICBzZWdtZW50ID0gcG9pbnRlcltpU2VnbWVudF07XG4gICAgICArK2lTZWdtZW50O1xuICAgICAgaWYgKHNlZ21lbnQgPT09ICctJyAmJiBBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICAgICAgc2VnbWVudCA9IG9iai5sZW5ndGg7XG4gICAgICB9IGVsc2UgaWYgKHNlZ21lbnQubWF0Y2goL14oPzowfFsxLTldXFxkKikkLykgJiYgQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgICAgIHNlZ21lbnQgPSBwYXJzZUludChzZWdtZW50LCAxMCk7XG4gICAgICB9XG4gICAgICBpZiAoIWhhc1Byb3Aob2JqLCBzZWdtZW50KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBvYmogPSBnZXRQcm9wKG9iaiwgc2VnbWVudCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIHJldHVybiBKc29uUG9pbnRlcjtcblxufSkoKTtcblxucmV0dXJuIEpzb25Qb2ludGVyO1xufSkpO1xuIiwiY2xhc3MgSnNvblBvaW50ZXJFcnJvciBleHRlbmRzIEVycm9yXG4gIGNvbnN0cnVjdG9yOiAobWVzc2FnZSkgLT5cbiAgICBiYXNlID0gc3VwZXIobWVzc2FnZSlcblxuICAgIEBtZXNzYWdlID0gYmFzZS5tZXNzYWdlXG4gICAgQHN0YWNrID0gYmFzZS5zdGFja1xuICAgIEBuYW1lID0gQGNvbnN0cnVjdG9yLm5hbWVcblxuY2xhc3MgSnNvblBvaW50ZXJcbiAgQEpzb25Qb2ludGVyRXJyb3I6IEpzb25Qb2ludGVyRXJyb3JcblxuICAjIyNcbiAgIyBDb252ZW5pZW5jZSBmdW5jdGlvbiBmb3IgY2hvb3NpbmcgYmV0d2VlbiBgLnNtYXJ0QmluZGAsIGAuZ2V0YCwgYW5kIGAuc2V0YCwgZGVwZW5kaW5nIG9uIHRoZSBudW1iZXIgb2YgYXJndW1lbnRzLlxuICAjXG4gICMgQHBhcmFtIHsqfSBvYmplY3RcbiAgIyBAcGFyYW0ge3N0cmluZ30gcG9pbnRlclxuICAjIEBwYXJhbSB7Kn0gdmFsdWVcbiAgIyBAcmV0dXJucyB7Kn0gZXZhbHVhdGlvbiBvZiB0aGUgcHJveGllZCBtZXRob2RcbiAgIyMjXG4gIGNvbnN0cnVjdG9yOiAob2JqZWN0LCBwb2ludGVyLCB2YWx1ZSkgLT5cbiAgICByZXR1cm4gc3dpdGNoIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgIHdoZW4gMyB0aGVuIEpzb25Qb2ludGVyLnNldChvYmplY3QsIHBvaW50ZXIsIHZhbHVlKVxuICAgICAgd2hlbiAyIHRoZW4gSnNvblBvaW50ZXIuZ2V0KG9iamVjdCwgcG9pbnRlcilcbiAgICAgIHdoZW4gMSB0aGVuIEpzb25Qb2ludGVyLnNtYXJ0QmluZCh7IG9iamVjdDogb2JqZWN0IH0pXG4gICAgICBlbHNlIG51bGxcblxuICAjIyNcbiAgIyBDcmVhdGVzIGEgY2xvbmUgb2YgdGhlIGFwaSwgd2l0aCBgLi8uZ2V0Ly5oYXMvLnNldC8uZGVsLy5zbWFydEJpbmRgIG1ldGhvZCBzaWduYXR1cmVzIGFkanVzdGVkLlxuICAjIFRoZSBzbWFydEJpbmQgbWV0aG9kIGlzIGN1bXVsYXRpdmUsIG1lYW5pbmcgdGhhdCBgLnNtYXJ0QmluZCh7IG9iamVjdDogeH0pLnNtYXJ0QmluZCh7IHBvaW50ZXI6IHkgfSlgIHdpbGwgYmVoYXZlIGFzIGV4cGVjdGVkLlxuICAjXG4gICMgQHBhcmFtIHtPYmplY3R9IGJpbmRpbmdzXG4gICMgQHBhcmFtIHsqfSBiaW5kaW5ncy5vYmplY3RcbiAgIyBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gYmluZGluZ3MucG9pbnRlclxuICAjIEBwYXJhbSB7T2JqZWN0fSBiaW5kaW5ncy5vcHRpb25zXG4gICMgQHJldHVybnMge0pzb25Qb2ludGVyfVxuICAjIyNcbiAgQHNtYXJ0QmluZDogKHsgb2JqZWN0OiBvYmosIHBvaW50ZXI6IHB0ciwgZnJhZ21lbnQ6IGZyYWcsIG9wdGlvbnM6IG9wdCB9KSAtPlxuICAgICMgZnJhZ21lbnQgb3ZlcnJpZGVzIHBvaW50ZXJcbiAgICBwdHIgPSBmcmFnID8gcHRyXG5cbiAgICAjIFdoYXQgYXJlIGJpbmRpbmc/XG4gICAgaGFzT2JqID0gb2JqICE9IHVuZGVmaW5lZFxuICAgIGhhc1B0ciA9IHB0cj9cbiAgICBoYXNPcHQgPSBvcHQ/XG5cbiAgICAjIExldHMgbm90IHBhcnNlIHRoaXMgZXZlcnkgdGltZSFcbiAgICBpZiB0eXBlb2YgcHRyID09ICdzdHJpbmcnXG4gICAgICBwdHIgPSBAcGFyc2UocHRyKVxuXG4gICAgIyBkZWZhdWx0IG9wdGlvbnMgaGF2ZSBjaGFuZ2VkXG4gICAgbWVyZ2VPcHRpb25zID0gKG92ZXJyaWRlID0ge30pIC0+XG4gICAgICBvID0ge31cblxuICAgICAgby5oYXNPd25Qcm9wID0gb3ZlcnJpZGUuaGFzT3duUHJvcCA/IG9wdC5oYXNPd25Qcm9wXG4gICAgICBvLmdldFByb3AgPSBvdmVycmlkZS5nZXRQcm9wID8gb3B0LmdldFByb3BcbiAgICAgIG8uc2V0UHJvcCA9IG92ZXJyaWRlLnNldFByb3AgPyBvcHQuc2V0UHJvcFxuICAgICAgby5nZXROb3RGb3VuZCA9IG92ZXJyaWRlLmdldE5vdEZvdW5kID8gb3B0LmdldE5vdEZvdW5kXG4gICAgICBvLnNldE5vdEZvdW5kID0gb3ZlcnJpZGUuc2V0Tm90Rm91bmQgPyBvcHQuc2V0Tm90Rm91bmRcbiAgICAgIG8uZGVsTm90Rm91bmQgPSBvdmVycmlkZS5kZWxOb3RGb3VuZCA/IG9wdC5kZWxOb3RGb3VuZFxuXG4gICAgICByZXR1cm4gb1xuXG4gICAgYXBpID0gdW5kZWZpbmVkXG5cbiAgICAjIEV2ZXJ5IGNvbWJpbmF0aW9uIG9mIGJpbmRpbmdzXG4gICAgaWYgaGFzT2JqIGFuZCBoYXNQdHIgYW5kIGhhc09wdFxuICAgICAgYXBpID0gKHZhbHVlKSAtPlxuICAgICAgICByZXR1cm4gc3dpdGNoIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgICAgICB3aGVuIDEgdGhlbiBKc29uUG9pbnRlci5zZXQob2JqLCBwdHIsIHZhbHVlLCBvcHQpXG4gICAgICAgICAgd2hlbiAwIHRoZW4gSnNvblBvaW50ZXIuZ2V0KG9iaiwgcHRyLCBvcHQpXG4gICAgICAgICAgZWxzZSBudWxsXG5cbiAgICAgIGFwaS5zZXQgPSAodmFsdWUsIG92ZXJyaWRlKSAtPiBvYmogPSBKc29uUG9pbnRlci5zZXQob2JqLCBwdHIsIHZhbHVlLCBtZXJnZU9wdGlvbnMob3ZlcnJpZGUpKVxuICAgICAgYXBpLmdldCA9IChvdmVycmlkZSkgLT4gSnNvblBvaW50ZXIuZ2V0KG9iaiwgcHRyLCBtZXJnZU9wdGlvbnMob3ZlcnJpZGUpKVxuICAgICAgYXBpLmhhcyA9IChvdmVycmlkZSkgLT4gSnNvblBvaW50ZXIuaGFzKG9iaiwgcHRyLCBtZXJnZU9wdGlvbnMob3ZlcnJpZGUpKVxuICAgICAgYXBpLmRlbCA9IChvdmVycmlkZSkgLT4gb2JqID0gSnNvblBvaW50ZXIuZGVsKG9iaiwgcHRyLCBtZXJnZU9wdGlvbnMob3ZlcnJpZGUpKVxuICAgIGVsc2UgaWYgaGFzT2JqIGFuZCBoYXNQdHJcbiAgICAgIGFwaSA9ICh2YWx1ZSkgLT5cbiAgICAgICAgcmV0dXJuIHN3aXRjaCBhcmd1bWVudHMubGVuZ3RoXG4gICAgICAgICAgd2hlbiAxIHRoZW4gSnNvblBvaW50ZXIuc2V0KG9iaiwgcHRyLCB2YWx1ZSlcbiAgICAgICAgICB3aGVuIDAgdGhlbiBKc29uUG9pbnRlci5nZXQob2JqLCBwdHIpXG4gICAgICAgICAgZWxzZSBudWxsXG5cbiAgICAgIGFwaS5zZXQgPSAodmFsdWUsIG92ZXJyaWRlKSAtPiBvYmogPSBKc29uUG9pbnRlci5zZXQob2JqLCBwdHIsIHZhbHVlLCBvdmVycmlkZSlcbiAgICAgIGFwaS5nZXQgPSAob3ZlcnJpZGUpIC0+IEpzb25Qb2ludGVyLmdldChvYmosIHB0ciwgb3ZlcnJpZGUpXG4gICAgICBhcGkuaGFzID0gKG92ZXJyaWRlKSAtPiBKc29uUG9pbnRlci5oYXMob2JqLCBwdHIsIG92ZXJyaWRlKVxuICAgICAgYXBpLmRlbCA9IChvdmVycmlkZSkgLT4gb2JqID0gSnNvblBvaW50ZXIuZGVsKG9iaiwgcHRyLCBvdmVycmlkZSlcbiAgICBlbHNlIGlmIGhhc09iaiBhbmQgaGFzT3B0XG4gICAgICBhcGkgPSAocHRyLCB2YWx1ZSkgLT5cbiAgICAgICAgcmV0dXJuIHN3aXRjaCBhcmd1bWVudHMubGVuZ3RoXG4gICAgICAgICAgd2hlbiAyIHRoZW4gSnNvblBvaW50ZXIuc2V0KG9iaiwgcHRyLCB2YWx1ZSwgb3B0KVxuICAgICAgICAgIHdoZW4gMSB0aGVuIEpzb25Qb2ludGVyLmdldChvYmosIHB0ciwgb3B0KVxuICAgICAgICAgIGVsc2UgbnVsbFxuXG4gICAgICBhcGkuc2V0ID0gKHB0ciwgdmFsdWUsIG92ZXJyaWRlKSAtPiBvYmogPSBKc29uUG9pbnRlci5zZXQob2JqLCBwdHIsIHZhbHVlLCBtZXJnZU9wdGlvbnMob3ZlcnJpZGUpKVxuICAgICAgYXBpLmdldCA9IChwdHIsIG92ZXJyaWRlKSAtPiBKc29uUG9pbnRlci5nZXQob2JqLCBwdHIsIG1lcmdlT3B0aW9ucyhvdmVycmlkZSkpXG4gICAgICBhcGkuaGFzID0gKHB0ciwgb3ZlcnJpZGUpIC0+IEpzb25Qb2ludGVyLmhhcyhvYmosIHB0ciwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSlcbiAgICAgIGFwaS5kZWwgPSAocHRyLCBvdmVycmlkZSkgLT4gb2JqID0gSnNvblBvaW50ZXIuZGVsKG9iaiwgcHRyLCBtZXJnZU9wdGlvbnMob3ZlcnJpZGUpKVxuICAgIGVsc2UgaWYgaGFzUHRyIGFuZCBoYXNPcHRcbiAgICAgIGFwaSA9IChvYmosIHZhbHVlKSAtPlxuICAgICAgICByZXR1cm4gc3dpdGNoIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgICAgICB3aGVuIDIgdGhlbiBKc29uUG9pbnRlci5zZXQob2JqLCBwdHIsIHZhbHVlLCBvcHQpXG4gICAgICAgICAgd2hlbiAxIHRoZW4gSnNvblBvaW50ZXIuZ2V0KG9iaiwgcHRyLCBvcHQpXG4gICAgICAgICAgZWxzZSBudWxsXG5cbiAgICAgIGFwaS5zZXQgPSAob2JqLCB2YWx1ZSwgb3ZlcnJpZGUpIC0+IEpzb25Qb2ludGVyLnNldChvYmosIHB0ciwgdmFsdWUsIG1lcmdlT3B0aW9ucyhvdmVycmlkZSkpXG4gICAgICBhcGkuZ2V0ID0gKG9iaiwgb3ZlcnJpZGUpIC0+IEpzb25Qb2ludGVyLmdldChvYmosIHB0ciwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSlcbiAgICAgIGFwaS5oYXMgPSAob2JqLCBvdmVycmlkZSkgLT4gSnNvblBvaW50ZXIuaGFzKG9iaiwgcHRyLCBtZXJnZU9wdGlvbnMob3ZlcnJpZGUpKVxuICAgICAgYXBpLmRlbCA9IChvYmosIG92ZXJyaWRlKSAtPiBKc29uUG9pbnRlci5kZWwob2JqLCBwdHIsIG1lcmdlT3B0aW9ucyhvdmVycmlkZSkpXG4gICAgZWxzZSBpZiBoYXNPcHRcbiAgICAgIGFwaSA9IChvYmosIHB0ciwgdmFsdWUpIC0+XG4gICAgICAgIHJldHVybiBzd2l0Y2ggYXJndW1lbnRzLmxlbmd0aFxuICAgICAgICAgIHdoZW4gMyB0aGVuIEpzb25Qb2ludGVyLnNldChvYmosIHB0ciwgdmFsdWUsIG9wdClcbiAgICAgICAgICB3aGVuIDIgdGhlbiBKc29uUG9pbnRlci5nZXQob2JqLCBwdHIsIG9wdClcbiAgICAgICAgICB3aGVuIDEgdGhlbiBhcGkuc21hcnRCaW5kKHsgb2JqZWN0OiBvYmogfSlcbiAgICAgICAgICBlbHNlIG51bGxcblxuICAgICAgYXBpLnNldCA9IChvYmosIHB0ciwgdmFsdWUsIG92ZXJyaWRlKSAtPiBKc29uUG9pbnRlci5zZXQob2JqLCBwdHIsIHZhbHVlLCBtZXJnZU9wdGlvbnMob3ZlcnJpZGUpKVxuICAgICAgYXBpLmdldCA9IChvYmosIHB0ciwgb3ZlcnJpZGUpIC0+IEpzb25Qb2ludGVyLmdldChvYmosIHB0ciwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSlcbiAgICAgIGFwaS5oYXMgPSAob2JqLCBwdHIsIG92ZXJyaWRlKSAtPiBKc29uUG9pbnRlci5oYXMob2JqLCBwdHIsIG1lcmdlT3B0aW9ucyhvdmVycmlkZSkpXG4gICAgICBhcGkuZGVsID0gKG9iaiwgcHRyLCBvdmVycmlkZSkgLT4gSnNvblBvaW50ZXIuZGVsKG9iaiwgcHRyLCBtZXJnZU9wdGlvbnMob3ZlcnJpZGUpKVxuICAgIGVsc2UgaWYgaGFzT2JqXG4gICAgICBhcGkgPSAocHRyLCB2YWx1ZSkgLT5cbiAgICAgICAgcmV0dXJuIHN3aXRjaCBhcmd1bWVudHMubGVuZ3RoXG4gICAgICAgICAgd2hlbiAyIHRoZW4gSnNvblBvaW50ZXIuc2V0KG9iaiwgcHRyLCB2YWx1ZSlcbiAgICAgICAgICB3aGVuIDEgdGhlbiBKc29uUG9pbnRlci5nZXQob2JqLCBwdHIpXG4gICAgICAgICAgZWxzZSBudWxsXG5cbiAgICAgIGFwaS5zZXQgPSAocHRyLCB2YWx1ZSwgb3ZlcnJpZGUpIC0+IG9iaiA9IEpzb25Qb2ludGVyLnNldChvYmosIHB0ciwgdmFsdWUsIG92ZXJyaWRlKVxuICAgICAgYXBpLmdldCA9IChwdHIsIG92ZXJyaWRlKSAtPiBKc29uUG9pbnRlci5nZXQob2JqLCBwdHIsIG92ZXJyaWRlKVxuICAgICAgYXBpLmhhcyA9IChwdHIsIG92ZXJyaWRlKSAtPiBKc29uUG9pbnRlci5oYXMob2JqLCBwdHIsIG92ZXJyaWRlKVxuICAgICAgYXBpLmRlbCA9IChwdHIsIG92ZXJyaWRlKSAtPiBvYmogPSBKc29uUG9pbnRlci5kZWwob2JqLCBwdHIsIG92ZXJyaWRlKVxuICAgIGVsc2UgaWYgaGFzUHRyXG4gICAgICBhcGkgPSAob2JqLCB2YWx1ZSkgLT5cbiAgICAgICAgcmV0dXJuIHN3aXRjaCBhcmd1bWVudHMubGVuZ3RoXG4gICAgICAgICAgd2hlbiAyIHRoZW4gSnNvblBvaW50ZXIuc2V0KG9iaiwgcHRyLCB2YWx1ZSlcbiAgICAgICAgICB3aGVuIDEgdGhlbiBKc29uUG9pbnRlci5nZXQob2JqLCBwdHIpXG4gICAgICAgICAgZWxzZSBudWxsXG5cbiAgICAgIGFwaS5zZXQgPSAob2JqLCB2YWx1ZSwgb3ZlcnJpZGUpIC0+IEpzb25Qb2ludGVyLnNldChvYmosIHB0ciwgdmFsdWUsIG92ZXJyaWRlKVxuICAgICAgYXBpLmdldCA9IChvYmosIG92ZXJyaWRlKSAtPiBKc29uUG9pbnRlci5nZXQob2JqLCBwdHIsIG92ZXJyaWRlKVxuICAgICAgYXBpLmhhcyA9IChvYmosIG92ZXJyaWRlKSAtPiBKc29uUG9pbnRlci5oYXMob2JqLCBwdHIsIG92ZXJyaWRlKVxuICAgICAgYXBpLmRlbCA9IChvYmosIG92ZXJyaWRlKSAtPiBKc29uUG9pbnRlci5kZWwob2JqLCBwdHIsIG92ZXJyaWRlKVxuICAgIGVsc2VcbiAgICAgIHJldHVybiBAXG5cbiAgICAjIHNtYXJ0QmluZCBoYXMgbmV3IGRlZmF1bHRzXG4gICAgYXBpLnNtYXJ0QmluZCA9IChvdmVycmlkZSkgLT5cbiAgICAgIG8gPSB7fVxuXG4gICAgICBpZiB7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG92ZXJyaWRlLCAnb2JqZWN0JylcbiAgICAgICAgby5vYmplY3QgPSBvdmVycmlkZS5vYmplY3RcbiAgICAgIGVsc2UgaWYgaGFzT2JqXG4gICAgICAgIG8ub2JqZWN0ID0gb2JqXG5cbiAgICAgIGlmIHt9Lmhhc093blByb3BlcnR5LmNhbGwob3ZlcnJpZGUsICdwb2ludGVyJylcbiAgICAgICAgby5wb2ludGVyID0gb3ZlcnJpZGUucG9pbnRlclxuICAgICAgZWxzZSBpZiBoYXNQdHJcbiAgICAgICAgby5wb2ludGVyID0gcHRyXG5cbiAgICAgIGlmIHt9Lmhhc093blByb3BlcnR5LmNhbGwob3ZlcnJpZGUsICdvcHRpb25zJylcbiAgICAgICAgby5vcHRpb25zID0gbWVyZ2VPcHRpb25zKG92ZXJyaWRlLm9wdGlvbnMpXG4gICAgICBlbHNlIGlmIGhhc09ialxuICAgICAgICBvLm9wdGlvbnMgPSBvcHRcblxuICAgICAgcmV0dXJuIEpzb25Qb2ludGVyLnNtYXJ0QmluZChvKVxuXG4gICAgaWYgaGFzUHRyXG4gICAgICAjIyNcbiAgICAgICMgZ2V0L3NldCBib3VuZCBwb2ludGVyIHZhbHVlXG4gICAgICAjXG4gICAgICAjIE9ubHkgYXZhaWxhYmxlIHdoZW4gcG9pbnRlciBoYXMgYmVlbiBib3VuZFxuICAgICAgI1xuICAgICAgIyBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgICMgQHJldHVybnMgc3RyaW5nW10gc2VnbWVudHNcbiAgICAgICMjI1xuICAgICAgYXBpLnBvaW50ZXIgPSAodmFsdWUpIC0+XG4gICAgICAgIGlmIGFyZ3VtZW50cy5sZW5ndGggPT0gMFxuICAgICAgICAgIHJldHVybiBKc29uUG9pbnRlci5jb21waWxlUG9pbnRlcihwdHIpXG4gICAgICAgIGVsc2VcbiAgICAgICAgICByZXR1cm4gcHRyID0gSnNvblBvaW50ZXIucGFyc2VQb2ludGVyKHZhbHVlKVxuXG4gICAgICAjIyNcbiAgICAgICMgZ2V0L3NldCBib3VuZCBwb2ludGVyIHZhbHVlIGFzIGZyYWdtZW50XG4gICAgICAjXG4gICAgICAjIE9ubHkgYXZhaWxhYmxlIHdoZW4gcG9pbnRlciBoYXMgYmVlbiBib3VuZFxuICAgICAgI1xuICAgICAgIyBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgICMgQHJldHVybnMgc3RyaW5nW10gc2VnbWVudHNcbiAgICAgICMjI1xuICAgICAgYXBpLmZyYWdtZW50ID0gKHZhbHVlKSAtPlxuICAgICAgICBpZiBhcmd1bWVudHMubGVuZ3RoID09IDBcbiAgICAgICAgICByZXR1cm4gSnNvblBvaW50ZXIuY29tcGlsZUZyYWdtZW50KHB0cilcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHJldHVybiBwdHIgPSBKc29uUG9pbnRlci5wYXJzZUZyYWdtZW50KHZhbHVlKVxuXG4gICAgaWYgaGFzT2JqXG4gICAgICAjIyNcbiAgICAgICMgZ2V0L3NldCBib3VuZCBvYmplY3RcbiAgICAgICNcbiAgICAgICMgT25seSBhdmFpbGFibGUgd2hlbiBvYmplY3QgaGFzIGJlZW4gYm91bmRcbiAgICAgICNcbiAgICAgICMgQHBhcmFtIHsqfSB2YWx1ZVxuICAgICAgIyBAcmV0dXJucyB7Kn0gYm91bmQgb2JqZWN0XG4gICAgICAjIyNcbiAgICAgIGFwaS5vYmplY3QgPSAodmFsdWUpIC0+XG4gICAgICAgIGlmIGFyZ3VtZW50cy5sZW5ndGggPT0gMFxuICAgICAgICAgIHJldHVybiBvYmpcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHJldHVybiBvYmogPSB2YWx1ZVxuXG4gICAgaWYgaGFzT3B0XG4gICAgICAjIyNcbiAgICAgICMgZ2V0L3NldCBib3VuZCBvcHRpb25zXG4gICAgICAjXG4gICAgICAjIE9ubHkgYXZhaWxhYmxlIHdoZW4gb3B0aW9ucyBoYXMgYmVlbiBib3VuZFxuICAgICAgI1xuICAgICAgIyBAcGFyYW0geyp9IHZhbHVlXG4gICAgICAjIEByZXR1cm5zIHsqfSBib3VuZCBvcHRpb25zXG4gICAgICAjIyNcbiAgICAgIGFwaS5vcHRpb25zID0gKHZhbHVlKSAtPlxuICAgICAgICBpZiBhcmd1bWVudHMubGVuZ3RoID09IDBcbiAgICAgICAgICByZXR1cm4gb3B0XG4gICAgICAgIGVsc2VcbiAgICAgICAgICByZXR1cm4gb3B0ID0gdmFsdWVcblxuICAgICMgY29weSB0aGUgcmVtYWluaW5nIG1ldGhvZHMgd2hpY2ggZG8gbm90IG5lZWQgYmluZGluZ1xuICAgIGZvciBvd24ga2V5LCB2YWwgb2YgSnNvblBvaW50ZXJcbiAgICAgIGlmIG5vdCB7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGFwaSwga2V5KVxuICAgICAgICBhcGlba2V5XSA9IHZhbFxuXG4gICAgIyBmaW5hbCByZXN1bHRcbiAgICByZXR1cm4gYXBpXG5cbiAgIyMjXG4gICMgRXNjYXBlcyB0aGUgZ2l2ZW4gcGF0aCBzZWdtZW50IGFzIGRlc2NyaWJlZCBieSBSRkM2OTAxLlxuICAjXG4gICMgTm90YWJseSwgYCd+J2AncyBhcmUgcmVwbGFjZWQgd2l0aCBgJ34wJ2AgYW5kIGAnLydgJ3MgYXJlIHJlcGxhY2VkIHdpdGggYCd+MSdgLlxuICAjXG4gICMgQHBhcmFtIHtzdHJpbmd9IHNlZ21lbnRcbiAgIyBAcmV0dXJucyB7c3RyaW5nfVxuICAjIyNcbiAgQGVzY2FwZTogKHNlZ21lbnQpIC0+XG4gICAgc2VnbWVudC5yZXBsYWNlKC9+L2csICd+MCcpLnJlcGxhY2UoL1xcLy9nLCAnfjEnKVxuXG4gICMjI1xuICAjIEVzY2FwZXMgdGhlIGdpdmVuIHBhdGggZnJhZ21lbnQgc2VnbWVudCBhcyBkZXNjcmliZWQgYnkgUkZDNjkwMS5cbiAgI1xuICAjIE5vdGFibHksIGAnfidgJ3MgYXJlIHJlcGxhY2VkIHdpdGggYCd+MCdgIGFuZCBgJy8nYCdzIGFyZSByZXBsYWNlZCB3aXRoIGAnfjEnYCBhbmQgZmluYWxseSB0aGUgc3RyaW5nIGlzIFVSSSBlbmNvZGVkLlxuICAjXG4gICMgQHBhcmFtIHtzdHJpbmd9IHNlZ21lbnRcbiAgIyBAcmV0dXJucyB7c3RyaW5nfVxuICAjIyNcbiAgQGVzY2FwZUZyYWdtZW50OiAoc2VnbWVudCkgLT5cbiAgICBlbmNvZGVVUklDb21wb25lbnQoSnNvblBvaW50ZXIuZXNjYXBlKHNlZ21lbnQpKVxuXG4gICMjI1xuICAjIFVuLUVzY2FwZXMgdGhlIGdpdmVuIHBhdGggc2VnbWVudCwgcmV2ZXJzaW5nIHRoZSBhY3Rpb25zIG9mIGAuZXNjYXBlYC5cbiAgI1xuICAjIE5vdGFibHksIGAnfjEnYCdzIGFyZSByZXBsYWNlZCB3aXRoIGAnLydgIGFuZCBgJ34wJ2AncyBhcmUgcmVwbGFjZWQgd2l0aCBgJ34nYC5cbiAgI1xuICAjIEBwYXJhbSB7c3RyaW5nfSBzZWdtZW50XG4gICMgQHJldHVybnMge3N0cmluZ31cbiAgIyMjXG4gIEB1bmVzY2FwZTogKHNlZ21lbnQpIC0+XG4gICAgc2VnbWVudC5yZXBsYWNlKC9+MS9nLCAnLycpLnJlcGxhY2UoL34wL2csICd+JylcblxuICAjIyNcbiAgIyBVbi1Fc2NhcGVzIHRoZSBnaXZlbiBwYXRoIGZyYWdtZW50IHNlZ21lbnQsIHJldmVyc2luZyB0aGUgYWN0aW9ucyBvZiBgLmVzY2FwZUZyYWdtZW50YC5cbiAgI1xuICAjIE5vdGFibHksIHRoZSBzdHJpbmcgaXMgVVJJIGRlY29kZWQgYW5kIHRoZW4gYCd+MSdgJ3MgYXJlIHJlcGxhY2VkIHdpdGggYCcvJ2AgYW5kIGAnfjAnYCdzIGFyZSByZXBsYWNlZCB3aXRoIGAnfidgLlxuICAjXG4gICMgQHBhcmFtIHtzdHJpbmd9IHNlZ21lbnRcbiAgIyBAcmV0dXJucyB7c3RyaW5nfVxuICAjIyNcbiAgQHVuZXNjYXBlRnJhZ21lbnQ6IChzZWdtZW50KSAtPlxuICAgIEpzb25Qb2ludGVyLnVuZXNjYXBlKGRlY29kZVVSSUNvbXBvbmVudChzZWdtZW50KSlcblxuICAjIyNcbiAgIyBSZXR1cm5zIHRydWUgaWZmIGBzdHJgIGlzIGEgdmFsaWQganNvbiBwb2ludGVyIHZhbHVlXG4gICNcbiAgIyBAcGFyYW0ge3N0cmluZ30gc3RyXG4gICMgQHJldHVybnMge0Jvb2xlYW59XG4gICMjI1xuICBAaXNQb2ludGVyOiAoc3RyKSAtPlxuICAgIHN3aXRjaCBzdHIuY2hhckF0KDApXG4gICAgICB3aGVuICcnIHRoZW4gcmV0dXJuIHRydWVcbiAgICAgIHdoZW4gJy8nIHRoZW4gcmV0dXJuIHRydWVcbiAgICAgIGVsc2VcbiAgICAgICAgcmV0dXJuIGZhbHNlXG5cbiAgIyMjXG4gICMgUmV0dXJucyB0cnVlIGlmZiBgc3RyYCBpcyBhIHZhbGlkIGpzb24gZnJhZ21lbnQgcG9pbnRlciB2YWx1ZVxuICAjXG4gICMgQHBhcmFtIHtzdHJpbmd9IHN0clxuICAjIEByZXR1cm5zIHtCb29sZWFufVxuICAjIyNcbiAgQGlzRnJhZ21lbnQ6IChzdHIpIC0+XG4gICAgc3dpdGNoIHN0ci5zdWJzdHJpbmcoMCwgMilcbiAgICAgIHdoZW4gJyMnIHRoZW4gcmV0dXJuIHRydWVcbiAgICAgIHdoZW4gJyMvJyB0aGVuIHJldHVybiB0cnVlXG4gICAgICBlbHNlXG4gICAgICAgIHJldHVybiBmYWxzZVxuXG4gICMjI1xuICAjIFBhcnNlcyBhIGpzb24tcG9pbnRlciBvciBqc29uIGZyYWdtZW50IHBvaW50ZXIsIGFzIGRlc2NyaWJlZCBieSBSRkM5MDEsIGludG8gYW4gYXJyYXkgb2YgcGF0aCBzZWdtZW50cy5cbiAgI1xuICAjIEB0aHJvd3Mge0pzb25Qb2ludGVyRXJyb3J9IGZvciBpbnZhbGlkIGpzb24tcG9pbnRlcnMuXG4gICNcbiAgIyBAcGFyYW0ge3N0cmluZ30gc3RyXG4gICMgQHJldHVybnMge3N0cmluZ1tdfVxuICAjIyNcbiAgQHBhcnNlOiAoc3RyKSAtPlxuICAgIHN3aXRjaCBzdHIuY2hhckF0KDApXG4gICAgICB3aGVuICcnIHRoZW4gcmV0dXJuIFtdXG4gICAgICB3aGVuICcvJyB0aGVuIHJldHVybiBzdHIuc3Vic3RyaW5nKDEpLnNwbGl0KCcvJykubWFwKEpzb25Qb2ludGVyLnVuZXNjYXBlKVxuICAgICAgd2hlbiAnIydcbiAgICAgICAgc3dpdGNoIHN0ci5jaGFyQXQoMSlcbiAgICAgICAgICB3aGVuICcnIHRoZW4gcmV0dXJuIFtdXG4gICAgICAgICAgd2hlbiAnLycgdGhlbiByZXR1cm4gc3RyLnN1YnN0cmluZygyKS5zcGxpdCgnLycpLm1hcChKc29uUG9pbnRlci51bmVzY2FwZUZyYWdtZW50KVxuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRocm93IG5ldyBKc29uUG9pbnRlckVycm9yKFwiSW52YWxpZCBKU09OIGZyYWdtZW50IHBvaW50ZXI6ICN7c3RyfVwiKVxuICAgICAgZWxzZVxuICAgICAgICB0aHJvdyBuZXcgSnNvblBvaW50ZXJFcnJvcihcIkludmFsaWQgSlNPTiBwb2ludGVyOiAje3N0cn1cIilcblxuICAjIyNcbiAgIyBQYXJzZXMgYSBqc29uLXBvaW50ZXIsIGFzIGRlc2NyaWJlZCBieSBSRkM5MDEsIGludG8gYW4gYXJyYXkgb2YgcGF0aCBzZWdtZW50cy5cbiAgI1xuICAjIEB0aHJvd3Mge0pzb25Qb2ludGVyRXJyb3J9IGZvciBpbnZhbGlkIGpzb24tcG9pbnRlcnMuXG4gICNcbiAgIyBAcGFyYW0ge3N0cmluZ30gc3RyXG4gICMgQHJldHVybnMge3N0cmluZ1tdfVxuICAjIyNcbiAgQHBhcnNlUG9pbnRlcjogKHN0cikgLT5cbiAgICBzd2l0Y2ggc3RyLmNoYXJBdCgwKVxuICAgICAgd2hlbiAnJyB0aGVuIHJldHVybiBbXVxuICAgICAgd2hlbiAnLycgdGhlbiByZXR1cm4gc3RyLnN1YnN0cmluZygxKS5zcGxpdCgnLycpLm1hcChKc29uUG9pbnRlci51bmVzY2FwZSlcbiAgICAgIGVsc2UgdGhyb3cgbmV3IEpzb25Qb2ludGVyRXJyb3IoXCJJbnZhbGlkIEpTT04gcG9pbnRlcjogI3tzdHJ9XCIpXG5cbiAgIyMjXG4gICMgUGFyc2VzIGEganNvbiBmcmFnbWVudCBwb2ludGVyLCBhcyBkZXNjcmliZWQgYnkgUkZDOTAxLCBpbnRvIGFuIGFycmF5IG9mIHBhdGggc2VnbWVudHMuXG4gICNcbiAgIyBAdGhyb3dzIHtKc29uUG9pbnRlckVycm9yfSBmb3IgaW52YWxpZCBqc29uLXBvaW50ZXJzLlxuICAjXG4gICMgQHBhcmFtIHtzdHJpbmd9IHN0clxuICAjIEByZXR1cm5zIHtzdHJpbmdbXX1cbiAgIyMjXG4gIEBwYXJzZUZyYWdtZW50OiAoc3RyKSAtPlxuICAgIHN3aXRjaCBzdHIuc3Vic3RyaW5nKDAsIDIpXG4gICAgICB3aGVuICcjJyB0aGVuIHJldHVybiBbXVxuICAgICAgd2hlbiAnIy8nIHRoZW4gcmV0dXJuIHN0ci5zdWJzdHJpbmcoMikuc3BsaXQoJy8nKS5tYXAoSnNvblBvaW50ZXIudW5lc2NhcGVGcmFnbWVudClcbiAgICAgIGVsc2VcbiAgICAgICAgdGhyb3cgbmV3IEpzb25Qb2ludGVyRXJyb3IoXCJJbnZhbGlkIEpTT04gZnJhZ21lbnQgcG9pbnRlcjogI3tzdHJ9XCIpXG5cbiAgIyMjXG4gICMgQ29udmVydHMgYW4gYXJyYXkgb2YgcGF0aCBzZWdtZW50cyBpbnRvIGEganNvbiBwb2ludGVyLlxuICAjIFRoaXMgbWV0aG9kIGlzIHRoZSByZXZlcnNlIG9mIGAucGFyc2VQb2ludGVyYC5cbiAgI1xuICAjIEBwYXJhbSB7c3RyaW5nW119IHNlZ21lbnRzXG4gICMgQHJldHVybnMge3N0cmluZ31cbiAgIyMjXG4gIEBjb21waWxlOiAoc2VnbWVudHMpIC0+XG4gICAgc2VnbWVudHMubWFwKChzZWdtZW50KSAtPiAnLycgKyBKc29uUG9pbnRlci5lc2NhcGUoc2VnbWVudCkpLmpvaW4oJycpXG5cbiAgIyMjXG4gICMgQ29udmVydHMgYW4gYXJyYXkgb2YgcGF0aCBzZWdtZW50cyBpbnRvIGEganNvbiBwb2ludGVyLlxuICAjIFRoaXMgbWV0aG9kIGlzIHRoZSByZXZlcnNlIG9mIGAucGFyc2VQb2ludGVyYC5cbiAgI1xuICAjIEBwYXJhbSB7c3RyaW5nW119IHNlZ21lbnRzXG4gICMgQHJldHVybnMge3N0cmluZ31cbiAgIyMjXG4gIEBjb21waWxlUG9pbnRlcjogKHNlZ21lbnRzKSAtPlxuICAgIHNlZ21lbnRzLm1hcCgoc2VnbWVudCkgLT4gJy8nICsgSnNvblBvaW50ZXIuZXNjYXBlKHNlZ21lbnQpKS5qb2luKCcnKVxuXG4gICMjI1xuICAjIENvbnZlcnRzIGFuIGFycmF5IG9mIHBhdGggc2VnbWVudHMgaW50byBhIGpzb24gZnJhZ21lbnQgcG9pbnRlci5cbiAgIyBUaGlzIG1ldGhvZCBpcyB0aGUgcmV2ZXJzZSBvZiBgLnBhcnNlRnJhZ21lbnRgLlxuICAjXG4gICMgQHBhcmFtIHtzdHJpbmdbXX0gc2VnbWVudHNcbiAgIyBAcmV0dXJucyB7c3RyaW5nfVxuICAjIyNcbiAgQGNvbXBpbGVGcmFnbWVudDogKHNlZ21lbnRzKSAtPlxuICAgICcjJyArIHNlZ21lbnRzLm1hcCgoc2VnbWVudCkgLT4gJy8nICsgSnNvblBvaW50ZXIuZXNjYXBlRnJhZ21lbnQoc2VnbWVudCkpLmpvaW4oJycpXG5cbiAgIyMjXG4gICMgQ2FsbGJhY2sgdXNlZCB0byBkZXRlcm1pbmUgaWYgYW4gb2JqZWN0IGNvbnRhaW5zIGEgZ2l2ZW4gcHJvcGVydHkuXG4gICNcbiAgIyBAY2FsbGJhY2sgaGFzUHJvcFxuICAjIEBwYXJhbSB7Kn0gb2JqXG4gICMgQHBhcmFtIHtzdHJpbmd8aW50ZWdlcn0ga2V5XG4gICMgQHJldHVybnMge0Jvb2xlYW59XG4gICMjI1xuXG4gICMjI1xuICAjIFJldHVybnMgdHJ1ZSBpZmYgYG9iamAgY29udGFpbnMgYGtleWAgYW5kIGBvYmpgIGlzIGVpdGhlciBhbiBBcnJheSBvciBhbiBPYmplY3QuXG4gICMgSWdub3JlcyB0aGUgcHJvdG90eXBlIGNoYWluLlxuICAjXG4gICMgRGVmYXVsdCB2YWx1ZSBmb3IgYG9wdGlvbnMuaGFzUHJvcGAuXG4gICNcbiAgIyBAcGFyYW0geyp9IG9ialxuICAjIEBwYXJhbSB7c3RyaW5nfGludGVnZXJ9IGtleVxuICAjIEByZXR1cm5zIHtCb29sZWFufVxuICAjIyNcbiAgQGhhc0pzb25Qcm9wOiAob2JqLCBrZXkpIC0+XG4gICAgaWYgQXJyYXkuaXNBcnJheShvYmopXG4gICAgICByZXR1cm4gKHR5cGVvZiBrZXkgPT0gJ251bWJlcicpIGFuZCAoa2V5IDwgb2JqLmxlbmd0aClcbiAgICBlbHNlIGlmIHR5cGVvZiBvYmogPT0gJ29iamVjdCdcbiAgICAgIHJldHVybiB7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KVxuICAgIGVsc2VcbiAgICAgIHJldHVybiBmYWxzZVxuXG4gICMjI1xuICAjIFJldHVybnMgdHJ1ZSBpZmYgYG9iamAgY29udGFpbnMgYGtleWAsIGRpc3JlZ2FyZGluZyB0aGUgcHJvdG90eXBlIGNoYWluLlxuICAjXG4gICMgQHBhcmFtIHsqfSBvYmpcbiAgIyBAcGFyYW0ge3N0cmluZ3xpbnRlZ2VyfSBrZXlcbiAgIyBAcmV0dXJucyB7Qm9vbGVhbn1cbiAgIyMjXG4gIEBoYXNPd25Qcm9wOiAob2JqLCBrZXkpIC0+XG4gICAge30uaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSlcblxuICAjIyNcbiAgIyBSZXR1cm5zIHRydWUgaWZmIGBvYmpgIGNvbnRhaW5zIGBrZXlgLCBpbmNsdWRpbmcgdmlhIHRoZSBwcm90b3R5cGUgY2hhaW4uXG4gICNcbiAgIyBAcGFyYW0geyp9IG9ialxuICAjIEBwYXJhbSB7c3RyaW5nfGludGVnZXJ9IGtleVxuICAjIEByZXR1cm5zIHtCb29sZWFufVxuICAjIyNcbiAgQGhhc1Byb3A6IChvYmosIGtleSkgLT5cbiAgICBrZXkgb2Ygb2JqXG5cbiAgIyMjXG4gICMgQ2FsbGJhY2sgdXNlZCB0byByZXRyaWV2ZSBhIHByb3BlcnR5IGZyb20gYW4gb2JqZWN0XG4gICNcbiAgIyBAY2FsbGJhY2sgZ2V0UHJvcFxuICAjIEBwYXJhbSB7Kn0gb2JqXG4gICMgQHBhcmFtIHtzdHJpbmd8aW50ZWdlcn0ga2V5XG4gICMgQHJldHVybnMgeyp9XG4gICMjI1xuXG4gICMjI1xuICAjIEZpbmRzIHRoZSBnaXZlbiBga2V5YCBpbiBgb2JqYC5cbiAgI1xuICAjIERlZmF1bHQgdmFsdWUgZm9yIGBvcHRpb25zLmdldFByb3BgLlxuICAjXG4gICMgQHBhcmFtIHsqfSBvYmpcbiAgIyBAcGFyYW0ge3N0cmluZ3xpbnRlZ2VyfSBrZXlcbiAgIyBAcmV0dXJucyB7Kn1cbiAgIyMjXG4gIEBnZXRQcm9wOiAob2JqLCBrZXkpIC0+XG4gICAgb2JqW2tleV1cblxuICAjIyNcbiAgIyBDYWxsYmFjayB1c2VkIHRvIHNldCBhIHByb3BlcnR5IG9uIGFuIG9iamVjdC5cbiAgI1xuICAjIEBjYWxsYmFjayBzZXRQcm9wXG4gICMgQHBhcmFtIHsqfSBvYmpcbiAgIyBAcGFyYW0ge3N0cmluZ3xpbnRlZ2VyfSBrZXlcbiAgIyBAcGFyYW0geyp9IHZhbHVlXG4gICMgQHJldHVybnMgeyp9XG4gICMjI1xuXG4gICMjI1xuICAjIFNldHMgdGhlIGdpdmVuIGBrZXlgIGluIGBvYmpgIHRvIGB2YWx1ZWAuXG4gICNcbiAgIyBEZWZhdWx0IHZhbHVlIGZvciBgb3B0aW9ucy5zZXRQcm9wYC5cbiAgI1xuICAjIEBwYXJhbSB7Kn0gb2JqXG4gICMgQHBhcmFtIHtzdHJpbmd8aW50ZWdlcn0ga2V5XG4gICMgQHBhcmFtIHsqfSB2YWx1ZVxuICAjIEByZXR1cm5zIHsqfSBgdmFsdWVgXG4gICMjI1xuICBAc2V0UHJvcDogKG9iaiwga2V5LCB2YWx1ZSkgLT5cbiAgICBvYmpba2V5XSA9IHZhbHVlXG5cbiAgIyMjXG4gICMgQ2FsbGJhY2sgdXNlZCB0byBtb2RpZnkgYmVoYXZpb3VyIHdoZW4gYSBnaXZlbiBwYXRoIHNlZ21lbnQgY2Fubm90IGJlIGZvdW5kLlxuICAjXG4gICMgQGNhbGxiYWNrIG5vdEZvdW5kXG4gICMgQHBhcmFtIHsqfSBvYmpcbiAgIyBAcGFyYW0ge3N0cmluZ3xpbnRlZ2VyfSBrZXlcbiAgIyBAcmV0dXJucyB7Kn1cbiAgIyMjXG5cbiAgIyMjXG4gICMgUmV0dXJucyB0aGUgdmFsdWUgdG8gdXNlIHdoZW4gYC5nZXRgIGZhaWxzIHRvIGxvY2F0ZSBhIHBvaW50ZXIgc2VnbWVudC5cbiAgI1xuICAjIERlZmF1bHQgdmFsdWUgZm9yIGBvcHRpb25zLmdldE5vdEZvdW5kYC5cbiAgI1xuICAjIEBwYXJhbSB7Kn0gb2JqXG4gICMgQHBhcmFtIHtzdHJpbmd8aW50ZWdlcn0gc2VnbWVudFxuICAjIEBwYXJhbSB7Kn0gcm9vdFxuICAjIEBwYXJhbSB7c3RyaW5nW119IHNlZ21lbnRzXG4gICMgQHBhcmFtIHtpbnRlZ2VyfSBpU2VnbWVudFxuICAjIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gICMjI1xuICBAZ2V0Tm90Rm91bmQ6IChvYmosIHNlZ21lbnQsIHJvb3QsIHNlZ21lbnRzLCBpU2VnbWVudCkgLT5cbiAgICB1bmRlZmluZWRcblxuICAjIyNcbiAgIyBSZXR1cm5zIHRoZSB2YWx1ZSB0byB1c2Ugd2hlbiBgLnNldGAgZmFpbHMgdG8gbG9jYXRlIGEgcG9pbnRlciBzZWdtZW50LlxuICAjXG4gICMgRGVmYXVsdCB2YWx1ZSBmb3IgYG9wdGlvbnMuc2V0Tm90Rm91bmRgLlxuICAjXG4gICMgQHBhcmFtIHsqfSBvYmpcbiAgIyBAcGFyYW0ge3N0cmluZ3xpbnRlZ2VyfSBzZWdtZW50XG4gICMgQHBhcmFtIHsqfSByb290XG4gICMgQHBhcmFtIHtzdHJpbmdbXX0gc2VnbWVudHNcbiAgIyBAcGFyYW0ge2ludGVnZXJ9IGlTZWdtZW50XG4gICMgQHJldHVybnMge3VuZGVmaW5lZH1cbiAgIyMjXG4gIEBzZXROb3RGb3VuZDogKG9iaiwgc2VnbWVudCwgcm9vdCwgc2VnbWVudHMsIGlTZWdtZW50KSAtPlxuICAgIGlmIHNlZ21lbnRzW2lTZWdtZW50ICsgMV0ubWF0Y2goL14oPzowfFsxLTldXFxkKnwtKSQvKVxuICAgICAgcmV0dXJuIG9ialtzZWdtZW50XSA9IFtdXG4gICAgZWxzZVxuICAgICAgcmV0dXJuIG9ialtzZWdtZW50XSA9IHt9XG5cbiAgIyMjXG4gICMgUGVyZm9ybXMgYW4gYWN0aW9uIHdoZW4gYC5kZWxgIGZhaWxzIHRvIGxvY2F0ZSBhIHBvaW50ZXIgc2VnbWVudC5cbiAgI1xuICAjIERlZmF1bHQgdmFsdWUgZm9yIGBvcHRpb25zLmRlbE5vdEZvdW5kYC5cbiAgI1xuICAjIEBwYXJhbSB7Kn0gb2JqXG4gICMgQHBhcmFtIHtzdHJpbmd8aW50ZWdlcn0gc2VnbWVudFxuICAjIEBwYXJhbSB7Kn0gcm9vdFxuICAjIEBwYXJhbSB7c3RyaW5nW119IHNlZ21lbnRzXG4gICMgQHBhcmFtIHtpbnRlZ2VyfSBpU2VnbWVudFxuICAjIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gICMjI1xuICBAZGVsTm90Rm91bmQ6IChvYmosIHNlZ21lbnQsIHJvb3QsIHNlZ21lbnRzLCBpU2VnbWVudCkgLT5cbiAgICB1bmRlZmluZWRcblxuICAjIyNcbiAgIyBSYWlzZXMgYSBKc29uUG9pbnRlckVycm9yIHdoZW4gdGhlIGdpdmVuIHBvaW50ZXIgc2VnbWVudCBpcyBub3QgZm91bmQuXG4gICNcbiAgIyBNYXkgYmUgdXNlZCBpbiBwbGFjZSBvZiB0aGUgYWJvdmUgbWV0aG9kcyB2aWEgdGhlIGBvcHRpb25zYCBhcmd1bWVudCBvZiBgLi8uZ2V0Ly5zZXQvLmhhcy8uZGVsLy5zaW1wbGVCaW5kYC5cbiAgI1xuICAjIEBwYXJhbSB7Kn0gb2JqXG4gICMgQHBhcmFtIHtzdHJpbmd8aW50ZWdlcn0gc2VnbWVudFxuICAjIEBwYXJhbSB7Kn0gcm9vdFxuICAjIEBwYXJhbSB7c3RyaW5nW119IHNlZ21lbnRzXG4gICMgQHBhcmFtIHtpbnRlZ2VyfSBpU2VnbWVudFxuICAjIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gICMjI1xuICBAZXJyb3JOb3RGb3VuZDogKG9iaiwgc2VnbWVudCwgcm9vdCwgc2VnbWVudHMsIGlTZWdtZW50KSAtPlxuICAgIHRocm93IG5ldyBKc29uUG9pbnRlckVycm9yKFwiVW5hYmxlIHRvIGZpbmQganNvbiBwYXRoOiAje0pzb25Qb2ludGVyLmNvbXBpbGUoc2VnbWVudHMuc2xpY2UoMCwgaVNlZ21lbnQrMSkpfVwiKVxuXG4gICMjI1xuICAjIFNldHMgdGhlIGxvY2F0aW9uIGluIGBvYmplY3RgLCBzcGVjaWZpZWQgYnkgYHBvaW50ZXJgLCB0byBgdmFsdWVgLlxuICAjIElmIGBwb2ludGVyYCByZWZlcnMgdG8gdGhlIHdob2xlIGRvY3VtZW50LCBgdmFsdWVgIGlzIHJldHVybmVkIHdpdGhvdXQgbW9kaWZ5aW5nIGBvYmplY3RgLFxuICAjIG90aGVyd2lzZSwgYG9iamVjdGAgbW9kaWZpZWQgYW5kIHJldHVybmVkLlxuICAjXG4gICMgQnkgZGVmYXVsdCwgaWYgYW55IGxvY2F0aW9uIHNwZWNpZmllZCBieSBgcG9pbnRlcmAgZG9lcyBub3QgZXhpc3QsIHRoZSBsb2NhdGlvbiBpcyBjcmVhdGVkIHVzaW5nIG9iamVjdHMgYW5kIGFycmF5cy5cbiAgIyBBcnJheXMgYXJlIHVzZWQgb25seSB3aGVuIHRoZSBpbW1lZGlhdGVseSBmb2xsb3dpbmcgcGF0aCBzZWdtZW50IGlzIGFuIGFycmF5IGVsZW1lbnQgYXMgZGVmaW5lZCBieSB0aGUgc3RhbmRhcmQuXG4gICNcbiAgIyBAcGFyYW0geyp9IG9ialxuICAjIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBwb2ludGVyXG4gICMgQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgIyBAcGFyYW0ge2hhc1Byb3B9IG9wdGlvbnMuaGFzUHJvcFxuICAjIEBwYXJhbSB7Z2V0UHJvcH0gb3B0aW9ucy5nZXRQcm9wXG4gICMgQHBhcmFtIHtzZXRQcm9wfSBvcHRpb25zLnNldFByb3BcbiAgIyBAcGFyYW0ge25vdEZvdW5kfSBvcHRpb25zLmdldE5vdEZvdW5kXG4gICMgQHJldHVybnMgeyp9XG4gICMjI1xuICBAc2V0OiAob2JqLCBwb2ludGVyLCB2YWx1ZSwgb3B0aW9ucykgLT5cbiAgICBpZiB0eXBlb2YgcG9pbnRlciA9PSAnc3RyaW5nJ1xuICAgICAgcG9pbnRlciA9IEpzb25Qb2ludGVyLnBhcnNlKHBvaW50ZXIpXG5cbiAgICBpZiBwb2ludGVyLmxlbmd0aCA9PSAwXG4gICAgICByZXR1cm4gdmFsdWVcblxuICAgIGhhc1Byb3AgPSBvcHRpb25zPy5oYXNQcm9wID8gSnNvblBvaW50ZXIuaGFzSnNvblByb3BcbiAgICBnZXRQcm9wID0gb3B0aW9ucz8uZ2V0UHJvcCA/IEpzb25Qb2ludGVyLmdldFByb3BcbiAgICBzZXRQcm9wID0gb3B0aW9ucz8uc2V0UHJvcCA/IEpzb25Qb2ludGVyLnNldFByb3BcbiAgICBzZXROb3RGb3VuZCA9IG9wdGlvbnM/LnNldE5vdEZvdW5kID8gSnNvblBvaW50ZXIuc2V0Tm90Rm91bmRcblxuICAgIHJvb3QgPSBvYmpcbiAgICBpU2VnbWVudCA9IDBcbiAgICBsZW4gPSBwb2ludGVyLmxlbmd0aFxuXG4gICAgd2hpbGUgaVNlZ21lbnQgIT0gbGVuXG4gICAgICBzZWdtZW50ID0gcG9pbnRlcltpU2VnbWVudF1cbiAgICAgICsraVNlZ21lbnRcblxuICAgICAgaWYgc2VnbWVudCA9PSAnLScgYW5kIEFycmF5LmlzQXJyYXkob2JqKVxuICAgICAgICBzZWdtZW50ID0gb2JqLmxlbmd0aFxuICAgICAgZWxzZSBpZiBzZWdtZW50Lm1hdGNoKC9eKD86MHxbMS05XVxcZCopJC8pIGFuZCBBcnJheS5pc0FycmF5KG9iailcbiAgICAgICAgc2VnbWVudCA9IHBhcnNlSW50KHNlZ21lbnQsIDEwKVxuXG4gICAgICBpZiBpU2VnbWVudCA9PSBsZW5cbiAgICAgICAgc2V0UHJvcChvYmosIHNlZ21lbnQsIHZhbHVlKVxuICAgICAgICBicmVha1xuICAgICAgZWxzZSBpZiBub3QgaGFzUHJvcChvYmosIHNlZ21lbnQpXG4gICAgICAgIG9iaiA9IHNldE5vdEZvdW5kKG9iaiwgc2VnbWVudCwgcm9vdCwgcG9pbnRlciwgaVNlZ21lbnQgLSAxKVxuICAgICAgZWxzZVxuICAgICAgICBvYmogPSBnZXRQcm9wKG9iaiwgc2VnbWVudClcblxuICAgIHJldHVybiByb290XG5cbiAgIyMjXG4gICMgRmluZHMgdGhlIHZhbHVlIGluIGBvYmpgIGFzIHNwZWNpZmllZCBieSBgcG9pbnRlcmBcbiAgI1xuICAjIEJ5IGRlZmF1bHQsIHJldHVybnMgdW5kZWZpbmVkIGZvciB2YWx1ZXMgd2hpY2ggY2Fubm90IGJlIGZvdW5kXG4gICNcbiAgIyBAcGFyYW0geyp9IG9ialxuICAjIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBwb2ludGVyXG4gICMgQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgIyBAcGFyYW0ge2hhc1Byb3B9IG9wdGlvbnMuaGFzUHJvcFxuICAjIEBwYXJhbSB7Z2V0UHJvcH0gb3B0aW9ucy5nZXRQcm9wXG4gICMgQHBhcmFtIHtub3RGb3VuZH0gb3B0aW9ucy5nZXROb3RGb3VuZFxuICAjIEByZXR1cm5zIHsqfVxuICAjIyNcbiAgQGdldDogKG9iaiwgcG9pbnRlciwgb3B0aW9ucykgLT5cbiAgICBpZiB0eXBlb2YgcG9pbnRlciA9PSAnc3RyaW5nJ1xuICAgICAgcG9pbnRlciA9IEpzb25Qb2ludGVyLnBhcnNlKHBvaW50ZXIpXG5cbiAgICBoYXNQcm9wID0gb3B0aW9ucz8uaGFzUHJvcCA/IEpzb25Qb2ludGVyLmhhc0pzb25Qcm9wXG4gICAgZ2V0UHJvcCA9IG9wdGlvbnM/LmdldFByb3AgPyBKc29uUG9pbnRlci5nZXRQcm9wXG4gICAgZ2V0Tm90Rm91bmQgPSBvcHRpb25zPy5nZXROb3RGb3VuZCA/IEpzb25Qb2ludGVyLmdldE5vdEZvdW5kXG5cbiAgICByb290ID0gb2JqXG4gICAgaVNlZ21lbnQgPSAwXG4gICAgbGVuID0gcG9pbnRlci5sZW5ndGhcbiAgICB3aGlsZSBpU2VnbWVudCAhPSBsZW5cbiAgICAgIHNlZ21lbnQgPSBwb2ludGVyW2lTZWdtZW50XVxuICAgICAgKytpU2VnbWVudFxuXG4gICAgICBpZiBzZWdtZW50ID09ICctJyBhbmQgQXJyYXkuaXNBcnJheShvYmopXG4gICAgICAgIHNlZ21lbnQgPSBvYmoubGVuZ3RoXG4gICAgICBlbHNlIGlmIHNlZ21lbnQubWF0Y2goL14oPzowfFsxLTldXFxkKikkLykgYW5kIEFycmF5LmlzQXJyYXkob2JqKVxuICAgICAgICBzZWdtZW50ID0gcGFyc2VJbnQoc2VnbWVudCwgMTApXG5cbiAgICAgIGlmIG5vdCBoYXNQcm9wKG9iaiwgc2VnbWVudClcbiAgICAgICAgcmV0dXJuIGdldE5vdEZvdW5kKG9iaiwgc2VnbWVudCwgcm9vdCwgcG9pbnRlciwgaVNlZ21lbnQgLSAxKVxuICAgICAgZWxzZVxuICAgICAgICBvYmogPSBnZXRQcm9wKG9iaiwgc2VnbWVudClcblxuICAgIHJldHVybiBvYmpcblxuICAjIyNcbiAgIyBSZW1vdmVzIHRoZSBsb2NhdGlvbiwgc3BlY2lmaWVkIGJ5IGBwb2ludGVyYCwgZnJvbSBgb2JqZWN0YC5cbiAgIyBSZXR1cm5zIHRoZSBtb2RpZmllZCBgb2JqZWN0YCwgb3IgdW5kZWZpbmVkIGlmIHRoZSBgcG9pbnRlcmAgaXMgZW1wdHkuXG4gICNcbiAgIyBAcGFyYW0geyp9IG9ialxuICAjIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBwb2ludGVyXG4gICMgQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgIyBAcGFyYW0ge2hhc1Byb3B9IG9wdGlvbnMuaGFzUHJvcFxuICAjIEBwYXJhbSB7Z2V0UHJvcH0gb3B0aW9ucy5nZXRQcm9wXG4gICMgQHBhcmFtIHtub3RGb3VuZH0gb3B0aW9ucy5kZWxOb3RGb3VuZFxuICAjIEByZXR1cm5zIHsqfVxuICAjIyNcbiAgQGRlbDogKG9iaiwgcG9pbnRlciwgb3B0aW9ucykgLT5cbiAgICBpZiB0eXBlb2YgcG9pbnRlciA9PSAnc3RyaW5nJ1xuICAgICAgcG9pbnRlciA9IEpzb25Qb2ludGVyLnBhcnNlKHBvaW50ZXIpXG5cbiAgICBpZiBwb2ludGVyLmxlbmd0aCA9PSAwXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG5cbiAgICBoYXNQcm9wID0gb3B0aW9ucz8uaGFzUHJvcCA/IEpzb25Qb2ludGVyLmhhc0pzb25Qcm9wXG4gICAgZ2V0UHJvcCA9IG9wdGlvbnM/LmdldFByb3AgPyBKc29uUG9pbnRlci5nZXRQcm9wXG4gICAgZGVsTm90Rm91bmQgPSBvcHRpb25zPy5kZWxOb3RGb3VuZCA/IEpzb25Qb2ludGVyLmRlbE5vdEZvdW5kXG5cbiAgICByb290ID0gb2JqXG4gICAgaVNlZ21lbnQgPSAwXG4gICAgbGVuID0gcG9pbnRlci5sZW5ndGhcbiAgICB3aGlsZSBpU2VnbWVudCAhPSBsZW5cbiAgICAgIHNlZ21lbnQgPSBwb2ludGVyW2lTZWdtZW50XVxuICAgICAgKytpU2VnbWVudFxuXG4gICAgICBpZiBzZWdtZW50ID09ICctJyBhbmQgQXJyYXkuaXNBcnJheShvYmopXG4gICAgICAgIHNlZ21lbnQgPSBvYmoubGVuZ3RoXG4gICAgICBlbHNlIGlmIHNlZ21lbnQubWF0Y2goL14oPzowfFsxLTldXFxkKikkLykgYW5kIEFycmF5LmlzQXJyYXkob2JqKVxuICAgICAgICBzZWdtZW50ID0gcGFyc2VJbnQoc2VnbWVudCwgMTApXG5cbiAgICAgIGlmIG5vdCBoYXNQcm9wKG9iaiwgc2VnbWVudClcbiAgICAgICAgZGVsTm90Rm91bmQob2JqLCBzZWdtZW50LCByb290LCBwb2ludGVyLCBpU2VnbWVudCAtIDEpXG4gICAgICAgIGJyZWFrXG4gICAgICBlbHNlIGlmIGlTZWdtZW50ID09IGxlblxuICAgICAgICBkZWxldGUgb2JqW3NlZ21lbnRdXG4gICAgICAgIGJyZWFrXG4gICAgICBlbHNlXG4gICAgICAgIG9iaiA9IGdldFByb3Aob2JqLCBzZWdtZW50KVxuXG4gICAgcmV0dXJuIHJvb3RcblxuICAjIyNcbiAgIyBSZXR1cm5zIHRydWUgaWZmIHRoZSBsb2NhdGlvbiwgc3BlY2lmaWVkIGJ5IGBwb2ludGVyYCwgZXhpc3RzIGluIGBvYmplY3RgXG4gICNcbiAgIyBAcGFyYW0geyp9IG9ialxuICAjIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBwb2ludGVyXG4gICMgQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgIyBAcGFyYW0ge2hhc1Byb3B9IG9wdGlvbnMuaGFzUHJvcFxuICAjIEBwYXJhbSB7Z2V0UHJvcH0gb3B0aW9ucy5nZXRQcm9wXG4gICMgQHJldHVybnMgeyp9XG4gICMjI1xuICBAaGFzOiAob2JqLCBwb2ludGVyLCBvcHRpb25zKSAtPlxuICAgIGlmIHR5cGVvZiBwb2ludGVyID09ICdzdHJpbmcnXG4gICAgICBwb2ludGVyID0gSnNvblBvaW50ZXIucGFyc2UocG9pbnRlcilcblxuICAgIGhhc1Byb3AgPSBvcHRpb25zPy5oYXNQcm9wID8gSnNvblBvaW50ZXIuaGFzSnNvblByb3BcbiAgICBnZXRQcm9wID0gb3B0aW9ucz8uZ2V0UHJvcCA/IEpzb25Qb2ludGVyLmdldFByb3BcblxuICAgIGlTZWdtZW50ID0gMFxuICAgIGxlbiA9IHBvaW50ZXIubGVuZ3RoXG4gICAgd2hpbGUgaVNlZ21lbnQgIT0gbGVuXG4gICAgICBzZWdtZW50ID0gcG9pbnRlcltpU2VnbWVudF1cbiAgICAgICsraVNlZ21lbnRcblxuICAgICAgaWYgc2VnbWVudCA9PSAnLScgYW5kIEFycmF5LmlzQXJyYXkob2JqKVxuICAgICAgICBzZWdtZW50ID0gb2JqLmxlbmd0aFxuICAgICAgZWxzZSBpZiBzZWdtZW50Lm1hdGNoKC9eKD86MHxbMS05XVxcZCopJC8pIGFuZCBBcnJheS5pc0FycmF5KG9iailcbiAgICAgICAgc2VnbWVudCA9IHBhcnNlSW50KHNlZ21lbnQsIDEwKVxuXG4gICAgICBpZiBub3QgaGFzUHJvcChvYmosIHNlZ21lbnQpXG4gICAgICAgIHJldHVybiBmYWxzZVxuXG4gICAgICBvYmogPSBnZXRQcm9wKG9iaiwgc2VnbWVudClcblxuICAgIHJldHVybiB0cnVlXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
